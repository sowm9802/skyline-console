(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1637:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.sslParseMethod=a.provisioningStatusCodes=a.poolProtocols=a.operatingStatusCodes=a.listenerProtocols=a.insertHeaderTips=a.insertHeaderOptions=a.insertHeaderDesc=a.healthProtocols=a.getListenerInsertHeadersFormItem=a.getInsertHeadersValueFromForm=a.getInsertHeadersFormValueFromListener=a.getInsertHeaderCard=a.getCertificateColumns=a.certificateStatus=a.certificateMode=a.INSERT_HEADERS=void 0;var l,o,s=n(r(71)),d=n(r(43)),u=n(r(33)),c=n(r(261)),f=n(r(0)),p=(a.operatingStatusCodes={ONLINE:t("Online"),DRAINING:t("Draining"),OFFLINE:t("Offline"),DEGRADED:t("Degraded"),ERROR:t("Error"),NO_MONITOR:t("No Monitor")},a.provisioningStatusCodes={ACTIVE:t("Active"),DELETED:t("Deleted"),ERROR:t("Error"),PENDING_CREATE:t("Pending Create"),PENDING_UPDATE:t("Pending Update"),PENDING_DELETE:t("Pending Delete")},a.certificateMode={SERVER:t("Server Certificate"),CA:t("CA Certificate")}),m=a.certificateStatus={ACTIVE:t("Active"),ERROR:t("Error")};a.getCertificateColumns=e=>[{title:t("Name"),dataIndex:"name"},{title:t("Certificate Type"),dataIndex:"mode",valueMap:p},{title:t("Expires At"),dataIndex:"expiration",valueRender:"toLocalTime"},{title:t("Domain Name"),dataIndex:"domain",render:e=>e||"-"},{title:t("Listener"),dataIndex:"listener",render:t=>t?(0,s.default)(t).call(t,(t=>f.default.createElement("div",{key:t.id},e.getLinkRender("lbListenerDetail",t.name,{loadBalancerId:t.lb,id:t.id},null)))):"-"},{title:t("Status"),dataIndex:"status",valueMap:m},{title:t("Created At"),dataIndex:"created",valueRender:"toLocalTime"}];a.sslParseMethod=[{label:t("One-way authentication"),value:"one-way"},{label:t("Two-way authentication"),value:"two-way"}],a.listenerProtocols=[{label:"HTTP",value:"HTTP"},{label:"TCP",value:"TCP"},{label:"HTTPS",value:"TERMINATED_HTTPS"},{label:"UDP",value:"UDP"}],a.poolProtocols=[{label:"HTTP",value:"HTTP"},{label:"TCP",value:"TCP"},{label:"UDP",value:"UDP"}],a.healthProtocols=[{label:"HTTP",value:"HTTP"},{label:"TCP",value:"TCP"},{label:"UDP",value:"UDP-CONNECT"}];var h=a.INSERT_HEADERS={"X-Forwarded-For":t("Specify the client IP address"),"X-Forwarded-Port":t("Specify the listener port")},g=a.insertHeaderOptions=(0,s.default)(l=(0,d.default)(h)).call(l,(e=>({label:e,value:e}))),v=a.insertHeaderTips=f.default.createElement(f.default.Fragment,null,(0,s.default)(o=(0,d.default)(h)).call(o,(e=>f.default.createElement("p",{key:e},e,": ",h[e])))),_=a.insertHeaderDesc=t("The optional headers to insert into the request before it is sent to the backend member.");a.getListenerInsertHeadersFormItem=()=>({name:"insert_headers",label:t("Custom Headers"),type:"check-group",extra:_,tip:v,options:g});a.getInsertHeadersValueFromForm=e=>{var t;if(!e)return null;var a={};return(0,u.default)(t=(0,d.default)(h)).call(t,(t=>{e[t]&&(a[t]="true")})),(0,c.default)(a)?null:a};a.getInsertHeadersFormValueFromListener=e=>{var t,{insert_headers:a}=e||{},r={};return(0,u.default)(t=(0,d.default)(h)).call(t,(e=>{a[e]&&(r[e]="true"===a[e])})),r};a.getInsertHeaderCard=e=>{var a,r=[];return(0,u.default)(a=(0,d.default)(h)).call(a,(t=>{e[t]&&r.push({label:t,content:e[t],tooltip:h[t]})})),{title:t("Custom Headers"),titleHelp:_,options:r}}},1659:function(e,t,a){"use strict";var r=a(43),i=a(54),n=a(39),l=a(29),o=a(33),s=a(55),d=a(56),u=a(20),c=a(22);u(t,"__esModule",{value:!0}),t.default=t.VpnIPsecConnectionStore=void 0;var f,p=c(a(29)),m=c(a(42)),h=c(a(61)),g=c(a(67)),v=c(a(140)),_=a(41),b=c(a(1717)),y=c(a(1718)),A=c(a(60)),I=c(a(66));function S(e,t){var a=r(e);if(i){var o=i(e);t&&(o=n(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?o(a=S(Object(i),!0)).call(a,(function(t){(0,m.default)(e,t,i[t])})):s?d(e,s(i)):o(r=S(Object(i))).call(r,(function(t){u(e,t,l(i,t))}))}return e}var C=new(t.VpnIPsecConnectionStore=(f=class extends I.default{get client(){return A.default.neutron.ipsecSiteConnections}get listFilterByProject(){return!0}fetchDetailWithPolicyDetail(e){var t=this;return(0,h.default)((function*(){var{id:a,ikePolicyID:r,ipsecPolicyID:i,all_projects:n}=e;t.isLoading=!0;var l=yield t.client.show(a,t.getDetailParams({all_projects:n})),o=yield b.default.fetchDetail({id:r}),s=yield y.default.fetchDetail({id:i}),d=(0,v.default)(l,t.responseKey)||l,u=t.mapperBeforeFetchProject(d);u=x(x({},u),{},{ikeDetail:o,ipsecDetail:s});try{var c=yield t.detailDidFetch(u,n),f=t.mapper(c);t.detail=f}catch(e){t.detail=u}return t.isLoading=!1,t.detail}))()}},(0,g.default)(f.prototype,"fetchDetailWithPolicyDetail",[_.action],(0,p.default)(f.prototype,"fetchDetailWithPolicyDetail"),f.prototype),f));t.default=C},1689:function(e,t,a){"use strict";var r=a(43),i=a(54),n=a(39),l=a(29),o=a(33),s=a(55),d=a(56),u=a(20),c=a(22);u(t,"__esModule",{value:!0}),t.default=t.ListenerStore=void 0;var f=c(a(71)),p=c(a(750)),m=c(a(61)),h=c(a(42)),g=c(a(60)),v=c(a(66));function _(e,t){var a=r(e);if(i){var o=i(e);t&&(o=n(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?o(a=_(Object(i),!0)).call(a,(function(t){(0,h.default)(e,t,i[t])})):s?d(e,s(i)):o(r=_(Object(i))).call(r,(function(t){u(e,t,l(i,t))}))}return e}class y extends v.default{get client(){return g.default.octavia.listeners}get poolClient(){return g.default.octavia.pools}get healthMonitorClient(){return g.default.octavia.healthMonitors}get lbClient(){return g.default.octavia.loadbalancers}get listFilterByProject(){return!0}get mapperBeforeFetchProject(){return e=>{var t;return b(b({},e),{},{lbIds:(0,f.default)(t=e.loadbalancers).call(t,(e=>e.id))})}}detailDidFetch(e){var t=this;return(0,m.default)((function*(){var a,{default_pool_id:r,default_tls_container_ref:i,client_ca_tls_container_ref:n,sni_container_refs:l}=e,[,o]=(i||"").split("/containers/"),[,s]=(n||"").split("/secrets/"),d=(0,f.default)(a=l||[]).call(a,(e=>{var[,t]=e.split("/containers/");return t}));(0,p.default)(e,{serverCertificateId:o,caCertificateId:s,sniCertificateId:d});var{loadbalancers:u=[]}=e,{loadbalancer:c}=yield t.lbClient.show(u[0].id);if(e.loadBalancer=c,!r)return e;try{var{pool:m}=yield t.poolClient.show(r);e.default_pool=m;var{healthmonitor_id:h}=m;if(h){var{healthmonitor:g}=yield t.healthMonitorClient.show(h);e.healthMonitor=g}return e}catch(t){return e}}))()}}t.ListenerStore=y;var A=new y;t.default=A},1701:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.vpnStatusOptions=a.vpnStatus=a.pfsOptions=a.ipsecPolicyTransformProtocolOptions=a.ipsecPolicyEncapsulationModeOptions=a.ikePolicyIKEVersionOptions=a.encryptionAlgorithmOptions=a.authAlgorithmOptions=void 0;var l,o,s,d,u,c,f,p=n(r(71)),m=n(r(43)),h=a.vpnStatus={ACTIVE:t("Active"),DOWN:t("Down"),BUILD:t("Build"),ERROR:t("Error"),PENDING_CREATE:t("Pending Create"),PENDING_UPDATE:t("Pending Update"),PENDING_DELETE:t("Pending Delete")};a.vpnStatusOptions=(0,p.default)(l=(0,m.default)(h)).call(l,(e=>({label:h[e],value:e,key:e}))),a.authAlgorithmOptions=(0,p.default)(o=["sha1","sha256","sha384","sha512"]).call(o,(e=>({label:e,value:e,key:e}))),a.encryptionAlgorithmOptions=(0,p.default)(s=["3des","aes-128","aes-192","aes-256"]).call(s,(e=>({label:e,value:e,key:e}))),a.pfsOptions=(0,p.default)(d=["group2","group5","group14"]).call(d,(e=>({label:e,value:e,key:e}))),a.ikePolicyIKEVersionOptions=(0,p.default)(u=["v1","v2"]).call(u,(e=>({label:e,value:e,key:e}))),a.ipsecPolicyEncapsulationModeOptions=(0,p.default)(c=["tunnel","transport"]).call(c,(e=>({label:e,value:e,key:e}))),a.ipsecPolicyTransformProtocolOptions=(0,p.default)(f=["esp","ah","ah-esp"]).call(f,(e=>({label:e,value:e,key:e})))},1715:function(e,t,a){"use strict";var r=a(43),i=a(54),n=a(39),l=a(29),o=a(33),s=a(55),d=a(56),u=a(20),c=a(22);u(t,"__esModule",{value:!0}),t.default=t.ContainersStore=void 0;var f,p,m=c(a(39)),h=c(a(203)),g=c(a(71)),v=c(a(88)),_=c(a(33)),b=c(a(116)),y=c(a(750)),A=c(a(414)),I=c(a(29)),S=c(a(61)),x=c(a(89)),C=c(a(42)),w=(c(a(90)),c(a(67))),P=c(a(66)),E=c(a(60)),D=a(41),k=a(1716),N=c(a(1689));function R(e,t){var a=r(e);if(i){var o=i(e);t&&(o=n(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?o(a=R(Object(i),!0)).call(a,(function(t){(0,C.default)(e,t,i[t])})):s?d(e,s(i)):o(r=R(Object(i))).call(r,(function(t){u(e,t,l(i,t))}))}return e}var T=t.ContainersStore=(f=class extends P.default{constructor(){super(...arguments),(0,C.default)(this,"updateMarkerParams",((e,t)=>({limit:e,offset:t}))),(0,x.default)(this,"delete",p,this)}get client(){return E.default.barbican.containers}get payloadClient(){return E.default.barbican.secrets.payload}get fetchListByLimit(){return!0}get secretStore(){return new k.SecretsStore}get mapper(){return e=>{var{container_ref:t,algorithm:a}=e,[,r]=t.split("/containers/"),{domain:i,expiration:n}=a?JSON.parse(a):{};return M(M({},e),{},{id:r,domain:i,expiration:n})}}requestListAllByLimit(e,t){var a=this;return(0,S.default)((function*(){for(var r=!0,i=[];r;){var n=i.length||"",l=yield a.requestListByMarker(e,t,n),o=a.getListDataFromResult(l);i=[...i,...o],(t>=l.total||n>=l.total)&&(r=!1)}return i}))()}updateItem(e,t){var{container_ref:a}=e,r=(0,m.default)(t).call(t,(e=>{var t=[e.default_tls_container_ref,e.client_ca_tls_container_ref,...e.sni_container_refs];return(0,h.default)(t).call(t,a)}));return r.length&&(e.listener=(0,g.default)(r).call(r,(e=>({id:e.id,name:e.name,lb:e.lbIds[0]})))),e}listDidFetch(e){var t=this;return(0,S.default)((function*(){if(0===e.length)return e;var[a,r]=yield v.default.all([t.secretStore.fetchList({mode:"SERVER"}),N.default.fetchList()]),i=(0,g.default)(e).call(e,(e=>{var{secret_refs:i=[]}=e;return 0===i.length?e.hidden=!0:((0,_.default)(i).call(i,(t=>{var{secret_ref:r=""}=t,[,i]=r.split("/secrets/"),n=(0,b.default)(a).call(a,(e=>e.id===i));n?((0,y.default)(t,{secret_info:n}),(0,y.default)(e,{algorithm:n.algorithm,mode:n.mode})):e.hidden=!0})),t.updateItem(e,r)),M({},e)}));return(0,m.default)(i).call(i,(e=>!0!==e.hidden))}))()}detailDidFetch(e){var t=this;return(0,S.default)((function*(){var a,{secret_refs:r=[]}=e,[i,n]=yield v.default.all([t.secretStore.fetchList({mode:"SERVER"}),N.default.fetchList()]),l=[];(0,_.default)(r).call(r,function(){var t=(0,S.default)((function*(t){var{secret_ref:a=""}=t,[,r]=a.split("/secrets/"),n=(0,b.default)(i).call(i,(e=>e.id===r));n&&(l.push(n.id),(0,y.default)(t,{secret_info:n}),(0,y.default)(e,{algorithm:n.algorithm,mode:n.mode}))}));return function(e){return t.apply(this,arguments)}}()),t.updateItem(e,n);var o=yield v.default.all((0,g.default)(l).call(l,(e=>t.payloadClient.list(e,{},{headers:{Accept:"text/plain"}}))));return(0,_.default)(a=o||[]).call(a,((e,t)=>{r[t].secret_info.payload=e})),e}))()}create(e){var t=this;return(0,S.default)((function*(){var a={name:e.name,mode:e.mode,payload_content_type:"text/plain",secret_type:"certificate",algorithm:(0,A.default)({domain:e.domain,expiration:e.expiration})},r=M(M({},a),{},{payload:e.certificate}),i=[t.secretStore.create(r)];if("SERVER"===e.mode){var n=M(M({},a),{},{payload:e.private_key});i.push(t.secretStore.create(n))}var[l,o]=yield v.default.all(i),s=[{name:"certificate",secret_ref:l.secret_ref}];o&&s.push({name:"private_key",secret_ref:o.secret_ref});var d={type:"certificate",name:e.name,secret_refs:s};return t.client.create(d)}))()}},(0,w.default)(f.prototype,"create",[D.action],(0,I.default)(f.prototype,"create"),f.prototype),p=(0,w.default)(f.prototype,"delete",[D.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,S.default)((function*(t){var{id:a,secret_refs:r=[]}=t;return yield v.default.all((0,g.default)(r).call(r,(t=>{var{secret_ref:a=""}=t,[,r]=a.split("/secrets/");return e.secretStore.delete({id:r})}))),e.submitting(e.client.delete(a))}));return function(e){return t.apply(this,arguments)}}()}}),f),B=new T;t.default=B},1716:function(e,t,a){"use strict";var r=a(43),i=a(54),n=a(39),l=a(29),o=a(33),s=a(55),d=a(56),u=a(20),c=a(22);u(t,"__esModule",{value:!0}),t.default=t.SecretsStore=void 0;var f,p=c(a(72)),m=c(a(39)),h=c(a(203)),g=c(a(71)),v=c(a(88)),_=c(a(414)),b=c(a(29)),y=c(a(61)),A=c(a(42)),I=c(a(67)),S=c(a(66)),x=c(a(60)),C=a(41),w=c(a(1689)),P=["expiration","domain","algorithm"];function E(e,t){var a=r(e);if(i){var o=i(e);t&&(o=n(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?o(a=E(Object(i),!0)).call(a,(function(t){(0,A.default)(e,t,i[t])})):s?d(e,s(i)):o(r=E(Object(i))).call(r,(function(t){u(e,t,l(i,t))}))}return e}var k=t.SecretsStore=(f=class extends S.default{constructor(){super(...arguments),(0,A.default)(this,"updateMarkerParams",((e,t)=>({limit:e,offset:t})))}get client(){return x.default.barbican.secrets}get payloadClient(){return x.default.barbican.secrets.payload}get fetchListByLimit(){return!0}get paramsFunc(){return e=>D({},e)}get mapper(){return e=>{var{secret_ref:t,algorithm:a}=e,[,r]=t.split("/secrets/"),{domain:i,expiration:n}=a?JSON.parse(a):{};return D(D({},e),{},{id:r,domain:i,expiration:n})}}requestListAllByLimit(e,t){var a=this;return(0,y.default)((function*(){for(var r=!0,i=[];r;){var n=i.length||"",l=yield a.requestListByMarker(e,t,n),o=a.getListDataFromResult(l);i=[...i,...o],(t>=l.total||n>=l.total)&&(r=!1)}return i}))()}updateItem(e,t){var{secret_ref:a}=e,r=(0,m.default)(t).call(t,(e=>{var t=[e.default_tls_container_ref,e.client_ca_tls_container_ref,...e.sni_container_refs];return(0,h.default)(t).call(t,a)}));return r.length&&(e.listener=(0,g.default)(r).call(r,(e=>({id:e.id,name:e.name,lb:e.lbIds[0]})))),e}fetchDetail(e){var t=this;return(0,y.default)((function*(){var{id:a,silent:r}=e;r||(t.isLoading=!0);var[i,n,l]=yield v.default.all([t.client.show(a,{},{headers:{Accept:"application/json"}}),t.payloadClient.list(a,{},{headers:{Accept:"text/plain"}}),w.default.fetchList()]);i.payload=n,t.updateItem(i,l);var o=t.mapper(i||{});return t.detail=o,t.isLoading=!1,o}))()}listDidFetch(e){var t=this;return(0,y.default)((function*(){if(0===e.length)return e;var a=yield w.default.fetchList();return(0,g.default)(e).call(e,(e=>(t.updateItem(e,a),D({},e))))}))()}create(e){var t=this;return(0,y.default)((function*(){var{expiration:a,domain:r,algorithm:i}=e,n=D(D({},(0,p.default)(e,P)),{},{algorithm:i||(0,_.default)({domain:r,expiration:a})});return t.client.create(n)}))()}},(0,I.default)(f.prototype,"fetchDetail",[C.action],(0,b.default)(f.prototype,"fetchDetail"),f.prototype),(0,I.default)(f.prototype,"create",[C.action],(0,b.default)(f.prototype,"create"),f.prototype),f),N=new k;t.default=N},1717:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=t.VpnIKEPolicyStore=void 0;var n=i(a(60)),l=i(a(66));class o extends l.default{get client(){return n.default.neutron.ikePolicies}get listResponseKey(){return"ikepolicies"}get listFilterByProject(){return!0}}t.VpnIKEPolicyStore=o;var s=new o;t.default=s},1718:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=t.VpnIPsecPolicyStore=void 0;var n=i(a(60)),l=i(a(66));class o extends l.default{get client(){return n.default.neutron.ipsecPolicies}get listResponseKey(){return"ipsecpolicies"}get listFilterByProject(){return!0}}t.VpnIPsecPolicyStore=o;var s=new o;t.default=s},1738:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=t.VpnServicesStore=void 0;var n=i(a(60)),l=i(a(66));class o extends l.default{get client(){return n.default.neutron.vpnservices}get listFilterByProject(){return!0}}t.VpnServicesStore=o;var s=new o;t.default=s},1739:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=t.VpnEndPointGroupStore=void 0;var n=i(a(60)),l=i(a(66));class o extends l.default{get client(){return n.default.neutron.endpointGroups}get listFilterByProject(){return!0}}t.VpnEndPointGroupStore=o;var s=new o;t.default=s},1740:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=t.DNSZonesStore=void 0;var n,l,o,s=i(a(29)),d=i(a(61)),u=i(a(89)),c=(i(a(42)),i(a(90)),i(a(67))),f=a(41),p=i(a(60)),m=i(a(2011)),h=t.DNSZonesStore=(n=class extends m.default{constructor(){super(...arguments),(0,u.default)(this,"delete",l,this),(0,u.default)(this,"update",o,this)}get client(){return p.default.designate.zones}create(e){var t=this;return(0,d.default)((function*(){return t.submitting(t.client.create(e))}))()}},(0,c.default)(n.prototype,"create",[f.action],(0,s.default)(n.prototype,"create"),n.prototype),l=(0,c.default)(n.prototype,"delete",[f.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var{id:t}=e;return this.submitting(this.client.delete(t))}}}),o=(0,c.default)(n.prototype,"update",[f.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{var{id:a}=e;return this.submitting(this.client.patch(a,t))}}}),n),g=new h;t.default=g},1741:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=t.DNSRecordSetsStore=void 0;var n,l,o,s,d=i(a(72)),u=i(a(89)),c=i(a(42)),f=i(a(67)),p=(i(a(90)),i(a(60))),m=a(41),h=i(a(2011)),g=["id","zoneId","all_projects","current"],v=t.DNSRecordSetsStore=(n=class extends h.default{constructor(){super(...arguments),(0,c.default)(this,"getFatherResourceId",(e=>e.zoneId||e.id)),(0,u.default)(this,"delete",l,this),(0,u.default)(this,"update",o,this),(0,u.default)(this,"create",s,this)}get client(){return p.default.designate.zones.recordsets}get isSubResource(){return!0}get paramsFuncPage(){return e=>{var{id:t,zoneId:a,all_projects:r,current:i}=e;return(0,d.default)(e,g)}}},l=(0,f.default)(n.prototype,"delete",[m.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var{zone_id:t,recordset_id:a}=e;return this.submitting(this.client.delete(t,a))}}}),o=(0,f.default)(n.prototype,"update",[m.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t,a)=>this.submitting(this.client.update(e,t,a))}}),s=(0,f.default)(n.prototype,"create",[m.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{var{id:a}=e;return this.submitting(this.client.create(a,t))}}}),n),_=new v;t.default=_},1777:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.algorithmTip=a.algorithmDict=a.BackendProtocol=a.Algorithm=void 0;var l,o=n(r(71)),s=n(r(43)),d=(a.BackendProtocol=[{label:t("TCP"),value:"TCP"},{label:t("PING"),value:"PING"}],a.algorithmDict={LEAST_CONNECTIONS:t("LEAST_CONNECTIONS"),ROUND_ROBIN:t("ROUND_ROBIN"),SOURCE_IP:t("SOURCE_IP")});a.algorithmTip={LEAST_CONNECTIONS:t("A dynamic scheduling algorithm that estimates the server load based on the number of currently active connections. The system allocates new connection requests to the server with the least number of current connections. Commonly used for long connection services, such as database connections and other services."),ROUND_ROBIN:t("Each new connection request is assigned to the next server in order, and all requests are finally divided equally among all servers. Commonly used for short connection services, such as HTTP services."),SOURCE_IP:t("Perform a consistent hash operation on the source IP address of the request to obtain a specific value. At the same time, the back-end server is numbered, and the request is distributed to the server with the corresponding number according to the calculation result. This can enable load distribution of visits from different source IPs, and at the same time enable requests from the same client IP to always be dispatched to a specific server. This method is suitable for load balancing TCP protocol without cookie function.")},a.Algorithm=(0,o.default)(l=(0,s.default)(d)).call(l,(e=>({label:d[e],value:e})))},1778:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=t.PoolStore=void 0;var n=i(a(60)),l=i(a(66));class o extends l.default{get client(){return n.default.octavia.pools}get listFilterByProject(){return!0}}t.PoolStore=o;var s=new o;t.default=s},1779:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=t.PoolMemberStore=void 0;var n,l,o=i(a(29)),s=i(a(89)),d=(i(a(42)),i(a(90)),i(a(67))),u=a(41),c=i(a(60)),f=i(a(66)),p=t.PoolMemberStore=(n=class extends f.default{constructor(){super(...arguments),(0,s.default)(this,"delete",l,this)}get client(){return this.poolClient.members}get poolClient(){return c.default.octavia.pools}get responseKey(){return"member"}get listFilterByProject(){return!0}listFetchByClient(e,t){var{pool_id:a}=t;return this.client.list(a)}create(e){var{default_pool_id:t,data:a}=e,r={};return r[this.listResponseKey]=a,this.submitting(this.client.create(t,r))}batchUpdate(e){var{default_pool_id:t,data:a}=e,r={};return r[this.listResponseKey]=a,this.submitting(this.poolClient.batchUpdateMembers(t,r))}update(e){var{default_pool_id:t,member_id:a,data:r}=e,i={};return i[this.responseKey]=r,this.submitting(this.client.update(t,a,i))}},(0,d.default)(n.prototype,"create",[u.action],(0,o.default)(n.prototype,"create"),n.prototype),(0,d.default)(n.prototype,"batchUpdate",[u.action],(0,o.default)(n.prototype,"batchUpdate"),n.prototype),(0,d.default)(n.prototype,"update",[u.action],(0,o.default)(n.prototype,"update"),n.prototype),l=(0,d.default)(n.prototype,"delete",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var{id:t,default_pool_id:a}=e;return this.submitting(this.client.delete(a,t))}}}),n),m=new p;t.default=m},1780:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=t.ReverseStore=void 0;var n,l,o,s=i(a(1958)),d=i(a(89)),u=(i(a(42)),i(a(67))),c=(i(a(90)),a(41)),f=i(a(60)),p=i(a(66)),m=t.ReverseStore=(n=class extends p.default{constructor(){super(...arguments),(0,d.default)(this,"set",l,this),(0,d.default)(this,"unset",o,this)}get client(){return(0,s.default)(f.default.designate).floatingips}get reverseClient(){return(0,s.default)(f.default.designate)}get isSubResource(){return!0}detailFetchByClient(e){var{id:t}=e;return this.reverseClient.reverseDetail(t)}get paramsFunc(){return()=>{}}},l=(0,u.default)(n.prototype,"set",[c.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{var{id:a}=e;return this.submitting(this.reverseClient.setReverse(a,t))}}}),o=(0,u.default)(n.prototype,"unset",[c.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{var{id:a}=e;return this.submitting(this.reverseClient.unsetReverse(a,t))}}}),n),h=new m;t.default=h},1781:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.zoneTypeOptions=a.zoneNameRegex=a.zoneNameMessage=a.validateZoneName=a.ZONE_TYPE_ENUM=a.ZONE_TYPES=a.ZONE_STATUS=void 0;var l=n(r(88)),o=n(r(508)),s=r(202),d=a.ZONE_TYPE_ENUM={primary:"PRIMARY",secondary:"SECONDARY"},u=a.ZONE_TYPES={[d.primary]:t("Primary"),[d.secondary]:t("Secondary")},c=(a.zoneTypeOptions=(0,s.getOptions)(u),a.zoneNameRegex=/^.+\.$/),f=a.zoneNameMessage=t('The zone name should end with "."');a.validateZoneName=(e,a)=>a?c.test(a)?(0,o.default)(a).call(a).split(".").length<=1?l.default.reject(new Error(t('More than one label is required, such as: "example.org."'))):l.default.resolve():l.default.reject(f):l.default.resolve();a.ZONE_STATUS={ACTIVE:t("Active"),PENDING:t("Pending"),ERROR:t("Error")}},1782:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.validateName=a.nameRegex=a.nameMessage=a.getRecordSetType=a.getRecordSetFormItem=a.dnsRRTypeList=a.RECORD_STATUS=a.DNS_RECORD_TYPE=void 0;var l=n(r(93)),o=n(r(71)),s=n(r(740)),d=n(r(43)),u=n(r(88)),c=n(r(203)),f=n(r(33)),p=n(r(157)),m=n(r(0)),h=r(707),g=r(1781),v=a.DNS_RECORD_TYPE={A:{name:t("Address Record"),nameExtra:"example.com.",recordsExtra:"192.168.1.1"},AAAA:{name:t("IPv6 Address Record"),nameExtra:"example.com.",recordsExtra:"2001:db8:3333:4444:5555:6666:7777:8888"},CAA:{name:t("Certificate Authority Authorization Record"),nameExtra:"example.com.",recordsExtra:t('0 iodef mailto:security@example.com <ul><li><b>0:</b> is flag. An unsigned integer between 0-255.</li> <li><b>iodef:</b> An ASCII string that represents the identifier of the property represented by the record.<br />Available Tags: "issue", "issuewild", "iodef"</li><li><b>mailto:security@example.com:</b> The value associated with the tag.</li></ul>')},CNAME:{name:t("Canonical Name Record"),nameExtra:"first.example.com.",recordsExtra:"other-example.com"},MX:{name:t("Mail Exchange Record"),nameExtra:"example.com.",recordsExtra:t("10 mail.example.com <ul><li><b>10:</b> Priority</li> <li><b>mail.example.com:</b> Value</li></ul>")},NS:{name:t("Name Server"),nameExtra:"example.com.",recordsExtra:"ns1.example.com"},PTR:{name:t("Pointer Record"),nameExtra:"example.com.",recordsExtra:"1.1.0.192.in-addr.arpa."},SOA:{name:t("Start Of Authority"),nameExtra:"example.com.",recordsExtra:t("ns1.example.com admin.example.com 2013022001 86400 7200 604800 300 <ul><li>The primary name server for the domain, which is ns1.example.com or the first name server in the vanity name server list.</li><li>The responsible party for the domain: admin.example.com.</li><li>A timestamp that changes whenever you update your domain.</li><li>The number of seconds before the zone should be refreshed.</li><li>The number of seconds before a failed refresh should be retried.</li><li>The upper limit in seconds before a zone is considered no longer authoritative.</li><li>The negative result TTL (for example, how long a resolver should consider a negative result for a subdomain to be valid before retrying).</li></ul>")},SPF:{name:t("Sender Policy Framework"),nameExtra:"example.com.",recordsExtra:t('"v=spf1 ipv4=192.1.1.1 include:examplesender.email +all" <ul><li><b>v=spf1:</b> Tells the server that this contains an SPF record. Every SPF record must begin with this string.</li> <li><b>Guest List:</b> Then comes the “guest list” portion of the SPF record or the list of authorized IP addresses. In this example, the SPF record is telling the server that ipv4=192.1.1.1 is authorized to send emails on behalf of the domain.</li> <li><b>include:examplesender.net:</b> is an example of the include tag, which tells the server what third-party organizations are authorized to send emails on behalf of the domain. This tag signals that the content of the SPF record for the included domain (examplesender.net) should be checked and the IP addresses it contains should also be considered authorized. Multiple domains can be included within an SPF record but this tag will only work for valid domains.</li><li><b>-all:</b> Tells, the server that addresses not listed in the SPF record are not authorized to send emails and should be rejected.</li></ul>')},SRV:{name:t("Service Locator"),nameExtra:"_sip._tcp.example.com. <ul><li><b>_sip:</b> represents the name of the service.</li> <li><b>_tcp:</b> represents the protocol of the service, this is usually either TCP or UDP.</li><li><b>example.com:</b> represents the domain in which this record is for.</li></ul>",recordsExtra:t('10 0 5060 server1.example.com. <ul><li>"10" is the priority of the record. The lower the value, the higher the priority.</li><li>0 is the weight of the record. This is the weight of which this record has a chance to be used when there are multiple matching SRV records of the same priority.</li><li>5060 is the port of the record. This specifies the port on which the application or service is running.</li> <li>server1.example.com is the target of the record. This specifies the domain of the application or service the record is for. SRV records must specify a target which is either an A record or AAAA record, and may not use CNAME records.</li></ul>')},SSHFP:{name:t("SSH Public Key Fingerprint"),nameExtra:"example.com.",recordsExtra:t("4 2 123456789abcdef67890123456789abcdef67890123456789abcdef123456789 <ul> <li><b>4 is Algorithm:</b> Algorithm (0: reserved; 1: RSA; 2: DSA, 3: ECDSA; 4: Ed25519; 6:Ed448)</li> <li><b>2 is Type:</b> Algorithm used to hash the public key (0: reserved; 1: SHA-1; 2: SHA-256)</li> <li><b>Last parameter is Fingerprint:</b> Hexadecimal representation of the hash result, as text</li> </ul>")},TXT:{name:t("Text Record"),nameExtra:"example.com."}};a.getRecordSetType=e=>{var t;return v[e]?(0,l.default)(t="".concat(e," - ")).call(t,v[e].name):e};var _=()=>{var e,t;return(0,o.default)(e=(0,s.default)(t=(0,d.default)(v)).call(t)).call(e,(e=>{var t;return{label:(0,l.default)(t="".concat(e," - ")).call(t,v[e].name),value:e,key:e}}))};a.dnsRRTypeList=_;var b=a.nameRegex=/^.+\.$/,y=a.nameMessage=t('The name should be end with "."'),A=(e,t)=>t?b.test(t)?u.default.resolve():u.default.reject(y):u.default.resolve();a.validateName=A;a.getRecordSetFormItem=(e,a)=>[{name:"type",label:t("Type"),type:"select",options:_(),onChange:a=>{var r,i,n;(0,c.default)(r=(0,d.default)(v)).call(r,a)&&e.setState({nameExtra:(0,l.default)(i="".concat(t("Exp: "))).call(i,v[a].nameExtra),recordsExtra:(0,p.default)(v[a].recordsExtra)?(0,l.default)(n="".concat(t("Exp: "))).call(n,v[a].recordsExtra):""})},required:!0},{name:"name",label:t("Name"),type:"input",required:!0,tip:()=>m.default.createElement("div",{dangerouslySetInnerHTML:{__html:e.state.nameExtra}}),extra:m.default.createElement("div",{dangerouslySetInnerHTML:{__html:e.state.nameExtra}}),validator:A},{name:"description",label:t("Description"),type:"textarea"},{name:"ttl",label:t("TTL"),type:"input-number",required:!0},{name:"records",label:t("Records"),type:"add-select",isInput:!0,required:!0,placeholder:t("Please input at least one record"),width:280,tip:()=>m.default.createElement("div",{dangerouslySetInnerHTML:{__html:e.state.recordsExtra}}),extra:m.default.createElement("div",{dangerouslySetInnerHTML:{__html:e.state.recordsExtra}}),validator:(e,r)=>{var{type:i}=a,{isIPv4:n,isIpv6:l}=h.ipValidate;return new u.default((e=>{r&&(0,f.default)(r).call(r,(e=>{if("A"===i&&!n(e.value))throw new Error(t("Please enter a valid IPv4 value."));if("AAAA"===i&&!l(e.value))throw new Error(t("Please enter a valid IPv6 value."))})),e()}))}}];a.RECORD_STATUS=g.ZONE_STATUS},1846:function(e,t,a){var r=a(4319);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,i);r.locals&&(e.exports=r.locals)},1847:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(4426)),l=i(a(4428)),o=i(a(4429)),s={rowActions:{firstAction:l.default,moreActions:[]},batchActions:[l.default],primaryActions:[n.default]},d={rowActions:{firstAction:o.default,moreActions:[]},batchActions:[o.default],primaryActions:[n.default]};t.default={actionConfigsContainer:s,actionConfigsSecret:d}},1991:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Networks=void 0;var p=f(r(715)),m=f(r(39)),h=f(r(42)),g=r(485),v=f(r(1626)),_=r(717),b=r(290),y=r(412),A=f(r(1992));function I(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=I(Object(i),!0)).call(a,(function(t){(0,h.default)(e,t,i[t])})):d?u(e,d(i)):s(r=I(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class x extends v.default{constructor(){super(...arguments),(0,h.default)(this,"updateFetchParamsByPage",(e=>this.isAdminPage||this.isAllTab?S(S({},e),{},{all_projects:!0}):this.isProjectTab?S(S({},e),{},{project_id:this.currentProjectId}):this.isSharedTab?S(S({},e),{},{shared:!0}):this.isExternalTab?S(S({},e),{},{"router:external":!0}):S({},e)))}init(){this.store=new b.NetworkStore,this.downloadStore=new b.NetworkStore}get isFilterByBackend(){return!0}get isSortByBackend(){return!0}get defaultSortKey(){return"status"}get policy(){return"get_network"}get name(){return t("networks")}get actionConfigs(){return A.default}get hasTab(){return!this.isAdminPage}get adminPageHasProjectFilter(){return!0}get tab(){if(this.isAdminPage)return null;var{tab:e="projectNetwork"}=this.props;return e}get isProjectTab(){return"projectNetwork"===this.tab}get isSharedTab(){return"sharedNetwork"===this.tab}get isExternalTab(){return"externalNetwork"===this.tab}get isAllTab(){return"allNetwork"===this.tab}getColumns(){var e=(0,_.networkColumns)(this);return this.isAdminPage||this.isAllTab?((0,p.default)(e).call(e,1,0,{title:t("Project ID/Name"),dataIndex:"project_name",isHideable:!0,sortKey:"project_id"}),e):this.isProjectTab?(0,m.default)(e).call(e,(e=>"tenant_id"!==e.dataIndex)):this.isSharedTab?(0,m.default)(e).call(e,(e=>"shared"!==e.dataIndex)):this.isExternalTab?(0,m.default)(e).call(e,(e=>"router:external"!==e.dataIndex)):e}get searchFilters(){var e={label:t("Name"),name:"name"},a={label:t("Shared"),name:"shared",options:y.yesNoOptions},r={label:t("External"),name:"router:external",options:y.yesNoOptions},i={label:t("Project Range"),name:"project_id",options:[{label:t("Current Project"),key:this.currentProjectId},{label:t("All"),key:"all"}]};return this.isSharedTab?[e,r,i]:this.isExternalTab?[e,a,i]:[e,a,r]}}a.Networks=x;a.default=(0,g.inject)("rootStore")((0,g.observer)(x))},1992:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(1993)),l=i(a(1995)),o=i(a(4291)),s={rowActions:{firstAction:i(a(4292)).default,moreActions:[{action:l.default},{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]};t.default=s},1993:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.CreateNetwork=void 0;var p=f(r(71)),m=f(r(39)),h=f(r(124)),g=f(r(88)),v=f(r(61)),_=f(r(72)),b=f(r(42)),y=f(r(421)),A=f(r(261)),I=r(485),S=r(1625),x=r(707),C=f(r(290)),w=f(r(486)),P=f(r(1654)),E=r(1635),D=f(r(1994)),k=r(717),N=r(1647),R=r(202),M=r(41),T=f(r(763)),B=["name","project_id","provider_network_type","provider_physical_network","provider_segmentation_id","shared","external_network","availableZone","allocation_pools","host_routes","description","mtu","port_security_enabled"];function j(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=j(Object(i),!0)).call(a,(function(t){(0,b.default)(e,t,i[t])})):d?u(e,d(i)):s(r=j(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}var{physicalNetworkArray:Q,segmentationNetworkArray:L,segmentationNetworkRequireArray:O,validateAllocationPoolsWithGatewayIp:q,checkDNS:V,checkIpv6DNS:H,checkHostRoutes:U,checkIpv6HostRoutes:G,getAllocationPools:z,getHostRouters:K}=T.default,{isIpCidr:J,isIPv6Cidr:Z,isIpv6:W}=x.ipValidate,{nameValidateWithoutChinese:X}=x.nameTypeValidate,Y=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{left:r=0}=e||{},{left:i=0}=t||{};return a?0!==r&&0!==i?1:0:0!==r?1:0};class $ extends S.ModalAction{constructor(){super(...arguments),(0,b.default)(this,"onSubmit",(e=>{var{name:t,project_id:a,provider_network_type:r,provider_physical_network:i,provider_segmentation_id:n,shared:l,external_network:o,availableZone:s,allocation_pools:d,host_routes:u,description:c,mtu:f,port_security_enabled:p}=e,m=(0,_.default)(e,B),h=z(d),g=K(u),v={name:t,description:c,port_security_enabled:p};s&&(v.availability_zone_hints=[s]),f&&(v.mtu=f);var b={"router:external":o,project_id:a?a.selectedRowKeys[0]:this.currentProjectId,"provider:network_type":r,"provider:physical_network":i,"provider:segmentation_id":n},y={shared:l},A=F({},v);return this.isAdminPage&&(A=F(F({},A),b)),this.isSystemAdmin&&(A=F(F({},A),y)),C.default.createAndMore(A,F(F({},m),{},{allocation_pools:h,host_routes:g}))})),(0,b.default)(this,"onOk",((e,a,r)=>(this.values=e,this.onSubmit(e,a).then((()=>{!this.isModal&&this.routing.push(this.listUrl),P.default.success(this.successText),r&&(0,y.default)(r)&&r(!0,!1)}),(a=>{var{type:i,error:n}=JSON.parse(a);"create_network"===i?P.default.errorWithDetail(n,this.errorText):"create_subnet"===i&&P.default.errorWithDetail(n,t("Unable to {action}, instance: {name}.",{action:t("Create Subnet"),name:e.subnet_name})),r&&(0,y.default)(r)&&r(!1,!0)}))))),(0,b.default)(this,"checkCidr",(e=>{var{ip_version:t="ipv4"}=this.state;return!("ipv4"===t&&!J(e))&&!("ipv6"===t&&!Z(e))})),(0,b.default)(this,"checkGateway",(e=>!!(0,A.default)(e)||!!W(e))),(0,b.default)(this,"validateAllocationPools",((e,t)=>q.call(this,e,t))),(0,b.default)(this,"onProjectChange",(e=>{var{selectedRowKeys:t}=e;this.setState({projectId:t[0]},(()=>{this.getQuota()}))})),(0,b.default)(this,"onCreateSubnetChange",(e=>{this.setState({create_subnet:e}),C.default.updateCreateWithSubnet(e)}))}get name(){return t("create network")}static get modalSize(){var{pathname:e}=window.location;return(0,R.isAdminPage)(e)?"large":"small"}getModalSize(){return this.isAdminPage?"large":"small"}init(){C.default.updateCreateWithSubnet(!1),this.state.networkQuota={},this.state.subnetQuota={},this.state.quotaLoading=!0,this.state.create_subnet=!1,this.state.projectId=this.currentProjectId,this.projectStore=w.default,D.default.fetchAvailableZones(),this.isAdminPage&&this.fetchProjectList(),this.getQuota()}get isSystemAdmin(){return(0,E.checkSystemAdmin)()}static get disableSubmit(){var{neutronQuota:{network:e={},subnet:t={}}}=w.default,{createWithSubnet:a=!1}=C.default;return 0===Y(e,t,a)}static get showQuota(){return!0}fetchProjectList(){var e=this;return(0,v.default)((function*(){yield e.projectStore.fetchProjectsWithDomain(),e.updateDefaultValue()}))()}get projects(){return(0,M.toJS)(this.projectStore.list.data)||[]}get showQuota(){return!0}getQuota(){var e=this;return(0,v.default)((function*(){var{projectId:t}=e.state;e.setState({quotaLoading:!0});var a=yield e.projectStore.fetchProjectNeutronQuota(t),{network:r={},subnet:i={}}=a||{};e.setState({networkQuota:r,subnetQuota:i,quotaLoading:!1})}))()}get quotaInfo(){var{networkQuota:e={},subnetQuota:a={},quotaLoading:r,create_subnet:i}=this.state;if(r)return[];var n=Y(e,a,i);return[F(F({},e),{},{add:n,name:"network",title:t("Network")}),F(F({},a),{},{add:i?n:0,name:"subnet",title:t("Subnet"),type:"line"})]}get defaultValue(){var e={enable_dhcp:!0,provider_network_type:"vxlan",ip_version:"ipv4",disable_gateway:!1,more:!1,port_security_enabled:!0,ipv6_ra_mode:"slaac",ipv6_address_mode:"slaac"};return this.isAdminPage&&(e.project_id={selectedRowKeys:[this.currentProjectId]}),e}get availableZones(){var e,t;return(0,p.default)(e=(0,m.default)(t=D.default.availableZones||[]).call(t,(e=>"available"===e.state&&"network"===e.resource))).call(e,(e=>({value:e.name,label:e.name})))}get SegIDTips(){var{provider_network_type:e="vxlan"}=this.state;switch(e){case"vxlan":default:return t("For VXLAN networks, valid segmentation IDs are 1 to 16777215");case"vlan":return t("For VLAN networks, valid segmentation IDs are 1 to 4094");case"gre":return t("For GRE networks, valid segmentation IDs are 1 to 4294967295")}}get SegMax(){var{provider_network_type:e="vxlan"}=this.state;switch(e){case"vxlan":default:return 16777215;case"vlan":return 4094;case"gre":return 4294967295}}get formItems(){var{more:e,create_subnet:a=!1,provider_network_type:r="vxlan",ip_version:i="ipv4",disable_gateway:n=!1}=this.state,l=this.isAdminPage&&(0,h.default)(Q).call(Q,r)>-1,o=this.isAdminPage&&(0,h.default)(Q).call(Q,r)>-1,s=this.isAdminPage&&(0,h.default)(L).call(L,r)>-1,d=this.isAdminPage&&(0,h.default)(O).call(O,r)>-1,u="ipv4"===i;return[{name:"name",label:t("Network Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"availableZone",label:t("Available Zone"),type:"select",placeholder:t("Please select"),options:this.availableZones},{name:"mtu",label:t("MTU"),type:"input-number",min:68,max:9e3,extra:t("Minimum value is 68 for IPv4, and 1280 for IPv6.")},{name:"create_subnet",label:t("Create Subnet"),type:"check",onChange:this.onCreateSubnetChange},{name:"shared",label:t("Shared"),type:"check",hidden:!this.isSystemAdmin},{name:"port_security_enabled",label:t("Port Security Enabled"),type:"switch",required:!0},{name:"external_network",label:t("External Network"),type:"check",hidden:!this.isAdminPage},F({name:"project_id",label:t("Project"),type:"select-table",hidden:!this.isAdminPage,required:this.isAdminPage,isLoading:this.projectStore.list.isLoading,data:this.projects,onChange:this.onProjectChange},N.projectTableOptions),{name:"provider_network_type",label:t("Provider Network Type"),type:"select",hidden:!this.isAdminPage,required:this.isAdminPage,options:[{label:"vxlan",value:"vxlan"},{label:"flat",value:"flat"},{label:"vlan",value:"vlan"},{label:"gre",value:"gre"}],onChange:e=>{this.setState({provider_network_type:e})}},{name:"provider_physical_network",label:t("Provider Physical Network"),type:"input",hidden:!l,required:o},{name:"provider_segmentation_id",label:t("Segmentation ID"),type:"input-int",hidden:!s,required:d,min:1,max:this.SegMax,extra:this.SegIDTips},{name:"subnet_name",label:t("Subnet Name"),hidden:!a,type:"input",required:a,validator:X},{name:"ip_version",label:t("IP Version"),type:"select",options:[{label:"ipv4",value:"ipv4"},{label:"ipv6",value:"ipv6"}],onChange:e=>{this.setState({ip_version:e})},required:!0,hidden:!a},{name:"ipv6_ra_mode",label:t("Router Advertisements Mode"),type:"select",options:[{label:"dhcpv6-stateful",value:"dhcpv6-stateful"},{label:"dhcpv6-stateless",value:"dhcpv6-stateless"},{label:"slaac",value:"slaac"}],tip:k.subnetIpv6Tip,hidden:"ipv6"!==i,dependencies:["ipv6_address_mode"],validator:(e,a)=>{var r=this.formRef.current&&this.formRef.current.getFieldValue("ipv6_address_mode")||void 0;return!a&&r?g.default.resolve():r&&r!==a?g.default.reject(new Error(t("Invalid combination"))):g.default.resolve()}},{name:"ipv6_address_mode",label:t("IP Distribution Mode"),type:"select",options:[{label:"dhcpv6-stateful",value:"dhcpv6-stateful"},{label:"dhcpv6-stateless",value:"dhcpv6-stateless"},{label:"slaac",value:"slaac"}],tip:k.subnetIpv6Tip,hidden:"ipv6"!==i},{name:"cidr",label:t("CIDR"),type:"input",placeholder:u?"192.168.0.0/24":"1001:1001::/64",required:a,validator:(e,r)=>a||r?(0,A.default)(r)||this.checkCidr(r)?g.default.resolve():g.default.reject(new Error(t("Invalid: ")+t("CIDR"))):g.default.resolve(),hidden:!a,tip:u?t("It is recommended that you use the private network address 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16"):t("e.g. 2001:Db8::/48")},{name:"disable_gateway",label:t("Disable Gateway"),type:"check",onChange:e=>{this.setState({disable_gateway:e})},hidden:!(a&&e)},{name:"gateway_ip",label:t("Gateway IP"),type:"ipv6"===i?"input":"ip-input",onChange:e=>{this.setState({gateway_ip:e.target.value})},tip:t("If no gateway is specified, the first IP address will be defaulted."),hidden:!(a&&e&&!n),validator:"ipv6"===i?(e,a)=>this.checkGateway(a)?g.default.resolve():g.default.reject(new Error(t("Invalid: Please input a valid ipv6."))):null},{name:"enable_dhcp",label:t("DHCP"),type:"radio",optionType:"default",options:[{label:t("Enabled"),value:!0},{label:t("Disabled"),value:!1}],hidden:!(a&&e)},{name:"allocation_pools",label:t("Allocation Pools"),type:"textarea",extra:t("IP address allocation polls, one enter per line(e.g. {ip})",{ip:u?"192.168.1.2,192.168.1.200":"1001:1001::,1001:1002::"}),hidden:!(a&&e),validator:this.validateAllocationPools,dependencies:["gateway_ip"]},{name:"dns",label:t("DNS"),type:"textarea",extra:t("One entry per line(e.g. {ip})",{ip:u?"114.114.114.114":"1001:1001::/64"}),hidden:!(a&&e),validator:u?V:H},{name:"host_routes",label:t("Host Routes"),type:"textarea",extra:t("Additional routes announced to the instance, one entry per line(e.g. {ip})",{ip:u?"192.168.200.0/24,10.56.1.254":"1001:1001::/64,1001:1001"}),hidden:!(a&&e),validator:u?U:G},{name:"more",label:t("Advanced Options"),type:"more",hidden:!a}]}}a.CreateNetwork=$,(0,b.default)($,"id","create-network"),(0,b.default)($,"title",t("Create Network")),(0,b.default)($,"policy",["create_network","create_subnet"]),(0,b.default)($,"allowed",(()=>g.default.resolve(!0)));a.default=(0,I.inject)("rootStore")((0,I.observer)($))},1994:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=t.NeutronStore=void 0;var n,l,o,s=i(a(29)),d=i(a(61)),u=i(a(89)),c=(i(a(42)),i(a(67))),f=(i(a(90)),a(41)),p=i(a(60)),m=i(a(66)),h=t.NeutronStore=(n=class extends m.default{constructor(){super(...arguments),(0,u.default)(this,"availableZones",l,this),(0,u.default)(this,"zoneLoading",o,this)}get zoneClient(){return p.default.neutron.azones}fetchAvailableZones(){var e=this;return(0,d.default)((function*(){e.zoneLoading=!0;var t=yield e.zoneClient.list(),{availability_zones:a=[]}=t;e.availableZones=a,e.zoneLoading=!1}))()}},l=(0,c.default)(n.prototype,"availableZones",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=(0,c.default)(n.prototype,"zoneLoading",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,c.default)(n.prototype,"fetchAvailableZones",[f.action],(0,s.default)(n.prototype,"fetchAvailableZones"),n.prototype),n),g=new h;t.default=g},1995:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.CreateSubnet=void 0;var p=f(r(1636)),m=f(r(88)),h=f(r(61)),g=f(r(72)),v=f(r(42)),_=f(r(261)),b=r(485),y=r(1625),A=r(707),I=f(r(290)),S=f(r(486)),x=f(r(156)),C=r(717),w=r(1647),P=r(41),E=f(r(763)),D=["allocation_pools","host_routes","project_id"];function k(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=k(Object(i),!0)).call(a,(function(t){(0,v.default)(e,t,i[t])})):d?u(e,d(i)):s(r=k(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}var{validateAllocationPoolsWithGatewayIp:R,checkDNS:M,checkIpv6DNS:T,checkHostRoutes:B,checkIpv6HostRoutes:j,getAllocationPools:F,getHostRouters:Q}=E.default,{isIpCidr:L,isIPv6Cidr:O,isIpv6:q}=A.ipValidate;class V extends y.ModalAction{constructor(){super(...arguments),(0,v.default)(this,"checkCidr",(e=>{var{ip_version:t="ipv4"}=this.state;return!("ipv4"===t&&!L(e))&&!("ipv6"===t&&!O(e))})),(0,v.default)(this,"checkGateway",(e=>!!(0,_.default)(e)||!!q(e))),(0,v.default)(this,"onSubmit",(e=>{var{allocation_pools:t,host_routes:a,project_id:r}=e,i=(0,g.default)(e,D),n=F(t),l=Q(a);return I.default.createSubnet(N(N({},i),{},{project_id:r?r.selectedRowKeys[0]:this.currentProjectId,network_id:this.network.id,allocation_pools:n,host_routes:l}))})),(0,v.default)(this,"validateAllocationPools",((e,t)=>R.call(this,e,t))),(0,v.default)(this,"onProjectChange",(e=>{var{selectedRowKeys:t}=e;this.setState({projectId:t[0]},(()=>{this.getQuota()}))}))}get name(){return t("Create Subnet")}static get modalSize(){return x.default.hasAdminRole?"large":"small"}getModalSize(){return this.isSystemAdmin?"large":"small"}get network(){return this.props.containerProps.detail||this.item||{}}get instanceName(){return this.item.name||(0,p.default)(this).subnet_name}get defaultValue(){var e={enable_dhcp:!0,ip_version:"ipv4",disable_gateway:!1,more:!1,ipv6_ra_mode:"slaac",ipv6_address_mode:"slaac"};return this.isSystemAdmin&&(e.project_id={selectedRowKeys:[this.currentProjectId]}),e}init(){this.state.projectId=this.currentProjectId,this.state.quota={},this.state.quotaLoading=!0,this.projectStore=S.default,this.isSystemAdmin&&this.getProjects(),this.getQuota()}getProjects(){var e=this;return(0,h.default)((function*(){yield e.projectStore.fetchProjectsWithDomain(),e.updateDefaultValue()}))()}get projects(){return(0,P.toJS)(this.projectStore.list.data)||[]}static get disableSubmit(){var{neutronQuota:{subnet:{left:e=0}={}}}=S.default;return 0===e}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,h.default)((function*(){var{projectId:t}=e.state;e.setState({quotaLoading:!0});var a=yield e.projectStore.fetchProjectNeutronQuota(t),{subnet:r={}}=a||{};e.setState({quota:r,quotaLoading:!1})}))()}get quotaInfo(){var{quota:e={},quotaLoading:a}=this.state;if(a)return[];var{left:r=0}=e,i=0===r?0:1;return[N(N({},e),{},{add:i,name:"subnet",title:t("Subnet")})]}get isSystemAdmin(){return this.props.rootStore.hasAdminRole}get networkProjectId(){var{project_id:e}=this.item;if(e)return e;var{detail:t={}}=this.containerProps;return t.project_id}get formItems(){var{more:e,ip_version:a="ipv4",disable_gateway:r=!1,projectId:i}=this.state,n="ipv4"===a;return[{name:"subnet_name",label:t("Subnet Name"),type:"input-name",required:!0,withoutChinese:!0},N({name:"project_id",label:t("Project"),type:"select-table",required:!0,hidden:!this.isSystemAdmin,extra:i!==this.networkProjectId&&t("The selected project is different from the project to which the network belongs. That is, the subnet to be created is not under the same project as the network. Please do not continue unless you are quite sure what you are doing."),isLoading:this.projectStore.list.isLoading,data:this.projects,onChange:this.onProjectChange},w.projectTableOptions),{name:"ip_version",label:t("IP Version"),type:"select",options:[{label:"ipv4",value:"ipv4"},{label:"ipv6",value:"ipv6"}],onChange:e=>{this.setState({ip_version:e})},required:!0},{name:"ipv6_ra_mode",label:t("Router Advertisements Mode"),type:"select",options:[{label:"dhcpv6-stateful",value:"dhcpv6-stateful"},{label:"dhcpv6-stateless",value:"dhcpv6-stateless"},{label:"slaac",value:"slaac"}],tip:C.subnetIpv6Tip,hidden:"ipv6"!==a,dependencies:["ipv6_address_mode"],validator:(e,a)=>{var r=this.formRef.current&&this.formRef.current.getFieldValue("ipv6_address_mode")||void 0;return!a&&r?m.default.resolve():r&&r!==a?m.default.reject(new Error(t("Invalid combination"))):m.default.resolve()}},{name:"ipv6_address_mode",label:t("IP Distribution Mode"),type:"select",options:[{label:"dhcpv6-stateful",value:"dhcpv6-stateful"},{label:"dhcpv6-stateless",value:"dhcpv6-stateless"},{label:"slaac",value:"slaac"}],tip:C.subnetIpv6Tip,hidden:"ipv6"!==a},{name:"cidr",label:t("CIDR"),type:"input",placeholder:n?"192.168.0.0/24":"1001:1001::/64",required:!0,validator:(e,a)=>(0,_.default)(a)||this.checkCidr(a)?m.default.resolve():m.default.reject(new Error(t("Invalid: ")+t("CIDR"))),tip:n?t("It is recommended that you use the private network address 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16"):t("e.g. 2001:Db8::/48")},{name:"disable_gateway",label:t("Disable Gateway"),type:"check",onChange:e=>{this.setState({disable_gateway:e})},hidden:!e},{name:"gateway_ip",label:t("Gateway IP"),type:"ipv6"===a?"input":"ip-input",onChange:e=>{this.setState({gateway_ip:e.target.value})},tip:t("If no gateway is specified, the first IP address will be defaulted."),hidden:!(e&&!r),validator:"ipv6"===a?(e,a)=>this.checkGateway(a)?m.default.resolve():m.default.reject(new Error(t("Invalid: Please input a valid ipv6."))):null},{name:"enable_dhcp",label:t("DHCP"),type:"radio",optionType:"default",options:[{label:t("Enabled"),value:!0},{label:t("Disabled"),value:!1}],hidden:!e},{name:"allocation_pools",label:t("Allocation Pools"),type:"textarea",extra:t("IP address allocation polls, one enter per line(e.g. {ip})",{ip:n?"192.168.1.2,192.168.1.200":"1001:1001::,1001:1002::"}),hidden:!e,validator:this.validateAllocationPools},{name:"dns",label:t("DNS"),type:"textarea",extra:t("One entry per line(e.g. {ip})",{ip:n?"114.114.114.114":"1001:1001::"}),hidden:!e,validator:n?M:T},{name:"host_routes",label:t("Host Routes"),type:"textarea",extra:t("Additional routes announced to the instance, one entry per line(e.g. {ip})",{ip:n?"192.168.200.0/24,10.56.1.254":"1001:1001::/64,1001:1001"}),hidden:!e,validator:n?B:j},{name:"more",label:t("Advanced Options"),type:"more"}]}}a.CreateSubnet=V,(0,v.default)(V,"id","create-subnet"),(0,v.default)(V,"title",t("Create Subnet")),(0,v.default)(V,"policy","create_subnet"),(0,v.default)(V,"allowed",((e,t)=>{var{project_id:a}=e||{},{detail:{project_id:r}={}}=t||{},i=a||r,n=x.default,{hasAdminRole:l=!1,user:{project:{id:o}={}}={}}=n;return l||i===o?m.default.resolve(!0):m.default.resolve(!1)}));a.default=(0,b.inject)("rootStore")((0,b.observer)(V))},1996:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(1995)),l=i(a(4295)),o={rowActions:{firstAction:i(a(4296)).default,moreActions:[{action:l.default}]},batchActions:[l.default],primaryActions:[n.default]};t.default=o},1997:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(1998)),l=i(a(4301)),o=i(a(4302)),s=i(a(4303)),d=i(a(4304)),u=i(a(4305)),c=i(a(4306)),f=i(a(4307)),p=i(a(4308)),m={rowActions:{firstAction:o.default,moreActions:[{action:u.default},{action:c.default},{action:l.default},{action:s.default},{action:d.default},{action:f.default},{action:p.default}]},primaryActions:[n.default],batchActions:[l.default]},h={rowActions:{firstAction:l.default},batchActions:[l.default]};t.default={actionConfigs:m,adminConfigs:h}},1998:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(71)),m=f(r(39)),h=f(r(88)),g=f(r(61)),v=f(r(72)),_=f(r(42)),b=f(r(712)),y=r(485),A=r(720),I=r(290),S=f(r(1994)),x=f(r(486)),C=r(1625),w=r(717),P=r(1771),E=["openExternalNetwork","externalNetwork","hints"];function D(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=D(Object(i),!0)).call(a,(function(t){(0,_.default)(e,t,i[t])})):d?u(e,d(i)):s(r=D(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class N extends C.ModalAction{constructor(){super(...arguments),(0,_.default)(this,"onValuesChange",(e=>{(0,b.default)(e,"openExternalNetwork")&&this.setState({openExternalNetwork:e.openExternalNetwork})})),(0,_.default)(this,"onSubmit",(e=>{var{openExternalNetwork:t,externalNetwork:a,hints:r={}}=e,i=(0,v.default)(e,E),n=t?{external_gateway_info:{network_id:a.selectedRows[0].id}}:null,l=r.selectedRowKeys||[];return this.store.create(k(k(k({},i),n),{},{availability_zone_hints:l}))}))}init(){this.state.quota={},this.state.quotaLoading=!0,this.store=new A.RouterStore,this.networkStore=new I.NetworkStore,this.projectStore=x.default,this.fetchAzones(),this.getQuota()}get name(){return t("create router")}static get modalSize(){return"large"}getModalSize(){return"large"}fetchAzones(){S.default.fetchAvailableZones()}get aZones(){var e,t;return(0,p.default)(e=(0,m.default)(t=S.default.availableZones||[]).call(t,(e=>"available"===e.state&&"router"===e.resource))).call(e,(e=>k(k({},e),{},{id:e.name})))}static get disableSubmit(){var{neutronQuota:{router:{left:e=0}={}}={}}=x.default;return 0===e}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,g.default)((function*(){var t=yield e.projectStore.fetchProjectNeutronQuota(),{router:a={}}=t||{};e.setState({quota:a,quotaLoading:!1})}))()}get quotaInfo(){var{quota:e={},quotaLoading:a}=this.state;if(a)return[];var{left:r=0}=e,i=0===r?0:1;return[k(k({},e),{},{add:i,name:"router",title:t("Router")})]}get defaultValue(){return{openExternalNetwork:!1}}get formItems(){var{openExternalNetwork:e}=this.state;return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"hints",label:t("Availability Zone Hints"),type:"select-table",data:this.aZones,isLoading:S.default.zoneLoading,isMulti:!0,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("State"),dataIndex:"state",valueMap:P.availabilityZoneState},{title:t("Resource Type"),dataIndex:"resource",valueMap:P.availabilityZoneResource}]},{name:"openExternalNetwork",label:t("Options"),type:"check",content:t("Open External Gateway")},{name:"externalNetwork",label:t("External Gateway"),type:"select-table",backendPageStore:this.networkStore,extraParams:{"router:external":!0},required:e,hidden:!e,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Status"),dataIndex:"status",valueMap:w.networkStatus},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]}]}}a.Create=N,(0,_.default)(N,"id","create"),(0,_.default)(N,"title",t("Create Router")),(0,_.default)(N,"policy","create_router"),(0,_.default)(N,"allowed",(()=>h.default.resolve(!0)));a.default=(0,y.inject)("rootStore")((0,y.observer)(N))},1999:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(39)),o=n(r(124)),s=n(r(71)),d=n(r(93));r(733);var u=n(r(734));r(1761);var c=n(r(1762));r(288);var f=n(r(287));r(1684);var p=n(r(1673)),m=n(r(42)),h=n(r(0)),g=r(202),v=r(723),_=r(1651),b=(r(200),r(262)),y=n(r(4322)),A=n(r(1846));class I extends h.default.Component{constructor(e){super(e),(0,m.default)(this,"detailButtons",(()=>[{name:t("Clear Gateway"),click:null},{name:t("Associate IP"),click:null},{name:t("Associate Network"),click:null},{name:t("delete"),type:"danger",click:null}])),this.state={}}get statusMap(){return{SHUTOFF:{status:"default",text:t("Shutoff")},ACTIVE:{color:"green",text:t("Active")}}}get detailInfos(){var{data:{subnets:e}}=this.props,a=(0,l.default)(e).call(e,(e=>{var t;return-1===(0,o.default)(t=e.name).call(t,"HA subnet tenant")}));return[{title:t("Name"),dataIndex:"name",render:(e,t)=>e?h.default.createElement(b.Link,{to:"/network/router/detail/".concat(t.id)},e):"-"},{title:t("UUID"),dataIndex:"id"},{title:t("Status"),dataIndex:"status",render:e=>_.routerStatus[e]||e},{title:t("External Fixed IP"),dataIndex:"external_gateway_info",isHideable:!0,render:e=>{var t;return(0,s.default)(t=(e||{}).external_fixed_ips||[]).call(t,(e=>h.default.createElement("span",{key:e.ip_address},e.ip_address,h.default.createElement("br",null))))||"-"}},{title:t("Subnet"),dataIndex:"subnets",render:e=>{if(!a[0])return"-";var t=(0,l.default)(a).call(a,(t=>-1!==(0,o.default)(e).call(e,t.id)));return(0,s.default)(t).call(t,(e=>h.default.createElement("span",{key:e.id},e.name," (",e.cidr,")",h.default.createElement("br",null))))}}]}renderCardInfos(e){var t,a=(0,s.default)(t=this.detailInfos).call(t,(t=>{var a,{title:r,dataIndex:i,render:n}=t;return!this.isLoading&&e&&e.id?(a=n?n(e[i],e):e[i],"create_time"!==i&&"update_time"!==i&&"created_at"!==i||n||(a=(0,v.getLocalTimeStr)(a)),void 0===a&&(a="-")):a="-",{label:r,content:a}}));return h.default.createElement(p.default,{column:1,className:A.default["descriptions-item"]},(0,s.default)(a).call(a,(e=>h.default.createElement(p.default.Item,{label:e.label,key:"label-".concat((0,g.generateId)())},e.content))))}renderButton(){var e=this.detailButtons();return h.default.createElement("div",{className:A.default["card-button"]},(0,s.default)(e).call(e,(e=>h.default.createElement(f.default,{type:e.type?e.type:"primary"},e.name))))}renderCard(e,t){return h.default.createElement("div",{style:{width:e}},this.renderCardInfos(t))}renderTitle(e,t){var a;return h.default.createElement("div",{className:A.default["node-card-title"]},(0,d.default)(a="".concat(e,": ")).call(a,t))}render(){var{x:e,y:a}=this.props,{data:{routers:r},infoIndex:i}=this.props,n=r[i];return h.default.createElement("div",{className:A.default["node-tooltips"],style:{top:"".concat(a,"px"),left:"".concat(e,"px")}},h.default.createElement(u.default,{placement:"rightTop",content:this.renderCard(430,n),title:this.renderTitle(t("Router"),n.name)},h.default.createElement("div",{style:{textAlign:"center",width:"50px",height:"50px",overflow:"hidden"}},h.default.createElement(c.default,{src:y.default,shape:"square",size:30}),h.default.createElement("div",{style:{transform:"scale(0.9,1)"}},n.name))))}}a.default=I},2e3:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.QoSPolicy=void 0;var p=f(r(42)),m=r(485),h=f(r(1626)),g=r(719),v=r(1737),_=r(81),b=r(412),y=f(r(2001));function A(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=A(Object(i),!0)).call(a,(function(t){(0,p.default)(e,t,i[t])})):d?u(e,d(i)):s(r=A(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class S extends h.default{constructor(){super(...arguments),(0,p.default)(this,"updateFetchParamsByPage",(e=>{switch(this.tabKey){case"projectQoSPolicy":return I(I({},e),{},{project_id:this.currentProjectId});case"sharedQoSPolicy":return I(I({},e),{},{shared:!0});default:return e}}))}init(){this.store=new g.QoSPolicyStore,this.downloadStore=new g.QoSPolicyStore}get isProjectTab(){var e=this.tabKey;return!this.isAdminPage&&(!e||"projectQoSPolicy"===e)}get checkEndpoint(){return!0}get endpoint(){return(0,_.qosEndpoint)()}get policy(){return"get_policy"}get aliasPolicy(){return"neutron:get_policy"}get name(){return t("QoS policies")}get actionConfigs(){return this.isAdminPage?y.default.actionConfigs:this.isProjectTab?y.default.consoleActions:b.emptyActionConfig}get hasTab(){return!this.isAdminPage}get isFilterByBackend(){return!0}get isSortByBackend(){return!0}get defaultSortKey(){return"name"}get tabKey(){var{tab:e}=this.props;return e}getColumnParamsFromTabKey(){switch(this.tabKey){case"projectQoSPolicy":return{self:this,all:!1,shared:!1};case"sharedQoSPolicy":return{self:this,all:!1,shared:!0};default:return{self:this,all:!0,shared:!1}}}getColumns(){return(0,v.getQosPolicyColumns)(this.getColumnParamsFromTabKey())}get searchFilters(){return(0,v.getQosPolicyFilters)(this.getColumnParamsFromTabKey())}}a.QoSPolicy=S;a.default=(0,m.inject)("rootStore")((0,m.observer)(S))},2001:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(4348)),l=i(a(4349)),o=i(a(4350)),s=i(a(4351)),d=i(a(4352)),u=i(a(4353)),c=i(a(4354)),f=i(a(4355)),p=i(a(4356)),m=i(a(4357)),h=i(a(4358)),g={rowActions:{firstAction:l.default,moreActions:[{action:s.default},{action:p.default},{action:m.default},{action:c.default},{action:f.default},{action:d.default},{action:h.default},{action:u.default},{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]},v={rowActions:{firstAction:l.default,moreActions:[{action:s.default},{action:p.default},{action:m.default},{action:c.default},{action:f.default},{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]};t.default={actionConfigs:g,consoleActions:v}},2002:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n,l=(0,i(a(71)).default)(n="0,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,46,48,56".split(",")).call(n,(e=>({label:e,value:e})));t.default=l},2003:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.adminActions=t.actionConfigs=void 0;var n=i(a(4362)),l=i(a(4363)),o=i(a(4364)),s=i(a(2004)),d=i(a(4370));t.actionConfigs={rowActions:{firstAction:n.default,moreActions:[{action:o.default},{action:d.default},{action:l.default}]},batchActions:[l.default],primaryActions:[s.default]},t.adminActions={rowActions:{moreActions:[{action:l.default}]}}},2004:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.StepCreate=void 0;var l=n(r(71)),o=n(r(33)),s=n(r(43)),d=n(r(124)),u=n(r(39)),c=n(r(88)),f=n(r(72)),p=n(r(42)),m=r(485),h=r(1625),g=n(r(724)),v=r(1637),_=n(r(4365)),b=n(r(4366)),y=n(r(4367)),A=n(r(4368)),I=n(r(4369)),S=["name","description","vip_address","vip_network_id","admin_state_enabled","enableHealthMonitor","listener_protocol","listener_ssl_parsing_method","listener_sni_enabled","listener_default_tls_container_ref","listener_client_ca_tls_container_ref","listener_sni_container_refs","listener_admin_state_up","pool_admin_state_up","monitor_admin_state_up","insert_headers"];class x extends h.StepAction{constructor(){super(...arguments),(0,p.default)(this,"onSubmit",(e=>{var t,{name:a,description:r,vip_address:i,vip_network_id:n,admin_state_enabled:c,enableHealthMonitor:p,listener_protocol:m,listener_ssl_parsing_method:h,listener_sni_enabled:g,listener_default_tls_container_ref:_,listener_client_ca_tls_container_ref:b,listener_sni_container_refs:y,listener_admin_state_up:A,pool_admin_state_up:I,monitor_admin_state_up:x,insert_headers:C}=e,w=(0,f.default)(e,S),P={name:a,description:r,vip_network_id:n.selectedRowKeys[0]},{ip_address:E,subnet:D}=i[0];P.vip_subnet_id=D,E&&E.ip&&(P.vip_address=E.ip),P.admin_state_up=c;var k,N={admin_state_up:A,protocol:m},R=(0,v.getInsertHeadersValueFromForm)(C);(R&&(N.insert_headers=R),"TERMINATED_HTTPS"===m)&&(_&&(N.default_tls_container_ref=_.selectedRows[0].container_ref),"two-way"===h&&b&&(N.client_ca_tls_container_ref=b.selectedRows[0].secret_ref,N.client_authentication="MANDATORY"),g&&y&&(N.sni_container_refs=(0,l.default)(k=y.selectedRows).call(k,(e=>e.container_ref))));var M={admin_state_up:I},T={admin_state_up:x};(0,o.default)(t=(0,s.default)(w)).call(t,(t=>{0===(0,d.default)(t).call(t,"listener")?N[t.replace("listener_","")]=e[t]:0===(0,d.default)(t).call(t,"pool")?M[t.replace("pool_","")]=e[t]:0===(0,d.default)(t).call(t,"health")&&(T[t.replace("health_","")]=e[t])})),p&&(M.healthmonitor=T);var{extMembers:B=[],Member:{selectedRowKeys:j=[],selectedRows:F,memberUpdateValue:Q=[]}={}}=w,L=[];return(0,o.default)(j).call(j,(e=>{var t=(0,u.default)(F).call(F,(t=>t.id===e))[0],a=(0,u.default)(Q).call(Q,(t=>t.id===e))[0],{weight:r=0,protocol_port:i=1}=a||{},{member_ip:n,fixed_ips:l=[]}=t;(0,o.default)(n).call(n,(e=>{var{subnet_id:t}=(0,u.default)(l).call(l,(t=>t.ip_address===e))[0],a={weight:r,protocol_port:i,address:e,subnet_id:t};L.push(a)}))})),(0,o.default)(B).call(B,(e=>{var{ip:t,protocol_port:a,weight:r,name:i=null,subnet_id:n}=e.ip_address,l={weight:r,protocol_port:a,address:t,name:i,subnet_id:n};L.push(l)})),M.members=L,N.default_pool=M,P.listeners=[N],this.store.create(P)}))}init(){this.store=g.default}static allowed(e,t){var{isAdminPage:a=!1}=t;return c.default.resolve(!a)}get name(){return t("Create Loadbalancer")}get listUrl(){return this.getRoutePath("lb")}get hasConfirmStep(){return!1}get steps(){return[{title:t("Base Config"),component:_.default},{title:t("Listener Detail"),component:b.default},{title:t("Pool Detail"),component:y.default},{title:t("Member Detail"),component:A.default},{title:t("Health Monitor Detail"),component:I.default}]}}a.StepCreate=x,(0,p.default)(x,"id","lb-create"),(0,p.default)(x,"title",t("Create Loadbalancer")),(0,p.default)(x,"path","/network/load-balancers/create"),(0,p.default)(x,"policy","os_load-balancer_api:loadbalancer:post");a.default=(0,m.inject)("rootStore")((0,m.observer)(x))},2005:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.adminActions=t.actionConfigs=void 0;var n=i(a(4373)),l=i(a(4374)),o=i(a(4375)),s=i(a(4376)),d=i(a(4377)),u=i(a(2006)),c=i(a(4379));t.actionConfigs={rowActions:{firstAction:o.default,moreActions:[{action:l.default},{action:n.default},{action:s.default},{action:c.default},{action:d.default}]},batchActions:[],primaryActions:[u.default]},t.adminActions={rowActions:{moreActions:[{action:c.default},{action:l.default}]}}},2006:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(71)),m=f(r(39)),h=f(r(88)),g=f(r(61)),v=f(r(72)),_=f(r(42)),b=r(485),y=r(1625),A=r(1689),I=r(1715),S=r(1716),x=r(1637),C=["sni_enabled","ssl_parsing_method","default_tls_container_ref","client_ca_tls_container_ref","sni_container_refs","insert_headers"];function w(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=w(Object(i),!0)).call(a,(function(t){(0,_.default)(e,t,i[t])})):d?u(e,d(i)):s(r=w(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class E extends y.ModalAction{constructor(){super(...arguments),(0,_.default)(this,"policy",(()=>"os_load-balancer_api:listener:post")),(0,_.default)(this,"onSubmit",(e=>{var t,{sni_enabled:a,ssl_parsing_method:r,default_tls_container_ref:i,client_ca_tls_container_ref:n,sni_container_refs:l,insert_headers:o}=e,s=P(P({},(0,v.default)(e,C)),{},{loadbalancer_id:this.containerProps.detail.id}),d=(0,x.getInsertHeadersValueFromForm)(o);(d&&(s.insert_headers=d),i&&(s.default_tls_container_ref=i.selectedRows[0].container_ref),n&&(s.client_ca_tls_container_ref=n.selectedRows[0].secret_ref,s.client_authentication="MANDATORY"),l)&&(s.sni_container_refs=(0,p.default)(t=l.selectedRows).call(t,(e=>e.container_ref)));return this.store.create(s)}))}get name(){return t("Create Listener")}static get modalSize(){return"large"}getModalSize(){return"large"}init(){this.store=new A.ListenerStore,this.containersStore=new I.ContainersStore,this.secretsStore=new S.SecretsStore,this.fetchContainers(),this.fetchSecrets()}fetchContainers(){var e=this;return(0,g.default)((function*(){yield e.containersStore.fetchList(),e.updateDefaultValue()}))()}fetchSecrets(){var e=this;return(0,g.default)((function*(){yield e.secretsStore.fetchList({mode:"CA"}),e.updateDefaultValue()}))()}get ServerCertificate(){return this.containersStore.list.data||[]}get CaCertificate(){return this.secretsStore.list.data||[]}get SNICertificate(){var e;return(0,m.default)(e=this.containersStore.list.data||[]).call(e,(e=>!!e.domain))}get isEdit(){return!1}get nameForStateUpdate(){return["protocol","ssl_parsing_method","sni_enabled"]}get defaultValue(){return{ssl_parsing_method:"one-way",sni_enabled:!1,connection_limit:-1,admin_state_up:!0}}get formItems(){var e,{protocol:a,ssl_parsing_method:r,sni_enabled:i}=this.state,n=(0,x.getListenerInsertHeadersFormItem)();return[{name:"name",label:t("Name"),type:"input-name",required:!0},{name:"description",label:t("Description"),type:"textarea"},{name:"protocol",label:t("Protocol"),type:"select",options:x.listenerProtocols,required:!0,disabled:this.isEdit},{name:"ssl_parsing_method",label:t("SSL Parsing Method"),type:"select",options:x.sslParseMethod,required:!0,display:"TERMINATED_HTTPS"===a},{name:"default_tls_container_ref",label:t("Server Certificate"),type:"select-table",required:!0,data:this.ServerCertificate,isLoading:this.containersStore.list.isLoading,isMulti:!1,filterParams:[{label:t("Name"),name:"name"}],columns:(0,x.getCertificateColumns)(this),display:"TERMINATED_HTTPS"===a},{name:"client_ca_tls_container_ref",label:t("CA Certificate"),type:"select-table",required:!0,data:this.CaCertificate,isLoading:this.secretsStore.list.isLoading,isMulti:!1,filterParams:[{label:t("Name"),name:"name"}],columns:(0,m.default)(e=(0,x.getCertificateColumns)(this)).call(e,(e=>"domain"!==e.dataIndex)),display:"TERMINATED_HTTPS"===a&&"two-way"===r},{name:"sni_enabled",label:t("SNI Enabled"),type:"switch",display:"TERMINATED_HTTPS"===a},{name:"sni_container_refs",label:t("SNI Certificate"),type:"select-table",required:!0,data:this.SNICertificate,isLoading:this.containersStore.list.isLoading,isMulti:!0,filterParams:[{label:t("Name"),name:"name"}],columns:(0,x.getCertificateColumns)(this),display:"TERMINATED_HTTPS"===a&&i},{name:"protocol_port",label:t("Port"),type:"input-number",required:!0,disabled:this.isEdit},{name:"connection_limit",label:t("Connection Limit"),type:"input-number",min:-1,extra:t("-1 means no connection limit"),required:!0},{name:"admin_state_up",label:t("Admin State Up"),type:"switch",tip:t("Defines the admin state of the listener.")},n]}}a.Create=E,(0,_.default)(E,"id","create_listener"),(0,_.default)(E,"title",t("Create Listener")),(0,_.default)(E,"policy","os_load-balancer_api:listener:post"),(0,_.default)(E,"allowed",(e=>h.default.resolve("ACTIVE"===e.provisioning_status)));a.default=(0,b.inject)("rootStore")((0,b.observer)(E))},2007:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.adminConfigs=t.actionConfigs=void 0;var n=i(a(4410)),l=i(a(4412)),o=i(a(4413));t.actionConfigs={rowActions:{firstAction:l.default,moreActions:[{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]},t.adminConfigs={rowActions:{moreActions:[{action:o.default}]},batchActions:[o.default]}},2008:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(4417)),l=i(a(4418)),o=i(a(4419)),s=i(a(2009)),d={rowActions:{firstAction:l.default,moreActions:[{action:s.default},{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]},u={rowActions:{firstAction:o.default,moreActions:[]},batchActions:[o.default],primaryActions:[]};t.default={actionConfigs:d,actionConfigsAdmin:u}},2009:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(203)),m=f(r(294)),h=f(r(71)),g=f(r(33)),v=f(r(43)),_=f(r(750)),b=f(r(93)),y=f(r(88)),A=f(r(61)),I=f(r(72)),S=f(r(42)),x=f(r(712)),C=r(485),w=r(1625),P=f(r(764)),E=f(r(493)),D=f(r(486)),k=r(422),N=r(707),R=["sourcePort","protocol","ipProtocol","icmpType","icmpCode","portOrRange","remoteType"],M=["protocol"];function T(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=T(Object(i),!0)).call(a,(function(t){(0,S.default)(e,t,i[t])})):d?u(e,d(i)):s(r=T(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class j extends w.ModalAction{constructor(e){super(e),(0,S.default)(this,"onValuesChange",(e=>{(0,x.default)(e,"portOrRange")&&this.setState({sourcePort:""},(()=>{this.updateDefaultValue()})),(0,x.default)(e,"remoteType")&&this.setState({remote_ip_prefix:"",remote_group_id:""},(()=>{this.updateDefaultValue()})),this.setState(B({},e))})),(0,S.default)(this,"handleDirectionChange",(e=>{this.setState({direction:e})})),(0,S.default)(this,"onSubmit",((e,t)=>{var a,{match:{params:{id:r}={}}={}}=t,{sourcePort:i,protocol:n,ipProtocol:l,icmpType:o,icmpCode:s,portOrRange:d,remoteType:u}=e,c=(0,I.default)(e,R),f=(0,p.default)(a=["custom_udp","custom_tcp"]).call(a,n)&&"range"===d,h=i.split(":"),g="custom_protocol"!==n?this.defaultRules[n].ip_protocol:l,v=B({security_group_id:r||this.item.id,port_range_min:"custom_icmp"===n?o:f?(0,m.default)(h[0],10):null,port_range_max:"custom_icmp"===n?s:f?(0,m.default)(h[1]||h[0],10):null,protocol:g},c);return(0,p.default)(n).call(n,"all")&&(delete v.remote_ip_prefix,delete v.remote_group_id),this.store.create(v)})),this.state={protocol:this.protocolList[0].value,portOrRange:"range",remoteType:"cidr",direction:"ingress",ipProtocol:"ah"}}get name(){return t("Create rule")}init(){this.state.quota={},this.state.quotaLoading=!0,this.store=P.default,this.groupStore=E.default,this.projectStore=D.default,this.getAllGroups(),this.getQuota()}get messageHasItemName(){return!1}getAllGroups(){var e=this;return(0,A.default)((function*(){var t=yield E.default.fetchList();e.allGroups=(0,h.default)(t).call(t,(e=>({label:e.name,value:e.id})))}))()}static get disableSubmit(){var{neutronQuota:{security_group_rule:{left:e=0}={}}={}}=D.default;return 0===e}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,A.default)((function*(){var t=yield e.projectStore.fetchProjectNeutronQuota(),{security_group_rule:a={}}=t||{};e.setState({quota:a,quotaLoading:!1})}))()}get quotaInfo(){var{quota:e={},quotaLoading:a}=this.state;if(a)return[];var{left:r=0}=e||{},i=0===r?0:1;return[B(B({},e),{},{add:i,name:"security_group_rule",title:t("Security Group Rule")})]}get defaultRules(){return{custom_tcp:{name:t("Custom TCP Rule"),ip_protocol:"tcp"},custom_udp:{name:t("Custom UDP Rule"),ip_protocol:"udp"},custom_icmp:{name:t("Custom ICMP Rule"),ip_protocol:"icmp"},all_proto:{name:t("All Proto"),ip_protocol:null},all_tcp:{name:t("All TCP"),ip_protocol:"tcp",from_port:"1",to_port:"65535"},all_udp:{name:t("All UDP"),ip_protocol:"udp",from_port:"1",to_port:"65535"},all_icmp:{name:t("All ICMP"),ip_protocol:"icmp"},custom_protocol:{name:t("Other Protocol")}}}get protocolList(){var e,t=[];return(0,g.default)(e=(0,v.default)(this.defaultRules)).call(e,(e=>{t.push({value:e,label:this.defaultRules[e].name})})),t}get ruleList(){return(0,_.default)(this.defaultRules,this.settingRules)}get defaultValue(){var e,t=this.state,{protocol:a}=t,r=(0,I.default)(t,M),{from_port:i,to_port:n}=this.ruleList[a],{sourcePort:l=""}=this.state;i&&(l=i!==n?(0,b.default)(e="".concat(i,":")).call(e,n):i);return B(B({},r),{},{protocol:a,sourcePort:l})}get formItems(){var e,a,{protocol:r,portOrRange:i,remoteType:n,direction:l}=this.state,o="custom_protocol"===r,s="custom_icmp"===r,d=(0,p.default)(e=["custom_udp","custom_tcp"]).call(e,r),u=(0,p.default)(a=["custom_udp","custom_tcp","custom_icmp"]).call(a,r),c=d&&"range"===i,f=u&&"cidr"===n,m=u&&"sg"===n;return[{name:"protocol",label:t("Protocol"),type:"select",required:!0,options:this.protocolList},{name:"direction",label:t("Direction"),type:"select",required:!0,options:[{value:"ingress",label:t("Ingress")},{value:"egress",label:t("Egress")}],onChange:this.handleDirectionChange},{name:"ethertype",label:t("Ether Type"),type:"select",required:!0,options:[{value:"IPv4",label:t("IPv4")},{value:"IPv6",label:t("IPv6")}]},{name:"portOrRange",label:t("Port Type"),type:"select",required:d,options:[{value:"all",label:t("All Port")},{value:"range",label:t("Custom")}],hidden:!d},{name:"sourcePort",label:"egress"===l?t("Destination Port/Port Range"):t("Source Port/Port Range"),type:"port-range",required:c,hidden:!c,extra:"egress"===l&&t("Input destination port or port range (example: 80 or 80:160)")},{name:"ipProtocol",label:t("IP Protocol"),type:"select-input",options:k.ipProtocols,required:o,hidden:!o,formRef:this.formRef,help:t("Please input protocol number if it absent in select list.")},{name:"icmpType",label:t("ICMP Type"),type:"input-int",min:0,max:255,required:!1,hidden:!s,help:t("Please input ICMP type(0-255)")},{name:"icmpCode",label:t("ICMP Code"),type:"input-int",min:0,max:255,required:!1,hidden:!s,help:t("Please input ICMP code(0-255)")},{name:"remoteType",label:t("Remote Type"),type:"select",required:u,options:[{value:"cidr",label:t("cidr")},{value:"sg",label:t("Security Group")}],hidden:!u},{name:"remote_ip_prefix",label:t("Remote IP Prefix"),type:"input",hidden:!f,required:f,validator:f?N.cidrAllValidate:null,placeholder:t("Please input IPv4 or IPv6 cidr"),extra:t("Please input IPv4 or IPv6 cidr, (e.g. 192.168.0.0/24, 2001:DB8::/48)")},{name:"remote_group_id",label:t("Remote Security Group"),type:"select",required:m,hidden:!m,options:this.allGroups}]}}a.Create=j,(0,S.default)(j,"id","create"),(0,S.default)(j,"title",t("Create Rule")),(0,S.default)(j,"policy","create_security_group_rule"),(0,S.default)(j,"allowed",(()=>y.default.resolve(!0)));a.default=(0,C.inject)("rootStore")((0,C.observer)(j))},2010:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(4435)),l=i(a(4436)),o={rowActions:{moreActions:[{action:n.default},{action:l.default}]}};t.default=o},2011:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(61)),l=i(a(72)),o=i(a(42)),s=i(a(66)),d=["current","all_projects"];class u extends s.default{constructor(){super(...arguments),(0,o.default)(this,"updateParamsSortPage",((e,t,a)=>{t&&a&&(e.sort_key=t,e.sort_dir="descend"===a?"desc":"asc")}))}get paramsFuncPage(){return e=>{var{current:t,all_projects:a}=e;return(0,l.default)(e,d)}}listFetchByClient(e,t){var{all_projects:a=!1}=t,r={headers:{"x-auth-all-projects":a}};if(!this.isSubResource)return this.client.list(e,r);var i=this.getFatherResourceId(t);return this.client.list(i,e,r)}detailFetchByClient(e,t,a){var{id:r}=e,{all_projects:i=!1}=a,n={headers:{"x-auth-all-projects":i}};if(!this.isSubResource)return this.client.show(r,t,n);var l=this.getFatherResourceId(e);return this.client.show(l,r,t,n)}getCountForPage(e,t,a,r){return(0,n.default)((function*(){var{metadata:e={}}=r,{total_count:t=0}=e||{};return{total:t,count:t}}))()}}t.default=u},2012:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(72)),m=f(r(88)),h=f(r(116)),g=f(r(71)),v=f(r(42)),_=r(1625),b=r(485),y=r(1781),A=f(r(1740)),I=r(707),S=["masters","type","email","ttl"];function x(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=x(Object(i),!0)).call(a,(function(t){(0,v.default)(e,t,i[t])})):d?u(e,d(i)):s(r=x(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class w extends _.ModalAction{constructor(){super(...arguments),(0,v.default)(this,"validateMasters",((e,a)=>{if(!a||!a.length)return m.default.resolve();if((0,h.default)(a).call(a,(e=>!e.value||!(I.ipValidate.isIPv4(e.value)||!I.ipValidate.isIpv6(e.value)))))return m.default.reject(t("Please input a valid ip!"));var r=(0,h.default)(a).call(a,(e=>!!(0,h.default)(a).call(a,(t=>t.value===e.value&&t.index!==e.index))));return r?m.default.reject(t("The ip address {ip} is duplicated, please modify it.",{ip:r.value})):m.default.resolve()})),(0,v.default)(this,"onSubmit",(e=>{var{masters:t=[],type:a,email:r,ttl:i}=e,n=C(C({},(0,p.default)(e,S)),{},{type:a,masters:(0,g.default)(t).call(t,(e=>e.value))});return"PRIMARY"===a&&(n.email=r,n.ttl=i),this.store.create(n)}))}init(){this.store=A.default}static get modalSize(){return"small"}get name(){return t("Create Zone")}static allowed(){return m.default.resolve(!0)}get defaultValue(){return{ttl:3600,type:y.ZONE_TYPE_ENUM.primary}}get nameForStateUpdate(){return["type"]}get formItems(){var{type:e=y.ZONE_TYPE_ENUM.primary}=this.state,a=e===y.ZONE_TYPE_ENUM.primary;return[{name:"name",label:t("Name"),type:"input",required:!0,extra:y.zoneNameMessage,validator:y.validateZoneName},{name:"description",label:t("Description"),type:"textarea"},{name:"type",label:t("Type"),type:"select",options:y.zoneTypeOptions,tip:t("Primary is controlled by Designate, Secondary zones are slaved from another DNS Server.")},{name:"email",label:t("Email Address"),type:"input",required:a,hidden:!a,validator:I.emailValidate,extra:t("Email for the zone. Used in SOA records for the zone.")},{name:"ttl",label:t("TTL"),type:"input-number",min:0,required:a,hidden:!a,extra:t("TTL (Time to Live) for the zone.")},{name:"masters",label:t("Masters"),type:"add-select",isInput:!0,placeholder:t("Please input ip address"),tip:t("Mandatory for secondary zones. The servers to slave from to get DNS information."),minCount:1,hidden:a,required:!a,validator:this.validateMasters}]}}a.Create=w,(0,v.default)(w,"id","create_zone"),(0,v.default)(w,"title",t("Create Zone")),(0,v.default)(w,"policy","create_zone");a.default=(0,b.inject)("rootStore")((0,b.observer)(w))},2013:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(33)),m=f(r(93)),h=f(r(88)),g=f(r(72)),v=f(r(42)),_=r(1625),b=r(485),y=f(r(1741)),A=r(1782),I=["records"];function S(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=S(Object(i),!0)).call(a,(function(t){(0,v.default)(e,t,i[t])})):d?u(e,d(i)):s(r=S(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class C extends _.ModalAction{constructor(){super(...arguments),(0,v.default)(this,"onSubmit",(e=>{var{detail:t}=this.containerProps,{id:a}=t||this.item,{records:r}=e,i=(0,g.default)(e,I),n=[];(0,p.default)(r).call(r,(e=>{n.push(e.value)}));var l=x({records:n},i);return this.store.create({id:a},l)}))}init(){var e,a;this.store=y.default,this.state=x(x({},this.state),{},{nameExtra:(0,m.default)(e="".concat(t("Exp: "))).call(e,A.DNS_RECORD_TYPE.A.nameExtra),recordsExtra:(0,m.default)(a="".concat(t("Exp: "))).call(a,A.DNS_RECORD_TYPE.A.recordsExtra)})}get name(){return t("Create Record Set")}static allowed(){return h.default.resolve(!0)}get defaultValue(){return{ttl:3600,type:"A"}}get formItems(){return(0,A.getRecordSetFormItem)(this,this.currentFormValue)}}a.Create=C,(0,v.default)(C,"id","create-record-set"),(0,v.default)(C,"title",t("Create Record Set")),(0,v.default)(C,"policy","create_recordset");a.default=(0,b.inject)("rootStore")((0,b.observer)(C))},2014:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(4446)),l=i(a(4447)),o=i(a(2013)),s={rowActions:{firstAction:n.default,moreActions:[{action:l.default}]},primaryActions:[o.default],batchActions:[l.default]};t.default=s},4288:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(490)),l=i(a(4289));t.default=e=>(0,n.default)(l.default,e)},4289:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(1645)),l=i(a(722)),o=i(a(4290)),s=i(a(1991)),d=i(a(4293)),u=i(a(4298)),c=i(a(4300)),f=i(a(1841)),p=i(a(4309)),m=i(a(4315)),h=i(a(4323)),g=i(a(4330)),v=i(a(1772)),_=i(a(4332)),b=i(a(4347)),y=i(a(2e3)),A=i(a(4359)),I=i(a(4361)),S=i(a(2004)),x=i(a(4371)),C=i(a(4380)),w=i(a(4388)),P=i(a(4414)),E=i(a(4416)),D=i(a(4420)),k=i(a(4424)),N=i(a(4430)),R=i(a(4432)),M=i(a(4434)),T=i(a(4437)),B=i(a(4439)),j=i(a(4443)),F=i(a(4448)),Q="/network";t.default=[{path:Q,component:n.default,routes:[{path:"".concat(Q,"/networks"),component:o.default,exact:!0},{path:"".concat(Q,"/networks-admin"),component:s.default,exact:!0},{path:"".concat(Q,"/networks/detail/:id"),component:d.default,exact:!0},{path:"".concat(Q,"/networks-admin/detail/:id"),component:d.default,exact:!0},{path:"".concat(Q,"/networks/detail/:networkId/subnet/:id"),component:u.default,exact:!0},{path:"".concat(Q,"/networks-admin/detail/:networkId/subnet/:id"),component:u.default,exact:!0},{path:"".concat(Q,"/networks/detail/:networkId/port/:id"),component:_.default,exact:!0},{path:"".concat(Q,"/networks-admin/detail/:networkId/port/:id"),component:_.default,exact:!0},{path:"".concat(Q,"/networks/detail/:networkId/subnet/:subnetId/port/:id"),component:_.default,exact:!0},{path:"".concat(Q,"/networks-admin/detail/:networkId/subnet/:subnetId/port/:id"),component:_.default,exact:!0},{path:"".concat(Q,"/instance/detail/:instanceId/port/:id"),component:_.default,exact:!0},{path:"".concat(Q,"/instance-admin/detail/:instanceId/port/:id"),component:_.default,exact:!0},{path:"".concat(Q,"/router"),component:c.default,exact:!0},{path:"".concat(Q,"/router-admin"),component:c.default,exact:!0},{path:"".concat(Q,"/router/detail/:id"),component:h.default,exact:!0},{path:"".concat(Q,"/router-admin/detail/:id"),component:h.default,exact:!0},{path:"".concat(Q,"/router/:routerId/port/:id"),component:g.default,exact:!0},{path:"".concat(Q,"/router-admin/:routerId/port/:id"),component:g.default,exact:!0},{path:"".concat(Q,"/floatingip"),component:f.default,exact:!0},{path:"".concat(Q,"/floatingip-admin"),component:f.default,exact:!0},{path:"".concat(Q,"/floatingip/detail/:id"),component:p.default,exact:!0},{path:"".concat(Q,"/floatingip-admin/detail/:id"),component:p.default,exact:!0},{path:"".concat(Q,"/port"),component:v.default,exact:!0},{path:"".concat(Q,"/port-admin"),component:v.default,exact:!0},{path:"".concat(Q,"/port/detail/:id"),component:_.default,exact:!0},{path:"".concat(Q,"/port-admin/detail/:id"),component:_.default,exact:!0},{path:"".concat(Q,"/qos-policy"),component:b.default,exact:!0},{path:"".concat(Q,"/qos-policy-admin"),component:y.default,exact:!0},{path:"".concat(Q,"/qos-policy/detail/:id"),component:A.default,exact:!0},{path:"".concat(Q,"/qos-policy-admin/detail/:id"),component:A.default,exact:!0},{path:"".concat(Q,"/topo"),component:m.default,exact:!0},{path:"".concat(Q,"/load-balancers"),component:I.default,exact:!0},{path:"".concat(Q,"/load-balancers-admin"),component:I.default,exact:!0},{path:"".concat(Q,"/load-balancers/create"),component:S.default,exact:!0},{path:"".concat(Q,"/load-balancers/detail/:id"),component:x.default,exact:!0},{path:"".concat(Q,"/load-balancers-admin/detail/:id"),component:x.default,exact:!0},{path:"".concat(Q,"/load-balancers/:loadBalancerId/listener/:id"),component:C.default,exact:!0},{path:"".concat(Q,"/load-balancers-admin/:loadBalancerId/listener/:id"),component:C.default,exact:!0},{path:"".concat(Q,"/certificate"),component:k.default,exact:!0},{path:"".concat(Q,"/certificate-container/detail/:id"),component:N.default,exact:!0},{path:"".concat(Q,"/certificate-secret/detail/:id"),component:R.default,exact:!0},{path:"".concat(Q,"/vpn"),component:w.default,exact:!0},{path:"".concat(Q,"/ipsec-site-connection/detail/:id"),component:P.default,exact:!0},{path:"".concat(Q,"/ipsec-site-connection-admin/detail/:id"),component:P.default,exact:!0},{path:"".concat(Q,"/vpn-admin"),component:w.default,exact:!0},{path:"".concat(Q,"/security-group"),component:E.default,exact:!0},{path:"".concat(Q,"/security-group-admin"),component:E.default,exact:!0},{path:"".concat(Q,"/security-group/detail/:id"),component:D.default,exact:!0},{path:"".concat(Q,"/security-group-admin/detail/:id"),component:D.default,exact:!0},{path:"".concat(Q,"/dns/zones"),component:B.default,exact:!0},{path:"".concat(Q,"/dns-admin/zones"),component:B.default,exact:!0},{path:"".concat(Q,"/dns/zones/detail/:id"),component:j.default,exact:!0},{path:"".concat(Q,"/dns-admin/zones/detail/:id"),component:j.default,exact:!0},{path:"".concat(Q,"/dns/zones/detail/:zoneId/recordsets/:id"),component:F.default,exact:!0},{path:"".concat(Q,"/dns-admin/zones/detail/:zoneId/recordsets/:id"),component:F.default,exact:!0},{path:"".concat(Q,"/dns/reverse"),component:M.default,exact:!0},{path:"".concat(Q,"/dns/reverse/detail/:id"),component:T.default,exact:!0},{path:"*",component:l.default}]}]},4290:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.Network=void 0;var l=r(485),o=n(r(1667)),s=n(r(1991));class d extends o.default{get tabs(){var e=[{title:t("Current Project Networks"),key:"projectNetwork",component:s.default},{title:t("Shared Networks"),key:"sharedNetwork",component:s.default},{title:t("External Networks"),key:"externalNetwork",component:s.default}];return this.hasAdminRole&&e.push({title:t("All Networks"),key:"allNetwork",component:s.default}),e}}a.Network=d;a.default=(0,l.inject)("rootStore")((0,l.observer)(d))},4291:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=n(r(290)),d=r(1635),u=n(r(156));class c extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","delete_network"),(0,l.default)(this,"allowedCheckFunc",(e=>!e||this.isCurrentProject(e))),(0,l.default)(this,"onSubmit",(e=>s.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Network")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete network")}isCurrentProject(e){var t=u.default;return!(!(0,d.checkSystemAdmin)()&&e.project_id!==t.user.project.id)}}a.default=c},4292:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p=f(r(88)),m=f(r(72)),h=f(r(42)),g=r(485),v=r(1625),_=f(r(290)),b=r(1635),y=f(r(156)),A=r(202),I=["name","description","port_security_enabled"];function S(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class x extends v.ModalAction{constructor(){super(...arguments),(0,h.default)(this,"onSubmit",(e=>{var{item:{id:t}={}}=this.props,{name:a,description:r,port_security_enabled:i}=e,n=(0,m.default)(e,I),l={name:a,description:r,port_security_enabled:i};return this.isSystemAdmin&&(l.shared=n.shared),this.isAdminPage&&(l["router:external"]=n["router:external"]),_.default.edit({id:t},l)}))}get defaultValue(){var{item:e}=this.props;return function(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=S(Object(i),!0)).call(a,(function(t){(0,h.default)(e,t,i[t])})):d?u(e,d(i)):s(r=S(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}({},e)}get isSystemAdmin(){return(0,b.checkSystemAdmin)()}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"shared",label:t("Shared"),type:"radio",hidden:!this.isSystemAdmin,options:(0,A.getYesNoList)()},{name:"port_security_enabled",label:t("Port Security Enabled"),type:"switch",required:!0},{name:"router:external",label:t("External Network"),type:"check",hidden:!this.isAdminPage}]}}a.Edit=x,(0,h.default)(x,"id","edit-network"),(0,h.default)(x,"title",t("Edit")),(0,h.default)(x,"buttonText",t("Edit")),(0,h.default)(x,"policy","update_network"),(0,h.default)(x,"allowed",(e=>{var t=y.default;return(0,b.checkSystemAdmin)()||e.project_id===t.user.project.id?p.default.resolve(!0):p.default.resolve(!1)}));a.default=(0,g.inject)("rootStore")((0,g.observer)(x))},4293:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.NetworkDetail=void 0;var p=f(r(715)),m=f(r(42)),h=r(485),g=f(r(1627)),v=r(290),_=r(717),b=f(r(1772)),y=f(r(4294)),A=f(r(4297)),I=f(r(1992));function S(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=S(Object(i),!0)).call(a,(function(t){(0,m.default)(e,t,i[t])})):d?u(e,d(i)):s(r=S(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class C extends g.default{constructor(){super(...arguments),(0,m.default)(this,"fetchData",(e=>{if(this.store.fetchDetail){var t=x(x(x({},this.params),e||{}),{},{all_projects:this.isAdminPage});this.store.fetchDetailWithAvailabilityAndUsage(x(x({},t),{},{isAdminPage:this.isAdminPage,canAddNetworkIPUsageInfo:this.canAddNetworkIPUsageInfo})).catch(this.catch)}}))}get name(){return t("network")}get policy(){return"get_network"}get listUrl(){return this.getRoutePath("network")}get actionConfigs(){return I.default}get canAddNetworkIPUsageInfo(){return this.store.hasAdminRole}get detailInfos(){var e=[{title:t("Name"),dataIndex:"name"},{title:t("Project ID"),dataIndex:"project_id"},{title:t("Status"),dataIndex:"status",valueMap:_.networkStatus},{title:t("Admin State"),dataIndex:"admin_state_up",valueRender:"yesNo"},{title:t("Shared"),dataIndex:"shared",valueRender:"yesNo"},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{title:t("Update At"),dataIndex:"updated_at",valueRender:"toLocalTime"},{title:t("Description"),dataIndex:"description"}];return this.isAdminPage&&((0,p.default)(e).call(e,2,0,{title:t("Project Name"),dataIndex:"projectName"}),(0,p.default)(e).call(e,7,0,{title:t("DHCP Agents"),dataIndex:"dhcp_agents"})),this.canAddNetworkIPUsageInfo&&(0,p.default)(e).call(e,4,0,{title:t("Total IPs"),dataIndex:"total_ips"},{title:t("Used IPs"),dataIndex:"used_ips"}),e}get tabs(){return[{title:t("Detail"),key:"detail",component:A.default},{title:t("Subnets"),key:"subnets",component:y.default},{title:t("Ports"),key:"ports",component:b.default}]}init(){this.store=new v.NetworkStore}}a.NetworkDetail=C;a.default=(0,h.inject)("rootStore")((0,h.observer)(C))},4294:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.Subnets=void 0;var l=n(r(715)),o=n(r(42)),s=n(r(0)),d=r(485),u=n(r(1626)),c=r(491),f=n(r(1996));class p extends u.default{constructor(){super(...arguments),(0,o.default)(this,"updateFetchParams",(()=>({network_id:this.id,network:this.props.detail,all_projects:this.isAdminPage}))),(0,o.default)(this,"getColumns",(()=>{var e=[{title:t("Subnet ID/Name"),dataIndex:"name",routeName:this.getRouteName("subnetDetail"),routeParamsFunc:e=>({networkId:e.network_id,id:e.id})},{title:t("CIDR"),dataIndex:"cidr",isHideable:!0},{title:t("Gateway IP"),dataIndex:"gateway_ip",isHideable:!0},{title:t("IP Version"),dataIndex:"ip_version",isHideable:!0},{title:t("Port Count"),dataIndex:"subnetPorts",isHideable:!0,stringify:e=>(e||[]).length,render:(e,t)=>{var a=(e||[]).length;if(!a)return"-";var r=this.getLinkRender("subnetDetail",a,{id:t.id,networkId:t.network_id},{tab:"ports"});return s.default.createElement(s.default.Fragment,null,r)}},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime",isHideable:!0}];return this.canAddNetworkIPUsageInfo&&(0,l.default)(e).call(e,5,0,{title:t("Total IPs"),dataIndex:"total_ips"},{title:t("Used IPs"),dataIndex:"used_ips",titleTip:this.isAdminPage?"":t("Number of IPs used by all projects")}),e}))}init(){this.store=new c.SubnetStore}get policy(){return"get_subnet"}get name(){return t("subnets")}get id(){return this.params.id}get actionConfigs(){return f.default}get canAddNetworkIPUsageInfo(){return this.store.hasAdminRole}get searchFilters(){return[{label:t("Name"),name:"name"}]}}a.Subnets=p;a.default=(0,d.inject)("rootStore")((0,d.observer)(p))},4295:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=n(r(156)),d=n(r(491));class u extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","delete_subnet"),(0,l.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e))),(0,l.default)(this,"onSubmit",(e=>d.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Subnet")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete subnet")}isOwnerOrAdmin(e){var{tenant_id:t}=e;return this.isAdminPage||t===s.default.projectId}}a.default=u},4296:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.EditSubnet=void 0;var p=f(r(88)),m=f(r(72)),h=f(r(42)),g=r(485),v=r(1625),_=r(707),b=f(r(491)),y=f(r(156)),A=f(r(763)),I=["gateway_ip","allocation_pools","host_routes","dns","disable_gateway"];function S(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=S(Object(i),!0)).call(a,(function(t){(0,h.default)(e,t,i[t])})):d?u(e,d(i)):s(r=S(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}var{checkAllocation_pools:C,checkIpv6Allocation_pools:w,checkDNS:P,checkIpv6DNS:E,checkHostRoutes:D,checkIpv6HostRoutes:k,getAllocationPools:N,getHostRouters:R,getAllocationPoolsIntoLines:M,getDNSIntoLines:T,getHostRoutesIntoLines:B,splitToArray:j}=A.default,{isIpWithMask:F,isIPv6Cidr:Q}=_.ipValidate;class L extends v.ModalAction{constructor(){super(...arguments),(0,h.default)(this,"onSubmit",(e=>{var{gateway_ip:t,allocation_pools:a,host_routes:r,dns:i,disable_gateway:n}=e,l=(0,m.default)(e,I),o=N(a),s=R(r),d=j(i),u=x(x({},l),{},{network_id:this.subnet.network_id,allocation_pools:o,host_routes:s,dns_nameservers:d});return n?u.gateway_ip=null:t&&t!==this.item.gateway_ip&&(u.gateway_ip=t),b.default.update(this.subnet,u)}))}get name(){return t("Edit Subnet")}get subnet(){return this.props.item}get defaultValue(){return x(x({},this.subnet),{},{subnet_name:this.subnet.name,allocation_pools:M(this.subnet.allocation_pools),host_routes:B(this.subnet.host_routes),dns:T(this.subnet.dns_nameservers),disable_gateway:!this.subnet.gateway_ip,gateway_ip:this.subnet.gateway_ip,more:!1})}get formItems(){var{more:e,disable_gateway:a=!this.item.gateway_ip}=this.state;return[{name:"subnet_name",label:t("Subnet Name"),type:"input-name",required:!0},{name:"cidr",label:t("CIDR"),type:"input",placeholder:"192.168.0.0/24",disabled:!0,required:!0,validator:(e,a)=>(4===this.subnet.ip_version?F(a):Q(a))?p.default.resolve(!0):p.default.reject(new Error(t("Invalid CIDR."))),tip:t("It is recommended that you use the private network address 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16")},{name:"disable_gateway",label:t("Disable Gateway"),type:"check",onChange:e=>{this.setState({disable_gateway:e},(()=>{this.formRef.current.validateFields(["gateway_ip"])}))},hidden:!e},{name:"gateway_ip",label:t("Gateway IP"),type:"ip-input",version:this.subnet.ip_version,required:!a,tip:t("If no gateway is specified, the first IP address will be defaulted."),hidden:!(e&&!a)},{name:"enable_dhcp",label:t("DHCP"),type:"radio",optionType:"default",options:[{label:t("Enabled"),value:!0},{label:t("Disabled"),value:!1}],hidden:!e},{name:"allocation_pools",label:t("Allocation Pools"),type:"textarea",extra:t("IP address allocation polls, one enter per line(e.g. 192.168.1.2,192.168.1.200)"),hidden:!e,validator:4===this.subnet.ip_version?C:w},{name:"dns",label:t("DNS"),type:"textarea",extra:t("One entry per line(e.g. 114.114.114.114)"),hidden:!e,validator:4===this.subnet.ip_version?P:E},{name:"host_routes",label:t("Host Routes"),type:"textarea",extra:t("Additional routes announced to the instance, one entry per line(e.g. 192.168.200.0/24,10.56.1.254)"),hidden:!e,validator:4===this.subnet.ip_version?D:k},{name:"more",label:t("Advanced Options"),type:"more"}]}}a.EditSubnet=L,(0,h.default)(L,"id","edit-subnet"),(0,h.default)(L,"title",t("Edit Subnet")),(0,h.default)(L,"buttonText",t("Edit")),(0,h.default)(L,"policy","update_subnet"),(0,h.default)(L,"allowed",((e,t)=>{var{isAdminPage:a=!1}=t||{},{tenant_id:r}=e,i=a||r===y.default.projectId;return p.default.resolve(i)}));a.default=(0,g.inject)("rootStore")((0,g.observer)(L))},4297:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=r(485),o=n(r(1633)),s=r(81);class d extends o.default{get leftCards(){return[this.baseInfoCard]}get qosEndpoint(){return(0,s.qosEndpoint)()}get baseInfoCard(){var e=[{label:t("Availability Zone"),dataIndex:"availability_zones"},{label:t("Availability Zone Hints"),dataIndex:"availability_zone_hints"},{label:t("MTU"),dataIndex:"mtu"},{label:t("Router External"),dataIndex:"router:external",valueRender:"yesNo"},{label:t("Provider Network Type"),dataIndex:"provider:network_type"},{label:t("Provider Physical Network"),dataIndex:"provider:physical_network",render:e=>e||"-"},{label:t("Segmentation ID"),dataIndex:"provider:segmentation_id"},{label:t("Port Security Enabled"),dataIndex:"port_security_enabled",valueRender:"yesNo"}];return this.qosEndpoint&&e.push({label:t("QoS Policy"),dataIndex:"qos_policy_id",render:e=>e||"-"}),{title:t("Base Info"),options:e}}}a.BaseDetail=d;a.default=(0,l.inject)("rootStore")((0,l.observer)(d))},4298:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.SubnetDetail=void 0;var p=f(r(42)),m=r(485),h=f(r(1627)),g=r(491),v=f(r(1772)),_=f(r(4299)),b=f(r(1996));function y(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=y(Object(i),!0)).call(a,(function(t){(0,p.default)(e,t,i[t])})):d?u(e,d(i)):s(r=y(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class I extends h.default{constructor(){super(...arguments),(0,p.default)(this,"updateFetchParams",(e=>A(A({},e),{},{inDetail:!0,canAddNetworkIPUsageInfo:this.store.hasAdminRole})))}get name(){return t("subnet")}get policy(){return"get_subnet"}get listUrl(){var{networkId:e}=this.params;return this.getRoutePath("networkDetail",{id:e},{tab:"subnets"})}get actionConfigs(){return b.default}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Project ID"),dataIndex:"project_id"},{title:t("CIDR"),dataIndex:"cidr"},{title:t("IP Version"),dataIndex:"ip_version"},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{title:t("Update At"),dataIndex:"updated_at",valueRender:"toLocalTime"},{title:t("Description"),dataIndex:"description"}]}get tabs(){return[{title:t("Detail"),key:"detail",component:_.default},{title:t("Ports"),key:"ports",component:v.default}]}init(){this.store=new g.SubnetStore}}a.SubnetDetail=I;a.default=(0,m.inject)("rootStore")((0,m.observer)(I))},4299:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(71)),o=n(r(93)),s=n(r(0)),d=r(485),u=n(r(1633));class c extends u.default{get leftCards(){var e=[this.networkCard,this.baseInfoCard];return this.canAddNetworkIPUsageInfo&&e.push(this.ipUsageCard),e}get canAddNetworkIPUsageInfo(){return this.store.hasAdminRole}get networkCard(){var e=[{label:t("Network Name"),dataIndex:"network.name"},{label:t("Network ID"),dataIndex:"network.id",render:e=>this.getLinkRender("networkDetail",e,{id:e})}];return{title:t("Network Info"),options:e}}get baseInfoCard(){var e=[{label:t("Gateway IP"),dataIndex:"gateway_ip"},{label:t("Allocation Pools"),dataIndex:"allocation_pools",render:e=>{var t,a=(0,l.default)(t=e||[]).call(t,(e=>{var t,{start:a,end:r}=e;return s.default.createElement("div",{key:(0,o.default)(t="".concat(a,"-")).call(t,r)},a," - ",r)}));return s.default.createElement(s.default.Fragment,null,a)}},{label:t("Enable DHCP"),dataIndex:"enable_dhcp",valueRender:"yesNo"},{label:t("Host Routes"),dataIndex:"host_routes",render:e=>{if(!e.length)return"-";var t=(0,l.default)(e).call(e,(e=>{var t,{destination:a,nexthop:r}=e;return s.default.createElement("div",{key:(0,o.default)(t="".concat(a,",")).call(t,r)},a,",",r)}));return s.default.createElement(s.default.Fragment,null,t)}},{label:t("DNS Nameservers"),dataIndex:"dns_nameservers",render:e=>{if(!e.length)return"-";var t=(0,l.default)(e).call(e,(e=>s.default.createElement("div",{key:e},e)));return s.default.createElement(s.default.Fragment,null,t)}}];return{title:t("Base Info"),options:e}}get ipUsageCard(){if(!this.canAddNetworkIPUsageInfo)return null;var e=[{label:t("Total IPs"),dataIndex:"total_ips"},{label:t("Used IPs"),dataIndex:"used_ips"}];return{title:t("IP Usage"),options:e}}}a.BaseDetail=c;a.default=(0,d.inject)("rootStore")((0,d.observer)(c))},4300:function(e,a,r){"use strict";var i=r(201),n=r(20),l=r(29),o=r(22);n(a,"__esModule",{value:!0}),a.default=a.Routes=void 0;var s=o(r(42)),d=r(485),u=o(r(1626)),c=r(1651),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=m(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},i=n&&l;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=i?l(e,o):null;s&&(s.get||s.set)?n(r,o,s):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}(r(720)),p=o(r(1997));function m(e){if("function"!=typeof i)return null;var t=new i,a=new i;return(m=function(e){return e?a:t})(e)}class h extends u.default{constructor(){super(...arguments),(0,s.default)(this,"getColumns",(()=>(0,c.getRouterColumns)(this)))}init(){this.store=this.inDetailPage?new f.RouterStore:f.default,this.downloadStore=new f.RouterStore}get policy(){return"get_router"}get name(){return t("routers")}get actionConfigs(){return this.isAdminPage?p.default.adminConfigs:p.default.actionConfigs}get isFilterByBackend(){return!0}get isSortByBackend(){return!0}get adminPageHasProjectFilter(){return!0}get defaultSortKey(){return"status"}get searchFilters(){return c.routerFilters}}a.Routes=h;a.default=(0,d.inject)("rootStore")((0,d.observer)(h))},4301:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(88)),o=n(r(289)),s=n(r(124)),d=n(r(61)),u=n(r(42)),c=n(r(112)),f=r(1625),p=n(r(720));class m extends f.ConfirmAction{constructor(){var e;super(...arguments),e=this,(0,u.default)(this,"policy","delete_router"),(0,u.default)(this,"submitErrorMsg",(e=>{var a=this.getName(e);return this.connectSubnets?t("Unable to {action}, because : {reason}, instance: {name}.",{action:this.actionName||this.title,name:a,reason:t("the router has connected subnet")}):t("Unable to {action}, instance: {name}.",{action:this.actionName||this.title,name:a})})),(0,u.default)(this,"allowedCheckFunc",(e=>!e||this.notExternalGateway(e))),(0,u.default)(this,"performErrorMsg",(e=>{var a=(0,c.default)(e)?e[0]:e,{name:r}=a,i=t('You are not allowed to delete router "{ name }".',{name:r});return this.notExternalGateway(a)||(i=t('Unable to delete router "{ name }". External gateway is opened, please clear external gateway first.',{name:r})),i})),(0,u.default)(this,"onSubmit",function(){var a=(0,d.default)((function*(a,r,i){if(i)return p.default.delete(a);var n=yield p.default.fetchConnectedSubnets(e.item);return n.connectSubnets.length?(e.connectSubnets=n.connectSubnets,e.showConfirmErrorBeforeSubmit=!0,e.confirmErrorMessageBeforeSubmit=t("Unable to {action}, because : {reason}, instance: {name}.",{action:e.actionName||e.title,name:e.item.name,reason:t("the router has connected subnet")}),l.default.reject()):(e.showConfirmErrorBeforeSubmit=!1,p.default.delete(a))}));return function(e,t,r){return a.apply(this,arguments)}}())}get id(){return"delete"}get title(){return t("Delete Router")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete router")}notAssociatedNet(e){if(!e.ports||0===e.ports.length)return!0;var t,a=["network:router_interface_distributed","network:router_interface","network:ha_router_replicated_interface"];return!(e.ports.length>0)||!(0,o.default)(t=e.ports).call(t,(e=>(0,s.default)(a).call(a,e.device_owner)>-1))}notExternalGateway(e){return!e.hasExternalGateway}}a.default=m},4302:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var l=n(r(88)),o=n(r(42)),s=r(485),d=n(r(720)),u=r(1625);class c extends u.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{id:t}=this.item;return d.default.edit({id:t},e)}))}init(){this.store=d.default}get defaultValue(){var{item:e}=this.props;return{name:e.name,description:e.description}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0,placeholder:t("Please input name"),withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1}]}}a.Edit=c,(0,o.default)(c,"id","edit-router"),(0,o.default)(c,"title",t("Edit Router")),(0,o.default)(c,"buttonText",t("Edit")),(0,o.default)(c,"policy","update_router"),(0,o.default)(c,"allowed",(e=>l.default.resolve("Default Router"!==e.name)));a.default=(0,s.inject)("rootStore")((0,s.observer)(c))},4303:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=n(r(720));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","update_router"),(0,l.default)(this,"allowedCheckFunc",(e=>!e||this.hasGateway(e))),(0,l.default)(this,"onSubmit",(e=>{var{id:t}=e;return s.default.edit({id:t},{external_gateway_info:null})}))}get id(){return"clear-gateway"}get title(){return t("Close External Gateway")}get buttonText(){return t("Close External Gateway")}get actionName(){return t("Close external gateway")}hasGateway(e){return e.hasExternalGateway}}a.default=d},4304:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.SetGateway=void 0;var p=f(r(88)),m=f(r(42)),h=r(485),g=f(r(720)),v=r(290),_=r(1625),b=r(717);function y(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=y(Object(i),!0)).call(a,(function(t){(0,m.default)(e,t,i[t])})):d?u(e,d(i)):s(r=y(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class I extends _.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",(e=>{var{externalNetwork:t}=e,{id:a}=this.item,r={external_gateway_info:{network_id:t.selectedRowKeys[0]}};return this.store.edit({id:a},r)}))}init(){this.store=g.default,this.networkStore=new v.NetworkStore}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("open external gateway")}get formItems(){return[{name:"name",label:t("Name"),type:"label",iconType:"router"},A({name:"externalNetwork",label:t("External Gateway"),type:"select-table",backendPageStore:this.networkStore,extraParams:{"router:external":!0},required:!0,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Status"),dataIndex:"status",valueMap:b.networkStatus},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime",sorter:!1}]},b.networkSortProps)]}}a.SetGateway=I,(0,m.default)(I,"id","set-gateway"),(0,m.default)(I,"title",t("Open External Gateway")),(0,m.default)(I,"policy","update_router"),(0,m.default)(I,"allowed",(e=>p.default.resolve(!e.external_gateway_info)));a.default=(0,h.inject)("rootStore")((0,h.observer)(I))},4305:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.ConnectSubnet=void 0;var l=n(r(124)),o=n(r(33)),s=n(r(93)),d=n(r(88)),u=n(r(42)),c=r(485),f=r(41),p=r(720),m=n(r(491)),h=r(732),g=r(1625);class v extends g.ModalAction{constructor(){super(...arguments),(0,u.default)(this,"getSubnets",(()=>{var{networkId:e}=this.state;e&&this.subnetStore.fetchList({network_id:e})})),(0,u.default)(this,"onNetworkChange",(e=>{var{selectedRowKeys:t=[]}=e;this.setState({networkId:t[0]},(()=>{this.getSubnets()}))})),(0,u.default)(this,"disabledFuncSubnet",(e=>{var t,{allocation_pools:a=[]}=e;return 0===a.length||(0,l.default)(t=this.excludeSubnetIds).call(t,e.id)>=0})),(0,u.default)(this,"onSubmit",(e=>{var{id:t}=this.item,{subnet:a}=e,r=a.selectedRowKeys[0],{networkId:i}=this.state;return this.store.connectSubnet({id:t,subnetId:r,networkId:i})}))}init(){this.store=new p.RouterStore,this.subnetStore=m.default,this.portStore=new h.PortStore,this.getPortList()}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("connect subnet")}get subnets(){var{networkId:e}=this.state;return e?(0,f.toJS)(this.subnetStore.list.data||[]):[]}getPortList(){var{id:e}=this.item;this.portStore.fetchList({device_id:e})}get excludeSubnetIds(){var e,t=[];return(0,o.default)(e=(0,f.toJS)(this.portStore.list.data||[])).call(e,(e=>{var a;(0,o.default)(a=e.fixed_ips).call(a,(e=>{t.push(e.subnet_id)}))})),t}get formItems(){var{networkId:e}=this.state;return[{name:"name",label:t("Name"),type:"label",iconType:"router"},{name:"network",label:t("Network"),type:"network-select-table",required:!0,onChange:this.onNetworkChange},{name:"subnet",label:t("Subnet"),type:"select-table",data:this.subnets,isLoading:e&&this.subnetStore.list.isLoading,disabledFunc:this.disabledFuncSubnet,required:!0,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Cidr"),dataIndex:"cidr"},{title:t("Allocation Pools"),dataIndex:"allocation_pools",render:e=>{var t;return e&&0!==e.length?(0,s.default)(t="".concat(e[0].start," -- ")).call(t,e[0].end):"-"}},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]}]}}a.ConnectSubnet=v,(0,u.default)(v,"id","connect-subnet"),(0,u.default)(v,"title",t("Connect Subnet")),(0,u.default)(v,"policy","add_router_interface"),(0,u.default)(v,"allowed",(()=>d.default.resolve(!0)));a.default=(0,c.inject)("rootStore")((0,c.observer)(v))},4306:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.DisconnectSubnet=void 0;var l=n(r(33)),o=n(r(124)),s=n(r(88)),d=n(r(71)),u=n(r(419)),c=n(r(735)),f=n(r(116)),p=n(r(93)),m=n(r(61)),h=n(r(42)),g=r(485),v=r(41),_=r(720),b=n(r(290)),y=n(r(491)),A=r(732),I=r(1625);class S extends I.ModalAction{constructor(){super(...arguments),(0,h.default)(this,"onSubmit",(e=>{var{id:t}=this.item,{subnet:a}=e,r=a.selectedRowKeys[0];return this.store.disconnectSubnet({id:t,subnetId:r})}))}init(){this.store=new _.RouterStore,this.networkStore=b.default,this.subnetStore=y.default,this.portStore=new A.PortStore,this.getSubnetList(),this.state.subnetLoading=!0}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("disconnect subnet")}getSubnetList(){var e=this;return(0,m.default)((function*(){var t,a,r,{id:i}=e.item;yield e.portStore.fetchList({device_id:i});var n=[],p=[],m=["network:router_interface_distributed","network:router_interface","network:ha_router_replicated_interface"];(0,l.default)(t=(0,v.toJS)(e.portStore.list.data||[])).call(t,(e=>{var t;(0,o.default)(m).call(m,e.device_owner)>-1&&(p.push(e.network_id),(0,l.default)(t=e.fixed_ips).call(t,(e=>{n.push(e.subnet_id)})))}));var h=yield s.default.all((0,d.default)(a=(0,u.default)(new c.default(n))).call(a,(t=>e.subnetStore.fetchDetail({id:t})))),g=yield s.default.all((0,d.default)(r=(0,u.default)(new c.default(p))).call(r,(t=>e.networkStore.fetchDetail({id:t}))));(0,l.default)(h).call(h,(e=>{var t=(0,f.default)(g).call(g,(t=>t.id===e.network_id));e.network=t})),e.setState({subnets:(0,d.default)(h).call(h,(e=>(0,v.toJS)(e))),subnetLoading:!1})}))()}get formItems(){var{subnets:e=[],subnetLoading:a}=this.state;return[{name:"name",label:t("Name"),type:"label",iconType:"router"},{name:"subnet",label:t("Subnet"),type:"select-table",data:e,isLoading:a,required:!0,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Network"),dataIndex:"network",render:e=>e&&e.name||"-"},{title:t("Cidr"),dataIndex:"cidr"},{title:t("Allocation Pools"),dataIndex:"allocation_pools",render:e=>{var t;return e&&0!==e.length?(0,p.default)(t="".concat(e[0].start," -- ")).call(t,e[0].end):"-"}},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]}]}}a.DisconnectSubnet=S,(0,h.default)(S,"id","disconnect-subnet"),(0,h.default)(S,"title",t("Disconnect Subnet")),(0,h.default)(S,"policy","remove_router_interface"),(0,h.default)(S,"allowed",(()=>s.default.resolve(!0)));a.default=(0,g.inject)("rootStore")((0,g.observer)(S))},4307:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=n(r(720));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy",["update_router","update_router:external_gateway_info","update_router:external_gateway_info:network_id","update_router:external_gateway_info:enable_snat"]),(0,l.default)(this,"allowedCheckFunc",(e=>(null==e?void 0:e.external_gateway_info)&&!e.external_gateway_info.enable_snat)),(0,l.default)(this,"onSubmit",(e=>{var{id:t,external_gateway_info:{network_id:a}}=e,r={external_gateway_info:{network_id:a,enable_snat:!0}};return s.default.edit({id:t},r)}))}get id(){return"enable-snat"}get title(){return t("Enable SNAT")}get actionName(){return t("Enable SNAT")}}a.default=d},4308:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=n(r(720));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy",["update_router","update_router:external_gateway_info","update_router:external_gateway_info:network_id","update_router:external_gateway_info:enable_snat"]),(0,l.default)(this,"allowedCheckFunc",(e=>{var t;return null==e||null===(t=e.external_gateway_info)||void 0===t?void 0:t.enable_snat})),(0,l.default)(this,"onSubmit",(e=>{var{id:t,external_gateway_info:{network_id:a}}=e,r={external_gateway_info:{network_id:a,enable_snat:!1}};return s.default.edit({id:t},r)}))}get id(){return"disable-snat"}get title(){return t("Disable SNAT")}get actionName(){return t("Disable SNAT")}}a.default=d},4309:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.FloatingIpDetail=void 0;var l=n(r(1696)),o=r(485),s=n(r(1627)),d=r(1657),u=r(415),c=r(1771),f=n(r(1971)),p=n(r(4310)),m=n(r(4311));class h extends s.default{get name(){return t("floating ip")}get policy(){return"get_floatingip"}get listUrl(){return this.getRoutePath("fip")}get actionConfigs(){return this.isAdminPage?f.default.adminConfigs:f.default.actionConfigs}get detailInfos(){return[{title:t("Floating IP"),dataIndex:"floating_ip_address"},{title:t("Status"),dataIndex:"status",valueMap:d.floatingIpStatus},{title:t("Project ID"),dataIndex:"tenant_id",hidden:!this.isAdminPage},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{title:t("Description"),dataIndex:"description"}]}get tabs(){var e=[{title:t("Detail"),key:"detail",component:p.default}];return(0,c.enablePFW)()&&(0,l.default)(this.detailData.fixed_ip_address)&&e.push({title:t("Port Forwardings"),key:"port_forwarding",component:m.default}),e}init(){this.store=new u.FloatingIpStore}}a.FloatingIpDetail=h;a.default=(0,o.inject)("rootStore")((0,o.observer)(h))},4310:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var p=f(r(93)),m=f(r(42)),h=r(485),g=r(415),v=f(r(1633));function _(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=_(Object(i),!0)).call(a,(function(t){(0,m.default)(e,t,i[t])})):d?u(e,d(i)):s(r=_(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class y extends v.default{constructor(){super(...arguments),(0,m.default)(this,"fetchData",(()=>{var{router_id:e}=this.props.detail;e&&this.store.getAddInfo({router_id:e}).catch(this.catch)}))}init(){this.store=new g.FloatingIpStore}get isLoading(){var{router_id:e}=this.props.detail;return!!e&&this.store.isLoading}get detailData(){return b(b({},this.props.detail),{},{router_name:this.store.addInfo.name,network_name:this.store.addInfo.externalNetworkName})}get leftCards(){return[this.baseInfoCard]}get baseInfoCard(){var e=[{label:t("Fixed IP"),dataIndex:"fixed_ip_address"},{label:t("Network Line"),dataIndex:"network_name"},{label:t("Router"),dataIndex:"router_id",render:(e,t)=>{if(e){var a,{router_name:r,network_name:i}=t;if("-"===r&&"-"===i)return e;var n=r?(0,p.default)(a="".concat(e," (")).call(a,r,")"):e;return this.getLinkRender("routerDetail",n,{id:e})}return"-"}}];return{title:t("Base Info"),options:e}}}a.BaseDetail=y;a.default=(0,h.inject)("rootStore")((0,h.observer)(y))},4311:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.PortForwarding=void 0;var p=f(r(203)),m=f(r(72)),h=f(r(42)),g=r(485),v=f(r(1626)),_=r(757),b=r(202),y=r(1657),A=f(r(4312)),I=["id","all_projects"];function S(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class x extends v.default{constructor(){super(...arguments),(0,h.default)(this,"updateFetchParams",(e=>{var{id:t,all_projects:a}=e,r=(0,m.default)(e,I);return function(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=S(Object(i),!0)).call(a,(function(t){(0,h.default)(e,t,i[t])})):d?u(e,d(i)):s(r=S(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}({fipId:t,fipInfo:this.props.detail},r)})),(0,h.default)(this,"getColumns",(()=>[{title:t("ID"),dataIndex:"id"},{title:t("External Port/Port Range"),dataIndex:"external_port",splitColumnForDownload:!1,render:(e,t)=>e||t.external_port_range},{title:t("Internal Ip Address"),dataIndex:"internal_ip_address",isHideable:!0},{title:t("Internal Port/Port Range"),dataIndex:"internal_port",splitColumnForDownload:!1,isHideable:!0,render:(e,t)=>e||t.internal_port_range},{title:t("Protocol"),dataIndex:"protocol",isHideable:!0,valueMap:y.portForwardingProtocols},{title:t("Description"),dataIndex:"description",isHideable:!0}]))}init(){this.store=new _.PortForwardingStore}get policy(){return"get_floatingip_port_forwarding"}get name(){return t("port forwardings")}get isFilterByBackend(){return!1}get actionConfigs(){return this.isAdminPage?A.default.actionConfigsAdmin:A.default.actionConfigs}get searchFilters(){return[{label:t("Protocol"),name:"protocol",options:(0,b.getOptions)(y.portForwardingProtocols)},{label:t("External Port/Port Range"),name:"external_port",filterFunc:(e,t,a)=>{var r,i,{external_port:n,external_port_range:l}=a||{};return(0,p.default)(r="".concat(n||"")).call(r,t)||(0,p.default)(i="".concat(l||"")).call(i,t)}},{label:t("Internal Ip Address"),name:"internal_ip_address",filterFunc:(e,t)=>(0,p.default)(e).call(e,t)},{label:t("Internal Port/Port Range"),name:"internal_port",filterFunc:(e,t,a)=>{var r,i,{internal_port:n,internal_port_range:l}=a||{};return(0,p.default)(r="".concat(n||"")).call(r,t)||(0,p.default)(i="".concat(l||"")).call(i,t)}},{label:t("Description"),name:"description"}]}}a.PortForwarding=x;a.default=(0,g.inject)("rootStore")((0,g.observer)(x))},4312:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(1842)),l=i(a(4313)),o=i(a(4314)),s={rowActions:{firstAction:l.default,moreActions:[{action:o.default}]},batchActions:[],primaryActions:[n.default]},d={rowActions:{firstAction:o.default},batchActions:[],primaryActions:[]};t.default={actionConfigs:s,actionConfigsAdmin:d}},4313:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p=f(r(72)),m=f(r(39)),h=f(r(71)),g=f(r(203)),v=f(r(116)),_=f(r(750)),b=f(r(61)),y=f(r(42)),A=r(485),I=f(r(757)),S=f(r(714)),x=r(1651),C=r(1657),w=r(1650),P=r(1842),E=["floating_ip_address","fip","internal_port_id","internal_ip_address"],D=["floatingIp","virtual_adapter","fixed_ip_address","external_port","internal_port"];function k(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=k(Object(i),!0)).call(a,(function(t){(0,y.default)(e,t,i[t])})):d?u(e,d(i)):s(r=k(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class R extends P.CreatePortForwarding{constructor(){var e;super(...arguments),e=this,(0,y.default)(this,"handlePortSelect",function(){var t=(0,b.default)((function*(t){e.setState({fixedIpLoading:!0});var{canReachSubnetIdsWithRouterId:a}=e.state,r=yield(0,C.getInterfaceWithReason)(t.selectedRows),i=(0,w.getPortsAndReasons)(r,a,!0);return e.setState({portFixedIPs:i,fixed_ip_address:void 0,fixedIpLoading:!1}),e.formRef.current&&e.formRef.current.resetFields(["fixed_ip_address"]),i}));return function(e){return t.apply(this,arguments)}}()),(0,y.default)(this,"onSubmit",(e=>I.default.edit({fipId:this.fipId,id:this.item.id},e))),(0,y.default)(this,"checkPortUsedBase",((e,t,a,r)=>{var{external_port:i,internal_port:n,external_port_range:l,internal_port_range:o}=e,s="external"===t?l:o;if(s){var[d,u]=this.getRangeFromString(s);return a>=d&&a<=u&&e.protocol===r}var c="external"===t?i:n;return this.item.id!==e.id&&a===c&&e.protocol===r})),(0,y.default)(this,"checkPortUsedInternal",((e,t)=>{if(!e)return!1;var a=this.formRef.current.getFieldsValue(["virtual_adapter","fixed_ip_address"]),r=a.fixed_ip_address.selectedRows[0].fixed_ip_address,i=a.virtual_adapter.selectedRows[0].id;return this.item.id!==t.id&&t.internal_port_id===i&&t.internal_ip_address===r}))}get name(){return t("Edit Port Forwarding")}get instanceName(){var{floating_ip_address:e}=this.item;return(0,C.getPortForwardingName)(this.item,e)}get tips(){return""}get fipId(){return this.item.fip.id}getExtraInfo(){x.getCanReachSubnetIdsWithRouterIdInComponent.call(this,(e=>{var{item:{fip:t}}=this;return e.external_gateway_info&&e.external_gateway_info.network_id===t.floating_network_id})).then((()=>{this.getInitialPortFixedIPs()}))}getInitialPortFixedIPs(){var e=this;return(0,b.default)((function*(){e.setState({fixedIpLoading:!0});var{internal_port_id:t,internal_ip_address:a}=e.item,r=yield S.default.fetchDetail({id:t});return e.handlePortSelect({selectedRows:[r]}).then((t=>{var i=(0,m.default)(t).call(t,(e=>e.fixed_ip_address===a)),n={selectedRowKeys:(0,h.default)(i).call(i,(e=>e.id)),selectedRows:i};return e.updateFormValue("virtual_adapter",{selectedRowKeys:[r.id],selectedRows:[r]}),n})).then((t=>{e.setState({fixed_ip_address:t})}))}))()}get defaultValue(){var e=this.item,{floating_ip_address:t,fip:a,internal_port_id:r,internal_ip_address:i}=e;return N({floatingIp:t,virtual_adapter:{selectedRowKeys:[r]},fixed_ip_address:{selectedRowKeys:[i],selectedRows:[{fixed_ip_address:i}]}},(0,p.default)(e,E))}getSubmitData(e){var t,a,{floatingIp:r,virtual_adapter:{selectedRows:i=[]}={},fixed_ip_address:{selectedRows:n=[]}={},external_port:l,internal_port:o}=e,s=N({},(0,p.default)(e,D));return(0,g.default)(t=l.toString()).call(t,":")?s.external_port_range=l:s.external_port=l,(0,g.default)(a=o.toString()).call(a,":")?s.internal_port_range=o:s.internal_port=o,s.internal_ip_address=n[0].fixed_ip_address,s.internal_port_id=i[0].id,s}get formItems(){var e=super.formItems;if(this.supportRange)return e;var a=(0,v.default)(e).call(e,(e=>"external_port"===e.name)),r=(0,v.default)(e).call(e,(e=>"internal_port"===e.name));a.label=t("External Port"),r.label=t("Internal Port");var i={type:"input-int",min:1,max:65535,extra:t("Enter an integer value between 1 and 65535."),hasRequiredCheck:!0};return(0,_.default)(a,i,{placeholder:t("Please input {label}",{label:a.label})}),(0,_.default)(r,i,{placeholder:t("Please input {label}",{label:r.label})}),e}}a.Edit=R,(0,y.default)(R,"id","edit"),(0,y.default)(R,"title",t("Edit")),(0,y.default)(R,"policy","update_floatingip_port_forwarding"),(0,y.default)(R,"allowed",(()=>!0));a.default=(0,A.inject)("rootStore")((0,A.observer)(R))},4314:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=n(r(757)),d=r(1657);class u extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","delete_floatingip_port_forwarding"),(0,l.default)(this,"getItemName",(e=>(0,d.getPortForwardingName)(e,e.floating_ip_address))),(0,l.default)(this,"onSubmit",(e=>{var{fip:t,id:a}=e,r=t.id;return s.default.delete({floatingipId:r,id:a})}))}get id(){return"delete"}get title(){return t("Delete Port Forwarding")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete port forwarding")}}a.default=u},4315:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.errorStrokeColor=a.errorShadowColor=a.default=a.activeShadowColor=a.Topology=void 0;var p=f(r(203)),m=f(r(33)),h=f(r(496)),g=f(r(124)),v=f(r(71)),_=f(r(93)),b=f(r(39)),y=f(r(414));r(416);var A=f(r(417));r(1662);var I=f(r(1663));r(725);var S=f(r(494));r(288);var x=f(r(287)),C=f(r(1948)),w=f(r(61)),P=f(r(42)),E=f(r(0)),D=(r(200),f(r(4316))),k=f(r(4317)),N=(r(706),r(485)),R=f(r(290)),M=r(4318),T=f(r(1765)),B=r(707),j=r(41),F=r(717),Q=f(r(1846)),L=f(r(1998)),O=f(r(1993)),q=f(r(1687)),V=f(r(4320)),H=f(r(1999));function U(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=U(Object(i),!0)).call(a,(function(t){(0,P.default)(e,t,i[t])})):d?u(e,d(i)):s(r=U(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}var z=null,{isIpInRangeAll:K}=B.ipValidate,J=a.activeShadowColor="rgba(87,227,155,0.61)",Z=a.errorShadowColor="rgba(237,33,48,1)",W=a.errorStrokeColor="#DB3A3A";class X extends E.default.Component{constructor(e){super(e),(0,P.default)(this,"bindEvents",(()=>{z.on("node:mouseenter",(e=>{var t,{item:a}=e,{nodeType:r}=a._cfg.model;if((0,p.default)(t=["router","ins","lb"]).call(t,r)){var i,n=z.findAllByState("node","hover");(0,m.default)(n).call(n,(e=>{z.setItemState(e,"hover",!1)})),z.setItemState(a,"hover",!0);var l=z.findAllByState("edge","hover");(0,m.default)(l).call(l,(e=>{z.setItemState(e,"hover",!1),z.updateItem(e,{style:{stroke:e._cfg.target._cfg.model.style.stroke}})}));var o=a._cfg.model.style.stroke;(0,m.default)(i=a._cfg.edges).call(i,(e=>{z.setItemState(e,"hover",!0),z.updateItem(e,{style:{stroke:o}})}))}}))})),(0,P.default)(this,"updateGraph",(()=>{z&&(z.clear(),z.destroy(),z=null),this.setState({firstSubnetY:290,nodeCard:[],lbCard:[],insCard:[],extendWidth:0,loading:!0,withoutServerData:null,allData:null,showAll:!0}),this.initTopo()})),(0,P.default)(this,"renderRouterNode",((e,t)=>{var{routers:a}=this.topoInfo,r=[];if((0,m.default)(a).call(a,((a,i)=>{var{id:n,external_gateway_info:l,subnets:o,name:s}=a,d=(0,h.default)((t/10*i+t/20*3).toFixed(0));if(r.push({nodeCardX:d,nodeCardY:190}),e.nodes.push({id:n,x:d,y:190,type:"rect",nodeType:"router",infoIndex:i,size:[66,56],style:{radius:4,fill:"#FFFFFFFF",stroke:"ACTIVE"===a.status?globalCSS.successColor:W,shadowColor:"ACTIVE"===a.status?J:Z,shadowBlur:"ACTIVE"===a.status?5:4},anchorPoints:[[.5,0]]}),null!==l&&e.edges.push({id:"edge-".concat(s,"-ext"),target:"extNet",targetAnchor:1,source:n,sourceAnchor:0,type:"arrowLine",style:{stroke:M.subnetsColors[0][0]}}),0!==o.length){var u=0;(0,m.default)(o).call(o,(t=>{var a,r,i=(0,g.default)(a=(0,v.default)(r=e.subnetNodes).call(r,(e=>e.id))).call(a,t);if(-1!==i){var l,{style:{stroke:o}}=e.subnetNodes[i];u+=1,e.edges.push({id:(0,_.default)(l="edge-".concat(s,"-")).call(l,t),target:t,targetAnchor:0,source:n,sourceAnchor:u,type:"arrowLine",style:{stroke:o}})}})),e.nodes[e.nodes.length-1].anchorPoints=this.getAnchorPoints(1,u)}})),r[0]){var i=r[r.length-1].nodeCardX,{extendWidth:n}=this.state;if(i>=t-5){var l=Math.ceil((i-(t-5))/(t/10));this.setState({extendWidth:n+l*(t/10)})}this.setState({nodeCard:r})}})),(0,P.default)(this,"renderNetworkNode",((e,t)=>{var{subnets:a,networks:r}=this.topoInfo,{extendWidth:i}=this.state;e.subnetNodes=[],(0,m.default)(r).call(r,(r=>{if(!(0,F.isExternalNetwork)(r)){var n,l=[],{firstSubnetY:o}=this.state;(0,m.default)(n=r.subnets).call(n,(e=>{(0,m.default)(a).call(a,(t=>{t.id===e&&l.push(t)}))}));var s=o+32*l.length+60;(0,m.default)(l).call(l,((a,n)=>{var l=M.subnetsColors[0],d=l[n%l.length];e.subnetNodes.push({id:a.id,label:a.name,labelCfg:{position:"right",offset:-t/2,style:{fill:"#000000"}},type:"rect",x:t/2,y:o+32*n,cardY:s,anchorPoints:[[.5,0],[.5,1]],comboId:r.id,style:{radius:4,fill:d,stroke:d,width:t+i-50,height:20},pools:a.allocation_pools,networkId:a.network_id})})),0!==l.length&&(this.setState({firstSubnetY:e.subnetNodes[e.subnetNodes.length-1].y+200}),e.combos.push({id:r.id,label:r.name,type:"rect",size:[t-40,30],style:{fill:M.combosBackground[0],stroke:M.combosColors[0],radius:4},labelCfg:{refY:1,position:"top",style:{fontSize:12}}}))}}))})),(0,P.default)(this,"renderInstanceNode",((e,t)=>{var{servers:a,subnets:r,extNetwork:i}=this.topoInfo,n=[];(0,m.default)(a).call(a,((a,l)=>{var o,{fixed_addresses:s,fixed_networks:d}=a,u=(0,h.default)((t/10*2).toFixed(0)),c=null,f=0,p=[];(0,m.default)(i).call(i,(e=>p.push(...(0,j.toJS)(e.subnets))));var v=(0,b.default)(r).call(r,(e=>-1!==(0,g.default)(p).call(p,e.id)));if(!s[0]){var{insCard:y}=this.state;c=e.subnetNodes[0].cardY,(0,m.default)(y).call(y,(e=>{e[0]===u&&e[1]===c&&(u+=(0,h.default)((t/10).toFixed(0))),Math.round(u)>=t+this.state.extendWidth&&this.setState((e=>({extendWidth:e.extendWidth+(0,h.default)((t/10).toFixed(0))})))})),n.push([u,c]),e.nodes.push({id:a.id,x:u,y:c,type:"rect",nodeType:"ins",infoIndex:l,size:[66,56],style:{radius:4,fill:"#FFFFFFFF",stroke:"active"===a.vm_state?globalCSS.successColor:W,shadowColor:"active"===a.vm_state?J:Z,shadowBlur:"active"===a.vm_state?5:4}})}var A=0;(0,m.default)(s).call(s,(r=>{var i,o=null,s=0;if((0,m.default)(v).call(v,(e=>{var t;(0,m.default)(t=e.allocation_pools).call(t,(e=>{K(r,e.start,e.end)&&(o="extNet",s=0)}))})),(0,m.default)(i=e.subnetNodes).call(i,((e,t)=>{var a;-1!==(0,g.default)(d).call(d,e.networkId)&&(0,m.default)(a=e.pools).call(a,(a=>{K(r,a.start,a.end)&&(o=e.id,s=t)}))})),e.nodes[e.nodes.length-1].id!==a.id&&o){var{insCard:p}=this.state;c=e.subnetNodes[s].cardY,(0,m.default)(p).call(p,(e=>{e[0]===u&&e[1]===c&&(u+=(0,h.default)((t/10).toFixed(0))),u>=t+this.state.extendWidth&&this.setState((e=>({extendWidth:e.extendWidth+t/10})))})),n.push([u,c]),e.nodes.push({id:a.id,x:u,y:c,type:"rect",nodeType:"ins",infoIndex:l,size:[66,56],style:{radius:4,fill:"#FFFFFFFF",stroke:"active"===a.vm_state?globalCSS.successColor:W,shadowColor:"active"===a.vm_state?J:Z,shadowBlur:"active"===a.vm_state?5:4}})}if(o){var y,{style:{stroke:I}}=e.subnetNodes[s],S=e.subnetNodes[s].y;S<c&&(f+=1);for(var x=0;x<n.length;x++){var C,w,P=(0,b.default)(C=e.edges).call(C,(e=>e.source!==a.id&&e.linePath&&e.linePath.source_x===u&&e.topAnchorNum===f&&(e.linePath.source_y>=c&&e.linePath.target_y<=S||e.linePath.source_y<=c&&e.linePath.target_y>=S))),E=(0,b.default)(w=e.nodes).call(w,(e=>e.x===u&&e.y===c&&e.id!==a.id));if(0===P.length&&0===E.length)break;u+=(0,h.default)((t/10).toFixed(0)),e.nodes[e.nodes.length-1].x=u,n[n.length-1]=[u,c],Math.round(u)>=t+this.state.extendWidth&&this.setState((e=>({extendWidth:e.extendWidth+t/10})))}e.edges.push({id:(0,_.default)(y="edge-".concat(a.id,"-")).call(y,r),target:o,targetAnchor:S>c?0:1,source:a.id,sourceAnchor:A,type:"arrowLine",topAnchorNum:f,style:{stroke:I},linePath:{source_x:u,source_y:c,target_y:S}}),A+=1}}));var I=this.getAnchorPoints(f,A-f),S=(0,b.default)(o=e.edges).call(o,(e=>e.source===a.id));(0,m.default)(S).call(S,((e,t)=>{"extNet"===e.target&&1===I[t][1]&&([I[t],I[f-1]]=[I[f-1],I[t]])})),e.nodes[e.nodes.length-1].anchorPoints=I,this.setState({insCard:n})}))})),(0,P.default)(this,"getAnchorPoints",((e,t)=>{var a=[];return e>0&&a.push(...(0,F.getAnchorData)(e,0)),t>0&&a.push(...(0,F.getAnchorData)(t,1)),a})),(0,P.default)(this,"renderG6",(()=>{D.default.registerEdge("arrowLine",{draw(e,t){var{endPoint:a,startPoint:r}=e,i=e.style.stroke;return t.addShape("path",{attrs:{path:[["M",r.x,r.y],["L",r.x,a.y]],endArrow:{path:D.default.Arrow.vee(4,8,-4),d:1},startArrow:{path:D.default.Arrow.vee(4,8,-4),d:1},stroke:i||"#C8DEFF",lineWidth:2},name:"path-shape"}),t}});var e=document.getElementById("container").scrollWidth,t={nodes:[{id:"networkImage",x:e/2,y:50,img:k.default,type:"image",size:56,clipCfg:{show:!1,type:"circle",r:15}},{id:"extNet",type:"rect",label:"extNetwork",labelCfg:{position:"right",offset:-e/2,style:{fill:"#000000"}},x:e/2,y:100,anchorPoints:[[.5,0],[0,1]],style:{radius:4,fill:"#FFFFFFFF",stroke:M.subnetsColors[0][0],width:e-10,height:20}}],edges:[{id:"edge3",target:"networkImage",source:"extNet",style:{startArrow:{path:D.default.Arrow.vee(4,6,-1),d:2},lineWidth:1,stroke:M.subnetsColors[0][0]}}],combos:[]},{servers:a}=this.topoInfo;if(a){t=z.cfg.data,this.renderRouterNode(t,e),this.extendNetworkWidth(t,e);var r=JSON.parse((0,y.default)(t));this.setState({withoutServerData:r}),this.renderInstanceNode(t,e),this.extendNetworkWidth(t,e);var i=JSON.parse((0,y.default)(t));this.setState({allData:i})}else this.renderNetworkNode(t,e),this.extendNetworkWidth(t,e);z&&(z.clear(),z.destroy());var{firstSubnetY:n,extendWidth:l}=this.state;(z=new D.default.Graph({container:"container",width:e+l,height:n,nodeStateStyles:{hover:{lineWidth:3}}})).data(t),z.render(),this.bindEvents(),this.setState({loading:!1})})),(0,P.default)(this,"extendNetworkWidth",((e,t)=>{var{subnetNodes:a,nodes:r}=e,{extendWidth:i}=this.state;i>0&&((0,m.default)(a).call(a,(e=>{e.style.width=t-50+i,e.x=(t+i)/2,e.labelCfg.offset=-(t+i)/2})),r[1].style.width=t+i-10,r[0].x=(t+i)/2,r[1].labelCfg.offset=-(t+i)/2,r[1].x=(t+i)/2),a&&a[0]&&(e.nodes=(0,_.default)(r).call(r,a))})),(0,P.default)(this,"onCheckChange",(()=>{var{firstSubnetY:e,extendWidth:t,showAll:a,withoutServerData:r,allData:i}=this.state,n=document.getElementById("container").scrollWidth,l=!a;this.setState({showAll:l});var o=n+t;l||(o=n-t),z.clear(),z.destroy(),z=null,(z=new D.default.Graph({container:"container",width:o,height:e,nodeStateStyles:{hover:{lineWidth:3}}})).data(l?i:r),z.render(),this.bindEvents()})),this.init(),this.state={firstSubnetY:290,nodeCard:[],lbCard:[],insCard:[],extendWidth:0,loading:!0,showAll:!0,withoutServerData:null,allData:null}}componentDidMount(){}get topoInfo(){return this.store.topology}initNetwork(){var e=this;return(0,w.default)((function*(){yield e.store.fetchTopoNetwork(G(G({},e.props.match.params),{},{metrics:!0})),e.renderG6()}))()}initAll(){var e=this;return(0,w.default)((function*(){yield e.store.fetchTopo(G(G({},e.props.match.params),{},{metrics:!0})),e.topoInfo.networks&&e.renderG6()}))()}initTopo(){this.initNetwork(),this.initAll()}init(){this.store=R.default,z=null,this.initTopo()}render(){var{nodeCard:e,insCard:a,loading:r,showAll:i}=this.state,{topology:n}=this.store;return E.default.createElement("div",{className:Q.default.main},E.default.createElement("div",{style:{marginBottom:16,marginTop:16,marginLeft:16}},E.default.createElement(T.default,{primaryActions:[L.default]},t("create router")),E.default.createElement(T.default,{primaryActions:[O.default]},t("Create Network")),E.default.createElement(T.default,{primaryActions:[q.default]},t("Create Instance")),E.default.createElement(x.default,{type:"primary",shape:"circle",style:{marginLeft:16},onClick:()=>this.updateGraph(),icon:E.default.createElement(C.default,null)}),E.default.createElement(S.default,{onChange:()=>this.onCheckChange(),checked:i},t("Show Instance"))),E.default.createElement(A.default,{spinning:r},E.default.createElement(I.default,{style:{margin:16},id:"card",className:Q.default.container},E.default.createElement("div",{id:"container"},n&&(0,v.default)(e).call(e,((e,t)=>E.default.createElement(H.default,{key:t,x:e.nodeCardX,y:e.nodeCardY,data:this.topoInfo,infoIndex:t}))),i?n&&(0,v.default)(a).call(a,((e,t)=>E.default.createElement(V.default,{key:t,x:e[0],y:e[1],data:this.topoInfo,infoIndex:t}))):null))))}}a.Topology=X;a.default=(0,N.inject)("rootStore")((0,N.observer)(X))},4317:function(e,t,a){"use strict";a.r(t),t.default=a.p+"asset/image/cloud.1714741099.png"},4318:function(e,t,a){"use strict";a(20)(t,"__esModule",{value:!0}),t.subnetsColors=t.combosColors=t.combosBackground=void 0;t.combosBackground=["rgba(0,104,255,0.05)","rgba(94,246,255,0.08)","rgba(236,220,255,0.08)","rgba(255,255,240,0.3)"],t.combosColors=["#9AC3FF","#A5FFF0","#ECDCFF","#FFFF00"],t.subnetsColors=[["#9AC3FF","#4C95FF","#0068FF","#0080FF","#0066CC","#0000FF"],["#CCF2EC","#92DACF","#46B1A5","#CCF2EC","#92DACF","#46B1A5"],["#ECDCFF","#D6B3FF","#BA80FF","#ECDCFF","#D6B3FF","#BA80FF"],["#FFFACD","#FFFF00","#FFD700","#FFFACD","#FFFF00","#FFD700"]]},4319:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,".index__node-tooltips--1M7su {\n  position: absolute;\n}\n.index__node-tooltips--1M7su .ant-card-body {\n  padding: 15px;\n}\n.index__image-icon--2ABo6 {\n  width: 15px;\n  height: 15px;\n  margin-right: 2px;\n}\n.index__descriptions-item--iUKkb .ant-descriptions-item-label {\n  width: 80px;\n}\n.index__descriptions-item--iUKkb .ant-descriptions-row > th,\n.index__descriptions-item--iUKkb .ant-descriptions-row > td {\n  padding-bottom: 8px;\n}\n.index__node-card-title--3zjAj {\n  font-size: 16px;\n}\n.index__card-button--1hPxO .ant-btn-primary {\n  margin-right: 6px;\n}\n.index__main--2dSfi {\n  height: 100%;\n}\n.index__main--2dSfi .ant-btn-primary {\n  margin-right: 16px;\n}\n.index__container--3ea1Q {\n  height: calc(100vh - 170px);\n  overflow-y: auto;\n}\n",""]),t.locals={"node-tooltips":"index__node-tooltips--1M7su","image-icon":"index__image-icon--2ABo6","descriptions-item":"index__descriptions-item--iUKkb","node-card-title":"index__node-card-title--3zjAj","card-button":"index__card-button--1hPxO",main:"index__main--2dSfi",container:"index__container--3ea1Q"}},4320:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71));r(733);var o=n(r(734));r(1761);var s=n(r(1762)),d=n(r(42)),u=n(r(0)),c=(r(200),r(1630)),f=n(r(4321)),p=n(r(741)),m=r(262),h=n(r(1846)),g=n(r(1999));class v extends g.default{constructor(e){super(e),(0,d.default)(this,"detailButtons",(()=>{var{data:{servers:e},infoIndex:a}=this.props,{status:r}=e[a];return[..."SHUTOFF"===r?[{name:t("Power On"),click:null}]:[{name:t("Power Off"),click:null}],{name:t("Associate IP"),click:null},{name:t("Add network"),click:null},{name:t("VNC"),click:null},{name:t("Delete"),type:"danger",click:null}]})),this.state={}}get detailInfos(){return[{title:t("Name"),dataIndex:"name",width:100,render:(e,t)=>e?u.default.createElement(m.Link,{to:"/compute/instance/detail/".concat(t.id)},e):"-"},{title:t("UUID"),dataIndex:"id"},{title:t("Status"),dataIndex:"status",isHideable:!0,render:e=>c.instanceStatus[e&&e.toLowerCase()]||"-"},{title:t("Image"),dataIndex:"image_os_distro",isHideable:!0,render:(e,t)=>u.default.createElement(p.default,{type:e,title:t.image_name}),stringify:(e,t)=>t.image_name},{title:t("Fixed IP"),dataIndex:"fixed_addresses",isHideable:!0,width:120,render:e=>e.length?(0,l.default)(e).call(e,(e=>u.default.createElement("span",{key:e},e,u.default.createElement("br",null)))):"-",stringify:e=>e.join(",")||"-"},{title:t("Floating IP"),dataIndex:"floating_addresses",isHideable:!0,width:120,render:e=>e.length?(0,l.default)(e).call(e,(e=>u.default.createElement("span",{key:e},e,u.default.createElement("br",null)))):"-"}]}render(){var{x:e,y:a}=this.props,{data:{servers:r},infoIndex:i}=this.props,n=r[i];return u.default.createElement("div",{className:h.default["node-tooltips"],style:{top:"".concat(a,"px"),left:"".concat(e-8,"px")}},u.default.createElement(o.default,{placement:"rightTop",content:this.renderCard(435,n),title:this.renderTitle(t("Instance"),n.name)},u.default.createElement("div",{style:{textAlign:"center",width:"66px",height:"50px",overflow:"hidden"}},u.default.createElement(s.default,{src:f.default,shape:"square",size:28}),u.default.createElement("div",null,n.name))))}}a.default=v},4321:function(e,t,a){"use strict";a.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAYAAACAvzbMAAAdbElEQVR4Xu3d56+1WVkH4HtCE6SFJk1kEKRKkyYCOlIDigiKRr9Yv/gXaGIyTmKif4FfrF80goKIQqjOyCAORZpUQQaRJi00QVowDyzgMHnhPavt5157XychfJhnrXWva937+Z3nvOfsfUn4IkCAAAECDQKXNIwxhAABAgQIhADRBAQIECDQJCBAmtgMIkCAAAEBogcIECBAoElAgDSxGUSAAAECAkQPECBAgECTgABpYjOIAAECBASIHiBAgACBJgEB0sRmEAECBAgIED1AgAABAk0CAqSJzSACBAgQECB6gAABAgSaBARIE5tBBAgQICBA9AABAgQINAkIkCY2gwgQIEBgdoDcNCLuGhG3QU2AAAECBxX4WES8NyI+O2vVGQFyn4j4g4i4X0TcbVbh5iVAgACBcwm8JyLeEhG/ExFvO9eIc140OkB+PSL+5Jxru4wAAQIEDivwGxHxp6OWHBkgPxERV44qzDwECBAgMEXgsoi4asTMowLkThHx/hEFmYMAAQIEpgvcOSI+0LvKqAB5TkQ8vbcY4wkQIEDgIALPjYhn9K40KkCuLb9t1VuP8QQIECAwX2D77axLe5cZESA3i4hP9xZiPAECBAgcVODmEfGZnhVHBMgDIuKNPUUYS4AAAQIHF3hgRLypZ9URAeK3r3pOwFgCBAjsI9D921gCZJ+DsyoBAgT2FhAge5+A9QkQILCogABZ9OCUTYAAgb0FBMjeJ2B9AgQILCogQBY9OGUTIEBgbwEBsvcJWJ8AAQKLCgiQRQ9O2QQIENhb4GgCZNuILwIECBA4v0Dvu58fVYAMeXvh89u7kgABAssKjPgDbgGy7PErnAABAu0CAuSMXXcStp+DkQQIEFhOQIAIkOWaVsEECOQQECACJEcnqoIAgeUEBIgAWa5pFUyAQA4BASJAcnSiKggQWE5AgAiQ5ZpWwQQI5BAQIAIkRyeqggCB5QQEiABZrmkVTIBADgEBIkBydKIqCBBYTkCACJDlmlbBBAjkEBAgAiRHJ6qCAIHlBASIAFmuaRVMgEAOAQEiQHJ0oioIEFhOQIAIkOWaVsEECOQQECACJEcnqoIAgeUEBIgAWa5pFUyAQA4BASJAcnSiKggQWE5AgAiQ5ZpWwQQI5BAQIAIkRyeqggCB5QQEiABZrmkVTIBADgEBIkBydKIqCBBYTkCACJDlmlbBBAjkEBAgAiRHJ6qCAIHlBASIAFmuaRVMgEAOAQEiQHJ0oioIEFhOQIAIkOWaVsEECOQQECACJEcnqoIAgeUEBIgAWa5pFUyAQA4BASJAcnSiKggQWE5AgAiQ5ZpWwQQI5BAQIAcOkA289+uqzglG1LCV0FtH5zYMJ0BgZwEBcuAAuTIiem/gl3Q2TYpD79yD4QQI7C+Q4l7Se0PcGFNs5BznKUDOgeQSAgSWEEhx3xUgdb3S65Xi0Ou27GoCBBIKpLiX9N4QPYHUdVaKQ68r2dUECCQUSHEvESB1ndHrleLQ67bsagIEEgqkuJf03hA9gdR1VopDryvZ1QQIJBRIcS8RIHWd0euV4tDrtuxqAgQSCqS4l/TeED2B1HVWikOvK9nVBAgkFEhxLxEgdZ3R65Xi0Ou27GoCXxMY0bvHQnlZgj/mHXEe3fvovSGOaqzujZyjM/0dyDmQXELgOwiMuGEdC+4h7lcXsxpxHt37ECAXO6Zv/++9XikOvW7LribgCeQ6PdB94x3QUynuJb03RE8gdZ2Q4tDrSnY1AQEiQC78KhAgdXeHXi8BUuft6jwCI3o3z276KvEEUvx6b4ieQOoaccSLMEPz1u3a1ccgMKJ3j8Fh20OG1+CI8+jehwCpa+lerxSHXrdlVxPwIyw/wvIjLL+F5U5IoF1gxDc/7avnGtn9nfuA7Yw4j+599H5H7UdYdZ2Q4tDrSnY1AU8gnkA8gXgCcSck0C4w4puf9tVzjez+zn3AdkacR/c+PIHUnWSvV4pDr9uyqwl4AvEE4gnEE4g7IYF2gRHf/LSvnmtk93fuA7Yz4jy699H7HbV/A6nrhBSHXleyqwl4AvEE4gnEE4g7IYF2gRHf/LSvnmtk93fuA7Yz4jy69+EJpO4ke71SHHrdll1NwBOIJxBPIJ5A3AkJtAuM+OanffVcI7u/cx+wnRHn0b2P3u+o/RtIXSekOPS6kl1N4JtPIJez+JrAFT4P5OudIEDqXhG9XgKkztvVBAhcWCDFvaT3hugJpK69Uxx6XcmuJkAgoUCKe4kAqeuMXq8Uh163ZVcTIJBQIMW9pPeG6AmkrrNSHHpdya4mQCChQIp7iQCp64xerxSHXrdlVxMgkFAgxb2k94boCaSus1Icel3JriZAIKFAinuJAKnrjF6vFIdet2VXEyCQUCDFvaT3hugJpK6zUhx6XcmuJkAgoUCKe8kpBUjCHlASAQIEmgQEyBm27j+pbzoCgwgQILCmgAARIGt2rqoJENhdQIAIkN2bUAEECKwpIEAEyJqdq2oCBHYXECACZPcmVAABAmsKCBABsmbnqpoAgd0FBIgA2b0JFUCAwJoCAkSArNm5qiZAYHcBASJAdm9CBRAgsKaAABEga3auqgkQ2F1AgAiQ3ZtQAQQIrCkgQATImp2ragIEdhcQIAJk9yZUAAECawoIEAGyZueqmgCB3QUEiADZvQkVQIDAmgICRICs2bmqJkBgdwEBIkB2b0IFECCwpoAAESBrdq6qCRDYXUCACJDdm1ABBAisKSBABMianatqAgR2FxAgAmT3JlQAAQJrCggQAbJm56qaAIHdBQSIANm9CRVAgMCaAgJEgKzZuaomQGB3AQEiQHZvQgUQILCmgAARIGt2rqoJENhdQIAIkN2bUAEECKwpIEAEyJqdq2oCBHYXECACZPcmVAABAmsKCBABsmbnqpoAgd0FBIgA2b0JFUCAwJoCAkSArNm5qiZAYHcBAXLmCK7a/TgUQIAAgbUEthDp+bosIrruvZf0rF7GjkjCAWWYggABAgQqBARIBZZLCRAgQOBbAgJENxAgQIBAk4AAaWIziAABAgQEiB4gQIAAgSYBAdLEZhABAgQICBA9QIAAAQJNAgKkic0gAgQIEBAgeoAAAQIEmgQESBObQQQIECAgQPQAAQIECDQJCJAmNoMIECBAQIDoAQIECBBoEhAgTWwGESBAgIAA0QMECBAg0CQgQJrYDCJAgACBowmQ7o3oBQIECJyQwIjPYeq+72b5QKnujZxQ49gqAQIEBMiZHhAgXhAECBA4v4AAESDn7xZXEiBA4IyAABEgXhAECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgBw6QK5uO6dsHXdY5x3bol3fOcUVEXNU5h+EECKwtIEB2CJANvefrkp7BEZHi0Dv3YDgBAvsLpLiX9N4QN8YUGznHeW5PIALkHFAuIUAgvUCK+64AqeuTXq8Uh163ZVcTIJBQIMW9pPeG6AmkrrNSHHpdya4mQCChQIp7iQCp64xerxSHXrdlVxMgkFAgxb2k94boCaSus1Icel3JriZAIKFAinuJAKnrjF6vFIdet2VXEyCQUCDFvaT3hugJpK6zUhx6XcmuJvA1gd7fYDw2xr3/FivFvUSA1LV1r1eKQ6/bsqsJfDNARvwx7jFwbn9QLEAioveG6Amk7uUgQOq8XJ1HYETv5tlNXyUCpPgJkLpG6vUa8SLM0Lx1aq4+BoERvXsMDtseMrwGR5xH9z56b4ieQOpeEikOva5kVxPwI6zr9ED3jXdAT6W4lwiQupPs9Upx6HVbdjUBASJALvwq6L0hegKpu7sIkDovV+cRGNG7eXbTV4knEP8G0tRBvYE74kWYoXmb8AxaWmBE7y4NcKb4DK/BEefRvY/eG6InkLqXRIpDryvZ1QT8CMuPsPwIy9u5uxMSaBcY8c1P++q5RnZ/5z5gOyPOo3sfnkDqTrLXK8Wh123Z1QQ8gXgC8QTiCcSdkEC7wIhvftpXzzWy+zv3AdsZcR7d++j9jtq/gdR1QopDryvZ1QQ8gXgC8QTiCcSdkEC7wIhvftpXzzWy+zv3AdsZcR7d+/AEUneSvV4pDr1uy64m4AnEE4gnEE8g7oQE2gVGfPPTvnqukd3fuQ/Yzojz6N5H73fU/g2krhNSHHpdya4m4AnEE4gnEE8g7oQE2gV8oNS32/k8EJ8HUv1q6n1i8wRSTW4AAQIXEEhxL+m9IfoRVl1vpzj0upJdTYBAQoEU9xIBUtcZvV4pDr1uy64mQCChQIp7Se8N0RNIXWelOPS6kl1NgEBCgRT3EgFS1xm9XikOvW7LriZAIKFAintJ7w3RE0hdZ6U49LqSXU2AQEKBFPcSAVLXGb1eKQ69bsuuJkAgoUCKe0nvDXG1J5DePtj+crPnazv0y3smiIgrImLv30Hv3ILhBAh0CgiQM4Ddf1LfeRiGEyBAYCUBASJAVupXtRIgkEhAgAiQRO2oFAIEVhIQIAJkpX5VKwECiQQEiABJ1I5KIUBgJQEBIkBW6le1EiCQSECACJBE7agUAgRWEhAgAmSlflUrAQKJBASIAEnUjkohQGAlAQEiQFbqV7USIJBIQIAIkETtqBQCBFYSECACZKV+VSsBAokEBIgASdSOSiFAYCUBASJAVupXtRIgkEhAgAiQRO2oFAIEVhIQIAJkpX5VKwECiQQEiABJ1I5KIUBgJQEBIkBW6le1EiCQSECACJBE7agUAgRWEhAgAmSlflUrAQKJBASIAEnUjkohQGAlAQEiQFbqV7USIJBIQIAIkETtqBQCBFYSECACZKV+VSsBAokEBIgASdSOSiFAYCUBASJAVupXtRIgkEhAgAiQRO2oFAIEVhIQIAJkpX5VKwECiQQEiABJ1I5KIUBgJQEBIkBW6le1EiCQSECACJBE7agUAgRWEhAgAmSlflUrAQKJBASIAEnUjkohQGAlAQGy0mmplQABAkcmcFlEXNWzp0t6BpexI5JwQBmmIECAAIEKAQFSgeVSAgQIEPiWgADRDQQIECDQJCBAmtgMIkCAAAEBogcIECBAoElAgDSxGUSAAAECAkQPECBAgECTQIoAeVhEvLqpfIMIECBAYC+Bh0fEa3oWH/F3ILeJiI/2FGEsAQIECBxc4LYR8bGeVUcEyLb+ByPiDj2FGEuAAAECBxP4UETcsXe1UQFydUQ8qrcY4wkQIEDgIAKvjIhH9640KkB+JSL+vLcY4wkQIEDgIAK/GhF/0bvSqADZ6nhpRDyutyDjCRAgQGCqwMsi4vEjVhgZIFs9b4mI+44ozBwECBAgMFzgrRFxv1Gzjg6Qra5fiojfj4hLRxVpHgIECBDoErg2In43Iv6qa5brDJ4RINsSN4uIHznzP7+hNfLUzDVSYPs4gp6vrs9T6FnYWAIXEdh+0+rfzvzvM6PFZgXI6DrNR2CGwIjPsun+a94ZGzMngUMICJBDKFsjq4AAyXoy6lpCQIAscUyKnCQgQCbBmvY0BATIaZyzXV5YQIDoDAIdAgKkA8/Q5QUEyPJHaAN7CgiQPfWtvbeAANn7BKy/tIAAWfr4FN8pIEA6AQ0/bQEBctrnf+q7FyCn3gH23yUgQLr4DF5cQIAsfoDK31dAgOzrb/V9BQTIvv5WX1xAgCx+gMrvEhAgXXwGn7qAADn1Djjt/QuQ0z5/u+8UECCdgIYvLSBAlj4+xe8tIED2PgHr7ykgQPbUt/byAgJk+SO0gQ4BAdKBZygBAaIHTllAgJzy6dt7t4AA6SY0wcICAmThw1P6/gICZP8zUMF+AgJkP3srH4GAADmCQ7SFZgEB0kxnIIEIAaILTllAgJzy6dt7t4AA6SY0wcICAmThw1P6/gICZP8zUMF+AgJkP3srH4GAADmCQ7SFZgEB0kxnIAH/BqIHTltAgJz2+dt9p4AnkE5Aw5cWECBLH5/i9xYQIHufgPX3FBAge+pbe3kBAbL8EdpAh4AA6cAzlIAA0QOnLCBATvn07b1bQIB0E5pgYQEBsvDhKX1/AQGy/xmoYD8BAbKfvZWPQECAHMEh2kKzgABppjOQgL8D0QOnLSBATvv87b5TwBNIJ6DhSwsIkKWPT/F7CwiQvU/A+nsKCJA99a29vIAAWf4IbaBDQIB04BlKQIDogVMWECCnfPr23i0gQLoJTbCwgABZ+PCUvr+AANn/DFSwn4AA2c/eykcgIECO4BBtoUlg6/1nR8TPNY3+1qC/jYhnRsRXO+cxnMByAgJkuSNT8ACB60XEsyLiGQPm2qZ4TkT8QkR8ZdB8piGwhIAAWeKYFDlQ4PrlyeNnB865TfV35Unky4PnNR2BtAICJO3RKGyCwA3Lk8fTJsy9Tfm88iTyxUnzm5ZAKgEBkuo4FDNR4EblyeOpE9fYpn5+eRL5wuR1TE9gdwEBsvsRKOAAAjcuTx4/fYC1tiX+oTyJfP5A61mGwC4CAmQXdoseUOAm5cnjKQdcc1vqBeVJ5HMHXtdyBA4mIEAORm2hHQRuWp48nrzD2tuSLyxPIp/daX3LEpgqIECm8pp8R4GblSePJ+1Yw7b0i8qTyGd2rsPyBIYLCJDhpCZMIHCL8uTxxAS1bCW8uDyJfCpJPcogMERAgAxhNEkigVuW8HhCopq2Ul5SQuSTyepSDoFmAQHSTGdgQoFblfB4XMLatpJeVkLkE0nrUxaBKgEBUsXl4sQCty7h8djENW6lvbyEyMeT16k8AhcVECAXJXLBAgK3LeFx2QK1biVeWULko4vUq0wCFxQQIBpjdYHblfDY3pp9pa+rSoh8ZKWi1UrgrIAA0Q8rC9y+hMdjJm3iijLv5ZPmf0UJkQ9Pmt+0BKYKCJCpvCafKHCHEh6PnrTGFh6/V+be/n9WiFxdQuRDk/ZhWgLTBATINFoTTxS4UwmPH5u0xtnw+MYSM0PkX0qIfGDSfkxLYIqAAJnCatKJAncu4fHISWtcKDwOESKvKiHy/kn7Mi2B4QICZDipCScK3KWExyMmrfHdwuMQIXJNCZH3TdqfaQkMFRAgQzlNNlHgB0p4PHzSGucJj0OEyKtLiPzXpH2alsAwAQEyjNJEEwUuLeHx0Elr1ITHIULktSVErp20X9MSGCIgQIYwmmSiwN1KeDxk0hot4XGIEHldCZH3TNq3aQl0CwiQbkITTBS4ewmPB09aoyc8DhEiry8h8u5J+zctgS4BAdLFZ/BEgXuU8HjQpDVGhMchQuQNJUTeNcnBtASaBQRIM52BEwXuWcLjAZPWGBkehwiRN5UQeeckD9MSaBIQIE1sBk0UuFcJj/tPWmP7g8BvvEXJ6CVm/rHhm0uIvGN00eYj0CogQFrljJshcJ8SHvebMXl5a5JZ4XGIJ5G3lBB52yQf0xKoEhgRINu7oM56n6Cqzbh4eYHtbdnvO2kXM588rlvyzCeRt0aEt4Gf1CQnNu32zdT2rtDNX6MCZPt8A18EsgocMjwO8SSS1Vldawlsn58jQNY6M9UeWGCP8BAiBz5kyzUJCJAmNoNORWDP8BAip9Jl6+5TgKx7diqfLJAhPITI5EM2fZeAAOniM/hYBTKFhxA51i5bf18CZP0ztIPBAhnDQ4gMPmTTDREQIEMYTXIsApnDQ4gcS5cdzz4EyPGcpZ10CqwQHkKk85ANHyogQIZymmxlgbdHxDMjYvtr7cxf21/ZPzsi7p25SLWdhIAAOYljtsnzCmxvNriFyPa+URm/tvf32sJje7NIXwT2FhAge5+A9dMJbG97voXIG5NV9sASHtvb1PsikEFAgGQ4BTWkE/jPEiLbBzJl+No+EGt78vjBDMWogUARECBagcB3ENg+T3x7Etk+GnbPr+2jeLfw2D7X3ReBTAICJNNpqCWdwHvL25+/ZqfKHlbenv6uO61vWQLfTUCA6A8CFxF4XwmRaw4s9YgSHnc58LqWI3BeAQFyXinXnbTA+0uIvOpACo8s4XHnA61nGQItAikCpKVwYwhcSODny413xOfUXHf+D5YQeeVk+keVPdxxwjpfLXv4mwlzm5JAtcCMF2p1EQYQOCPwjHIDvt4ElQ+XG/ArJsy9TfmYUvvtJ8z/lVL7cybMbUoCTQICpInNoMkCTy834utPWOcj5Ubc9UlsF6hr+2jnZ0XE7SbU/OVS83MnzG1KAs0CAqSZzsDJAk8rN+QbTljnY+WG/E+D5v7JUuttBs13dpovllqfN2FuUxLoEhAgXXwGTxb4mXJjvtGEdT5Rbswv65z7caXGW3XOc6HhXyg1/v2EuU1JoFtAgHQTmmCywFPLDfp7JqzzyXKDfknj3E8otd2ycfx3G/Z/pbbnT5jblASGCAiQIYwmmSzwU+VGfZMJ63y63KhfVDn3k0pNN68cd57LP1dq+sfzXOwaAnsJCJC95K1bK/CUcsP+3tqB57j+s+WG/cJzXLtd8uRSy03PeX3NZf9banlBzSDXEthDQIDsoW7NVoHZN+5fjIiLfde/PQ39dURkCLJWR+MIDBEQIEMYTXJAgZk/Ovp8RGwh8p3+3WH795gtPG48Yb+tP0qbUIopCZxPQICcz8lVuQSeWH6EdIsJZW2/+bSFyHV/bXb7teItPGb8Rtinyo+tXjxhP6YkME1AgEyjNfFkgceXt0mf8RtQXyoh8o0/3Nv+sHELjxtM2NP2m2Db286/dMLcpiQwVUCATOU1+WSBmX+Dsb11yPYksn1t4THjrVVG/S3KZGbTE7iwgADRGasLPLb8OOvWEzayvXnh9jXjdfLx8mOrl0+o25QEDiIw44VxkMItQuCMwPa21Nv7UN12EZWPlvC4cpF6lUngggICRGMci8DMNzMcaTTrzRxH1mguAucSECDnYnLRIgI/Xp5Evi9pvf9Tnjz+OWl9yiJQJSBAqrhcvIDAo0uI3CFZrR8q4XF1srqUQ6BZQIA00xmYWGDmpwK2bPtQn4bYUpsxBJoFBEgznYHJBbbPJX92RNxp5zo/UP7O41Cfx77zdi1/SgIC5JRO+/T2+qPlx1nfv9PW/7v82Opfd1rfsgSmCgiQqbwmTyDwiBIidzlwLe8r4XHNgde1HIGDCQiQg1FbaEeBh5UQueuBanhvCY/XHGg9yxDYRUCA7MJu0R0EHlpC5NLJa19bwuO1k9cxPYHdBQTI7keggAMKPKSEyN0mrfmeEh6vmzS/aQmkEhAgqY5DMQcQeHAJkbsPXuvdJTxeP3he0xFIKyBA0h6NwiYKPKiEyD0GrfGuEh5vGDSfaQgsISBAljgmRU4QeED5O5Ef6pz7P8rfebypcx7DCSwnIECWOzIFDxS4f3kSuVfjnO8oTx5vbhxvGIGlBQTI0sen+AECP1xC5N6Vc729hMe/V45zOYGjERAgR3OUNtIhcN+I+MuI2H6sdZ6v7cdVvxwRbz3Pxa4hcKwCAuRYT9a+agW2D6P6w4j4tYsM/LOI+O2I2D4UyheBkxYQICd9/DZ/AYHfiojfjIjtqeQG5b9/qTxt/HFE/BE1AgS+LiBAdAKBCwts4XHP8p/eGRFbiPgiQOCMgADRDgQIECDQJCBAmtgMIkCAAAEBogcIECBAoElAgDSxGUSAAAECAkQPECBAgECTgABpYjOIAAECBASIHiBAgACBJgEB0sRmEAECBAgIED1AgAABAk0CAqSJzSACBAgQECB6gAABAgSaBARIE5tBBAgQICBA9AABAgQINAkIkCY2gwgQIEBAgOgBAgQIEGgSECBNbAYRIECAwP8DtIYy6y4iExsAAAAASUVORK5CYII="},4322:function(e,t,a){"use strict";a.r(t),t.default=a.p+"asset/image/router.1714741099.png"},4323:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.RouterDetail=void 0;var l=r(485),o=r(720),s=n(r(1627)),d=r(1651),u=n(r(4324)),c=n(r(4325)),f=n(r(4326)),p=n(r(1997));class m extends s.default{get name(){return t("router")}get policy(){return"get_router"}get listUrl(){return this.getRoutePath("router")}get actionConfigs(){return this.isAdminPage?p.default.adminConfigs:p.default.actionConfigs}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Status"),dataIndex:"status",valueMap:d.routerStatus},{title:t("Admin State"),dataIndex:"admin_state_up",render:e=>(0,d.getRouterState)(e)||"-"},{title:t("Project ID"),dataIndex:"tenant_id",hidden:!this.isAdminPage},{title:t("Description"),dataIndex:"description"},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{title:t("Updated At"),dataIndex:"updated_at",valueRender:"toLocalTime"}]}get tabs(){return[{title:t("Detail"),key:"detail",component:u.default},{title:t("Ports"),key:"ports",component:c.default},{title:t("Static Routes"),key:"staticRoutes",component:f.default}]}init(){this.store=new o.RouterStore}}a.RouterDetail=m;a.default=(0,l.inject)("rootStore")((0,l.observer)(m))},4324:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(71)),o=n(r(0)),s=r(485),d=n(r(1633));class u extends d.default{get leftCards(){return[this.aZoneCard]}get rightCards(){return[this.externalNetInfo]}get externalNetInfo(){var e=[{label:t("Network Name"),dataIndex:"externalNetworkName"},{label:t("Network ID"),dataIndex:"externalNetworkId"},{label:t("SNAT Enabled"),dataIndex:"external_gateway_info.enable_snat",valueRender:"yesNo"},{label:t("External Fixed IPs"),dataIndex:"external_gateway_info.external_fixed_ips",render:e=>e&&0!==e.length?(0,l.default)(e).call(e,((e,a)=>o.default.createElement("div",{key:"ip-".concat(a)},o.default.createElement("div",{key:e.subnet_id},o.default.createElement("b",null,t("Subnet ID")),": ",e.subnet_id),o.default.createElement("div",{key:e.ip_address},o.default.createElement("b",null,t("IP Address")),": ",e.ip_address),o.default.createElement("div",{style:{marginBottom:"8px"}})))):"-"}];return{title:t("External Network Info"),options:e,labelCol:4}}get aZoneCard(){var e=[{label:t("Current Availability Zones"),dataIndex:"availability_zones",render:e=>(e||[]).join(",")||"-"},{label:t("Availability Zone Hints"),dataIndex:"availability_zone_hints",render:e=>(e||[]).join(",")||"-"}];return{title:t("Availability Zone Info"),options:e}}}a.BaseDetail=u;a.default=(0,s.inject)("rootStore")((0,s.observer)(u))},4325:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Ports=void 0;var p=f(r(72)),m=f(r(71)),h=f(r(61)),g=f(r(42)),v=f(r(0)),_=r(485),b=f(r(1626)),y=r(1650),A=r(732),I=r(202),S=["silent"],x=["tab"];function C(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class w extends b.default{constructor(){super(...arguments),(0,g.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("routerPortDetail"),routeParamsFunc:e=>({routerId:this.id,id:e.id})},{title:t("IP Address"),dataIndex:"fixed_ips",isHideable:!0,render:e=>e&&0!==e.length?(0,m.default)(e).call(e,(e=>v.default.createElement("div",{key:e.ip_address},e.ip_address))):"-",stringify:e=>e&&0!==e.length?(0,m.default)(e).call(e,(e=>e.ip_address)).join(","):"-"},{title:t("Mac Address"),dataIndex:"mac_address",isHideable:!0},{title:t("Associated Resources"),dataIndex:"device_owner",isHideable:!0},{title:t("Status"),dataIndex:"status",valueMap:y.portStatus},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]))}init(){this.store=new A.PortStore}get policy(){return"get_port"}get name(){return t("ports")}get id(){return this.params.id}getData(){var e=arguments,t=this;return(0,h.default)((function*(){var a=e.length>0&&void 0!==e[0]?e[0]:{},{silent:r}=a,i=(0,p.default)(a,S);r&&(t.list.silent=!0);var{id:n}=t.props.match.params,{tab:l}=i,f=(0,p.default)(i,x);t.fetchListWithTry((0,h.default)((function*(){yield t.store.fetchList(function(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=C(Object(i),!0)).call(a,(function(t){(0,g.default)(e,t,i[t])})):d?u(e,d(i)):s(r=C(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}({device_id:n},f)),t.list.silent=!1})))}))()}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Status"),name:"status",options:(0,I.getOptions)(y.portStatus)}]}}a.Ports=w;a.default=(0,_.inject)("rootStore")((0,_.observer)(w))},4326:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.StaticRouters=void 0;var l=n(r(42)),o=r(485),s=n(r(1626)),d=n(r(765)),u=n(r(4327));class c extends s.default{constructor(){super(...arguments),(0,l.default)(this,"getColumns",(()=>[{title:t("Destination CIDR"),dataIndex:"destination"},{title:t("Next Hop"),dataIndex:"nexthop",isHideable:!0}]))}init(){this.store=d.default}get policy(){return"get_router"}get name(){return t("static routers")}get actionConfigs(){return this.isAdminPage?u.default.actionConfigsAdmin:u.default.actionConfigs}get searchFilters(){return[]}}a.StaticRouters=c;a.default=(0,o.inject)("rootStore")((0,o.observer)(c))},4327:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(4328)),l=i(a(4329)),o={rowActions:{firstAction:l.default},batchActions:[l.default],primaryActions:[n.default]},s={rowActions:{firstAction:l.default},batchActions:[l.default],primaryActions:[]};t.default={actionConfigs:o,actionConfigsAdmin:s}},4328:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var l=n(r(88)),o=n(r(42)),s=r(485),d=n(r(765)),u=r(1625);class c extends u.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",((e,t)=>{var{match:{params:{id:a}={}}={}}=t,r=[e];return this.store.addStaticRoute({id:a,routes:r})}))}init(){this.store=d.default}get name(){return t("Create static route")}get defaultValue(){return{}}get messageHasItemName(){return!1}get formItems(){return[{name:"destination",label:t("Destination CIDR"),type:"input",required:!0},{name:"nexthop",label:t("Next Hop"),type:"input",required:!0}]}}a.Create=c,(0,o.default)(c,"id","create"),(0,o.default)(c,"title",t("Create Static Route")),(0,o.default)(c,"policy","update_router"),(0,o.default)(c,"allowed",(()=>l.default.resolve(!0)));a.default=(0,s.inject)("rootStore")((0,s.observer)(c))},4329:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(93)),o=n(r(42)),s=r(1625),d=n(r(765));class u extends s.ConfirmAction{constructor(){super(...arguments),(0,o.default)(this,"policy","update_router"),(0,o.default)(this,"getItemName",(e=>{var t,{destination:a,nexthop:r}=e;return(0,l.default)(t="".concat(a,"(")).call(t,r,")")})),(0,o.default)(this,"onSubmit",(e=>{var{destination:t,nexthop:a,router_id:r}=e,i=[{destination:t,nexthop:a}];return d.default.removeStaticRoute({id:r,routes:i})}))}get id(){return"delete"}get title(){return t("Delete Static Route")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete static route")}}a.default=u},4330:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.PortDetail=void 0;var l=r(485),o=r(732),s=n(r(1627)),d=r(1650),u=n(r(4331));class c extends s.default{get name(){return t("port")}get policy(){return"get_port"}get listUrl(){var{routerId:e}=this.params;return this.getRoutePath("routerDetail",{id:e},{tab:"interfaces"})}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Status"),dataIndex:"status",valueMap:d.portStatus},{title:t("Project ID"),dataIndex:"tenant_id",hidden:!this.isAdminPage},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{title:t("Updated At"),dataIndex:"updated_at",valueRender:"toLocalTime"}]}get tabs(){return[{title:t("Detail"),key:"detail",component:u.default}]}init(){this.store=new o.PortStore}}a.PortDetail=c;a.default=(0,l.inject)("rootStore")((0,l.observer)(c))},4331:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(71)),o=n(r(43)),s=n(r(261)),d=n(r(0)),u=r(485),c=n(r(1633));class f extends c.default{get leftCards(){var e=[this.portInfo],{dns_assignment:t=[],fixed_ips:a=[],deviceOwner:r={}}=this.detailData;return t.length>0&&e.push(this.dnsAssignment),a.length>0&&e.push(this.fixedIps),r&&this.isAdmin&&e.push(this.deviceOwner),e.push(this.binding),e}get portInfo(){var e=[{label:t("Network Name"),dataIndex:"network_name"},{label:t("Network ID"),dataIndex:"network_id"},{label:t("MAC Address"),dataIndex:"mac_address"},{label:t("Port Security Enabled"),dataIndex:"port_security_enabled",valueRender:"yesNo"},{label:t("DNS Name"),dataIndex:"dns_name",hidden:!this.isAdmin}];return this.detailData.mac_state&&e.push({label:t("MAC Learning State"),dataIndex:"mac_state"}),this.detailData.qos_policy_id&&e.push({label:t("QoS Policy ID"),dataIndex:"qos_policy_id"}),{title:t("Port Info"),options:e}}get dnsAssignment(){var e=this.detailData.dns_assignment[0]||{},{hostname:a,ip_address:r}=e,i=[{label:t("Hostname"),dataIndex:"dns_assignment",render:()=>a},{label:t("IP Address"),dataIndex:"ip_address",render:()=>r}];return{title:t("DNS Assignment"),options:i}}get fixedIps(){var e=this.detailData.fixed_ips[0]||{},{ip_address:a,subnet_id:r}=e,i=[{label:t("IP Address"),dataIndex:"ip_address",render:()=>a},{label:t("Subnet ID"),dataIndex:"subnet_id",render:()=>r}];return{title:t("Fixed IPs"),options:i}}get deviceOwner(){var e=[{label:t("Device Owner"),dataIndex:"device_owner"},{label:t("Device ID"),dataIndex:"device_id"}];return{title:t("Attached Device"),options:e}}get binding(){var e=[{label:t("VNIC Type"),dataIndex:"binding__vnic_type"}];if(this.detailData.binding__host_id){var a=[{label:t("Host"),dataIndex:"binding__host_id"},{label:t("Profile"),dataIndex:"binding__profile",render:e=>{var t;return!e||(0,s.default)(e)?"-":(0,l.default)(t=(0,o.default)(e)).call(t,(t=>d.default.createElement("div",{key:t},d.default.createElement("b",null,t),": ",d.default.createElement("b",null,e[t]))))}},{label:t("VIF Type"),dataIndex:"binding__vif_type"},{label:t("VIF Details"),dataIndex:"binding__vif_details",render:e=>{var t;return!e||(0,s.default)(e)?"-":(0,l.default)(t=(0,o.default)(e)).call(t,(t=>d.default.createElement("div",{key:t},d.default.createElement("b",null,t)," ",d.default.createElement("span",null,e[t].toString()))))}}];e=[...e,...a]}return{title:t("Binding"),options:e}}}a.BaseDetail=f;a.default=(0,u.inject)("rootStore")((0,u.observer)(f))},4332:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.PortDetail=void 0;var l=n(r(203)),o=n(r(39)),s=r(485),d=r(714),u=n(r(1627)),c=r(717),f=n(r(4333)),p=n(r(4338)),m=n(r(4342)),h=n(r(4346)),g=n(r(1972));class v extends u.default{get name(){return t("port")}get policy(){return"get_port"}get listUrl(){var{networkId:e,subnetId:t,instanceId:a}=this.params;return this.isSubnetPortDetail?this.getRoutePath("subnetDetail",{id:t,networkId:e},{tab:"ports"}):this.isNetworkPortDetail?this.getRoutePath("networkDetail",{id:e},{tab:"ports"}):this.isInstancePortDetail?this.getRoutePath("instanceDetail",{id:a},{tab:"interface"}):this.getRoutePath("port")}get isSubnetPortDetail(){var e;return(0,l.default)(e=this.path).call(e,"subnet")}get isNetworkPortDetail(){var e;return(0,l.default)(e=this.path).call(e,"networks")&&!this.isSubnetPortDetail}get isInstancePortDetail(){var e;return(0,l.default)(e=this.path).call(e,"instance")}get actionConfigs(){return this.isAdminPage?g.default.adminActions:g.default.actionConfigs}getActionData(){return this.detailData.itemInList||{}}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{title:t("Status"),dataIndex:"status",valueMap:c.networkStatus},{title:t("Owned Network"),dataIndex:"itemInList.network_name"},{title:t("Network ID"),dataIndex:"network_id"},{title:t("Port Security Enabled"),dataIndex:"port_security_enabled",valueRender:"yesNo"},{title:t("Mac Address"),dataIndex:"mac_address"},{title:t("Description"),dataIndex:"description"}]}get tabs(){var e=[{title:t("Detail"),key:"detail",component:h.default},{title:t("Fixed IPs"),key:"fixed_ips",component:f.default},{title:t("Security Groups"),key:"security_groups",component:p.default},{title:t("Allowed Address Pairs"),key:"allowed_address_pair",component:m.default}],{port_security_enabled:a}=this.detailData;return a?e:(0,o.default)(e).call(e,(e=>"security_groups"!==e.key))}init(){this.store=new d.PortStore}}a.PortDetail=v;a.default=(0,s.inject)("rootStore")((0,s.observer)(v))},4333:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.FixedIP=void 0;var l=n(r(42)),o=r(485),s=n(r(1626)),d=r(4334),u=n(r(4335));class c extends s.default{constructor(){super(...arguments),(0,l.default)(this,"getColumns",(()=>[{title:t("IP Address"),dataIndex:"ip_address"},{title:t("Floating IP"),dataIndex:"fip",render:e=>0===e.length?"-":e[0].floating_ip_address},{title:t("Owned Subnet"),dataIndex:"subnet",render:e=>e&&e.name||"-"}]))}init(){this.store=new d.FixedIpStore,this.downloadStore=new d.FixedIpStore}get rowKey(){return"ip_address"}get policy(){return"get_port"}get name(){return t("Fixed IP")}get actionConfigs(){return this.isAdminPage?u.default.adminConfigs:u.default.actionConfigs}get hideCustom(){return!0}get searchFilters(){return[{label:t("IP Address"),name:"ip_address"},{label:t("Owned Subnet"),name:"subnet",filterFunc:(e,t)=>e.name===t}]}}a.FixedIP=c;a.default=(0,o.inject)("rootStore")((0,o.observer)(c))},4334:function(e,t,a){"use strict";var r=a(43),i=a(54),n=a(39),l=a(29),o=a(33),s=a(55),d=a(56),u=a(20),c=a(22);u(t,"__esModule",{value:!0}),t.default=t.FixedIpStore=void 0;var f=c(a(419)),p=c(a(735)),m=c(a(71)),h=c(a(88)),g=c(a(33)),v=c(a(42)),_=c(a(61)),b=c(a(72)),y=c(a(290)),A=c(a(415)),I=c(a(60)),S=c(a(66)),x=["all_projects"];function C(e,t){var a=r(e);if(i){var o=i(e);t&&(o=n(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?o(a=C(Object(i),!0)).call(a,(function(t){(0,v.default)(e,t,i[t])})):s?d(e,s(i)):o(r=C(Object(i))).call(r,(function(t){u(e,t,l(i,t))}))}return e}class P extends S.default{get client(){return I.default.neutron.ports}get paramsFunc(){return e=>{var{all_projects:t}=e;return(0,b.default)(e,x)}}getItemFloatingIPs(e,t){return(0,_.default)((function*(){return A.default.pureFetchList({fixed_ip_address:e,port_id:t})}))()}listDidFetch(e){var t=this;return(0,_.default)((function*(){if(0===e.length)return[];var a=e[0],{fixed_ips:r=[],id:i}=a,n=(0,f.default)(new p.default((0,m.default)(r).call(r,(e=>e.subnet_id)))),l=yield h.default.all((0,m.default)(n).call(n,(e=>y.default.fetchSubnetDetail({id:e})))),o={};(0,g.default)(l).call(l,(e=>{o[e.id]=e}));var s=yield h.default.all((0,m.default)(r).call(r,(e=>t.getItemFloatingIPs(e.ip_address,i))));return(0,m.default)(r).call(r,((e,t)=>w(w({},e),{},{subnet:o[e.subnet_id],fip:s[t],port:a})))}))()}}t.FixedIpStore=P;var E=new P;t.default=E},4335:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(4336)),l=i(a(4337)),o={rowActions:{firstAction:l.default},batchActions:[l.default],primaryActions:[n.default]},s={rowActions:{firstAction:l.default},batchActions:[],primaryActions:[]};t.default={actionConfigs:o,adminConfigs:s}},4336:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.AllocateIP=void 0;var l=n(r(71)),o=n(r(88)),s=n(r(61)),d=n(r(42)),u=r(485),c=r(1625),f=n(r(714)),p=r(290),m=r(491);class h extends c.ModalAction{constructor(){super(...arguments),(0,d.default)(this,"onSubmit",(e=>{var{fixed_ips:t}=e,a=(0,l.default)(t).call(t,(e=>{var t={subnet_id:e.subnet};return e.ip_address&&"manual"===e.ip_address.type&&(t.ip_address=e.ip_address.ip),t}));return f.default.update(this.item,{fixed_ips:[...a,...this.item.fixed_ips]})}))}get name(){return t("Allocate IP")}init(){this.networkStore=new p.NetworkStore,this.subnetStore=new m.SubnetStore,this.getNetworkDetail(this.item.network_id),this.getSubnets(this.item.network_id)}getSubnets(e){var t=this;return(0,s.default)((function*(){var a=yield t.subnetStore.fetchList({network_id:e});t.setState({subnetDetails:a||[]})}))()}getNetworkDetail(e){var t=this;return(0,s.default)((function*(){var a=yield t.networkStore.fetchDetail({id:e});t.updateFormValue("network_name",a.name)}))()}get defaultValue(){return{network_id:this.item.network_id}}get isAllowed(){return!0}static get modalSize(){return"large"}get messageHasItemName(){return!1}get formItems(){var{subnetDetails:e=[]}=this.state;return[{name:"network_id",label:t("Owned Network ID"),type:"label"},{name:"network_name",label:t("Owned Network"),type:"label"},{name:"fixed_ips",label:t("Owned Subnet"),type:"ip-distributor",subnets:e,required:!0}]}}a.AllocateIP=h,(0,d.default)(h,"id","allocate-ip"),(0,d.default)(h,"title",t("Allocate IP")),(0,d.default)(h,"policy","update_port:fixed_ips:ip_address"),(0,d.default)(h,"allowed",(()=>o.default.resolve(!0)));a.default=(0,u.inject)("rootStore")((0,u.observer)(h))},4337:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(33)),o=n(r(39)),s=n(r(88)),d=n(r(42)),u=r(1625),c=n(r(714));class f extends u.ConfirmAction{constructor(){super(...arguments),(0,d.default)(this,"getItemName",(e=>e.ip_address)),(0,d.default)(this,"policy","update_port"),(0,d.default)(this,"onSubmit",((e,t,a,r,i)=>{var{port:{id:n,fixed_ips:d=[]}={}}=e,u=d;if(a){if(0!==r)return s.default.resolve();(0,l.default)(i).call(i,(e=>{var{subnet_id:t,ip_address:a}=e;u=(0,o.default)(u).call(u,(e=>e.ip_address!==a||e.subnet_id!==t))}))}else{var{subnet_id:f,ip_address:p}=e;u=(0,o.default)(d).call(d,(e=>e.ip_address!==p||e.subnet_id!==f))}return c.default.update({id:n},{fixed_ips:u})}))}get id(){return"delete"}get title(){return t("Release Fixed IP")}get buttonText(){return t("Release")}get isDanger(){return!0}get actionName(){return t("release fixed ip")}get passiveAction(){return t("be released")}}a.default=f},4338:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.SecurityGroup=void 0;var l=n(r(71));r(416);var o=n(r(417));r(500);var s=n(r(504)),d=n(r(1832));r(727);var u=n(r(729)),c=n(r(413));r(1631);var f=n(r(1632));r(1628);var p=n(r(1629));r(288);var m=n(r(287));r(1681);var h=n(r(1682)),g=n(r(42));r(1843);var v=n(r(1844)),_=n(r(0)),b=r(485),y=r(714),A=(r(200),n(r(1973))),I=r(262),S=n(r(5)),x=r(41),C=(r(706),n(r(1765))),w=n(r(1683)),P=r(422),E=r(202),D=r(709),k=n(r(4339)),N=n(r(4340)),{Panel:R}=v.default;class M extends _.default.Component{constructor(e){super(e),(0,g.default)(this,"refreshSecurityGroup",(()=>{this.store.fetchSecurityGroupsDetail(this.portId)})),this.store=new y.PortStore}componentDidMount(){this.refreshSecurityGroup()}getDetailUrl(e){var t=this.isAdminPage?"securityGroupDetailAdmin":"securityGroupDetail";return(0,D.getPath)({key:t,params:{id:e}})}get portId(){var{detail:{id:e}}=this.props;return e}get isAdminPage(){var{pathname:e}=this.props.location;return(0,E.isAdminPage)(e)}renderPanelTitle(e){var{security_groups:{data:a}}=this.store,r=this.getDetailUrl(e.id);return _.default.createElement(f.default,null,_.default.createElement(p.default,{span:18},_.default.createElement("span",null,t("Security Group")),_.default.createElement(h.default,{type:"vertical",className:N.default["header-divider"]}),_.default.createElement(m.default,{type:"link"},e.name)),_.default.createElement(p.default,{span:6},!this.isAdminPage&&_.default.createElement(_.default.Fragment,null,_.default.createElement(I.Link,{style:{fontSize:12,marginRight:16},to:r},t("Edit Rule"))),!this.isAdminPage&&1!==a.length&&_.default.createElement(_.default.Fragment,null,_.default.createElement(w.default,{actions:{firstAction:k.default},onFinishAction:this.refreshSecurityGroup,item:e,containerProps:this.props},t("Detach")))))}renderPanel(e,t){return _.default.createElement(R,{header:this.renderPanelTitle(e,t),key:t,className:N.default.panel},_.default.createElement(u.default,(0,c.default)({size:"middle",pagination:!1,bordered:!1,rowKey:"id"},this.state,{columns:(0,P.getSelfColumns)(this),dataSource:e.security_group_rules?(0,x.toJS)(e.security_group_rules):null})))}render(){var e,{security_groups:t}=this.store;return _.default.createElement("div",{className:(0,S.default)(N.default.wrapper,this.className)},this.isAdminPage?null:_.default.createElement("div",{style:{marginBottom:20}},_.default.createElement(C.default,{containerProps:this.props,primaryActions:[A.default],onFinishAction:this.refreshSecurityGroup})),_.default.createElement(o.default,{spinning:t.isLoading},t.data&&0!==t.data.length?_.default.createElement(v.default,{className:N.default.collapse,accordion:!0,bordered:!1,expandIcon:e=>{var{isActive:t}=e;return _.default.createElement(d.default,{rotate:t?90:0})}},(0,l.default)(e=t.data).call(e,((e,t)=>this.renderPanel(e,t)))):_.default.createElement(s.default,{image:s.default.PRESENTED_IMAGE_SIMPLE,style:{backgroundColor:"white",padding:"32px 0"}})))}}a.SecurityGroup=M;a.default=(0,b.inject)("rootStore")((0,b.observer)(M))},4339:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(39)),o=n(r(42)),s=r(1625),d=n(r(714));class u extends s.ConfirmAction{constructor(){super(...arguments),(0,o.default)(this,"policy","update_port"),(0,o.default)(this,"allowedCheckFunc",(()=>!0)),(0,o.default)(this,"onSubmit",(e=>{var{port:{id:t,security_groups:a=[]}={}}=e,r={security_groups:(0,l.default)(a).call(a,(t=>t!==e.id))};return d.default.update({id:t},r)}))}get id(){return"detach"}get title(){return t("Detach Security Group")}get isDanger(){return!0}get buttonText(){return t("Detach")}get actionName(){return t("detach security group")}}a.default=u},4340:function(e,t,a){var r=a(4341);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,i);r.locals&&(e.exports=r.locals)},4341:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  input */\n/*  background */\n/* button */\n/*  shadow */\n/*  font */\n/*  animation */\n/*  size */\n/*  sider */\n.index__layout-header-menu-search-border--1BNAr {\n  border: none;\n}\n.index__vertical-center--2FFPK {\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n/* login */\n.index__wrapper--3LuNN {\n  min-height: calc(100vh - 108px);\n  padding: 0 16px;\n}\n.index__collapse--3_l12 {\n  margin-bottom: 24px;\n  overflow: hidden;\n}\n.index__panel--3V7V- {\n  margin-bottom: 24px;\n  padding-top: 12px;\n  padding-bottom: 12px;\n  font-size: larger;\n  background: #fff;\n}\n.index__header-divider--EyyRf {\n  width: 2px;\n  margin: 0 5px;\n  background-color: rgba(0, 0, 0, 0.45);\n}\n.index__image--XS90m {\n  width: 100px;\n  padding: 10px;\n}\n.index__radio-button--2oJLs .ant-radio-button-wrapper {\n  width: 250px;\n  height: 100px;\n  margin-right: 40px;\n  padding: 15px;\n}\n.index__security-group-text--1Hv_J {\n  font-size: 14px;\n}\n",""]),t.locals={primaryColor:"#0c63fa",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"50px",productsColumnWidth:"192px","layout-header-menu-search-border":"index__layout-header-menu-search-border--1BNAr","vertical-center":"index__vertical-center--2FFPK",wrapper:"index__wrapper--3LuNN",collapse:"index__collapse--3_l12",panel:"index__panel--3V7V-","header-divider":"index__header-divider--EyyRf",image:"index__image--XS90m","radio-button":"index__radio-button--2oJLs","security-group-text":"index__security-group-text--1Hv_J"}},4342:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.AllowedAddressPair=void 0;var p=f(r(71)),m=f(r(61)),h=f(r(42)),g=r(485),v=f(r(1626)),_=f(r(714)),b=f(r(503)),y=f(r(4343));function A(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=A(Object(i),!0)).call(a,(function(t){(0,h.default)(e,t,i[t])})):d?u(e,d(i)):s(r=A(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class S extends v.default{constructor(){super(...arguments),(0,h.default)(this,"getDownloadData",(()=>this.props.detail.allowed_address_pairs)),(0,h.default)(this,"getColumns",(()=>[{title:t("IP Address"),dataIndex:"ip_address"},{title:t("Mac Address"),dataIndex:"mac_address"}]))}init(){this.store=_.default,this.store.setDetail(this.props.detail)}get list(){var e,t=new b.default;this.props.detail.allowed_address_pairs&&t.update({data:(0,p.default)(e=this.props.detail.allowed_address_pairs||[]).call(e,((e,t)=>I(I({},e),{},{id:"port_detail_allowed_address_pair_".concat(t)})))});return t}get isLoading(){return!1}getData(){return(0,m.default)((function*(){}))()}get policy(){return"get_port"}get name(){return t("Allowed Address Pairs")}get actionConfigs(){return this.isAdminPage?y.default.adminConfigs:y.default.actionConfigs}get hideCustom(){return!0}get searchFilters(){return[{label:t("IP Address"),name:"ip_address"},{label:t("Mac Address"),name:"mac_address"}]}}a.AllowedAddressPair=S;a.default=(0,g.inject)("rootStore")((0,g.observer)(S))},4343:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(4344)),l=i(a(4345)),o={rowActions:{firstAction:l.default},batchActions:[],primaryActions:[n.default]},s={rowActions:{firstAction:l.default},batchActions:[],primaryActions:[]};t.default={actionConfigs:o,adminConfigs:s}},4344:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.CreateAllowedAddressPair=void 0;var l=n(r(1636)),o=n(r(88)),s=n(r(42)),d=n(r(261)),u=r(485),c=r(1625),f=n(r(714)),p=r(707),{isIpCidr:m,isIPv6Cidr:h}=p.ipValidate;class g extends c.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{allowed_address_pairs:t=[]}=this.item,{ip_address:a,mac_address:r}=e,i={ip_address:a};return"manual"===r.type&&(i.mac_address=r.mac),f.default.update(this.item,{allowed_address_pairs:[i,...t]}).then((e=>{f.default.setDetail(e.port)}))})),(0,s.default)(this,"checkCidr",(e=>{if((0,d.default)(e))return!1;var{ip_version:t="ipv4"}=this.state;return!("ipv4"===t&&!m(e))&&!("ipv6"===t&&!h(e))}))}init(){this.store=f.default}get name(){return t("create allowed address pair")}get instanceName(){return(0,l.default)(this).ip_address}get isAllowed(){return!0}static get modalSize(){return"middle"}get defaultValue(){return{ip_version:"ipv4"}}get formItems(){return[{name:"ip_version",label:t("IP Version"),type:"select",options:[{label:"ipv4",value:"ipv4"},{label:"ipv6",value:"ipv6"}],onChange:e=>{this.setState({ip_version:e},(()=>{this.formRef.current.validateFields()}))},required:!0},{name:"ip_address",label:t("CIDR"),type:"input",required:!0,validator:(e,a)=>this.checkCidr(a)?o.default.resolve():o.default.reject(new Error(t("Invalid CIDR.")))},{name:"mac_address",label:t("Mac Address"),wrapperCol:{span:16},required:!0,type:"mac-address",options:[{label:t("From port"),value:"auto"},{label:t("Manual input"),value:"manual"}]}]}}a.CreateAllowedAddressPair=g,(0,s.default)(g,"id","create-ip"),(0,s.default)(g,"title",t("Create Allowed Address Pair")),(0,s.default)(g,"policy","update_port"),(0,s.default)(g,"allowed",(()=>o.default.resolve(!0)));a.default=(0,u.inject)("rootStore")((0,u.observer)(g))},4345:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(39)),o=n(r(61)),s=n(r(42)),d=r(1625),u=n(r(714));class c extends d.ConfirmAction{constructor(){super(...arguments),(0,s.default)(this,"getItemName",(e=>e.ip_address)),(0,s.default)(this,"policy","update_port"),(0,s.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e))),(0,s.default)(this,"onSubmit",function(){var e=(0,o.default)((function*(e,t){var{allowed_address_pairs:a=[],id:r}=t.detail,i=(0,l.default)(a).call(a,(t=>t.ip_address!==e.ip_address));return u.default.update({id:r},{allowed_address_pairs:i}).then((e=>{u.default.setDetail(e.port)}))}));return function(t,a){return e.apply(this,arguments)}}())}get id(){return"delete"}get title(){return t("Delete Allowed Address Pair")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete allowed address pair")}isOwnerOrAdmin(){return!0}}a.default=c},4346:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(93)),o=r(485),s=n(r(1633)),d=r(81);class u extends s.default{get leftCards(){return[this.baseInfoCard]}get qosEndpoint(){return(0,d.qosEndpoint)()}get baseInfoCard(){var e=[{label:t("Bind Device Type"),dataIndex:"device_owner"},{label:t("Bind Device"),dataIndex:"device_id",render:(e,t)=>{var{itemInList:{device_id:a,device_owner:r,server_name:i}={}}=t;if(a&&"compute:nova"===r){var n,o=i?(0,l.default)(n="".concat(a," (")).call(n,i,")"):a;return this.getLinkRender("instanceDetail",o,{id:a},{tab:"interface"})}return e||"-"}},{label:t("VNIC Type"),dataIndex:"binding:vnic_type"}];return this.qosEndpoint&&e.push({label:t("QoS Policy"),dataIndex:"qos_policy_id",copyable:!1,render:e=>{var t;if(!e)return"-";var{qosPolicy:a}=this.detailData,{name:r}=a||{},i=r?(0,l.default)(t="".concat(e,"(")).call(t,r,")"):e;return this.getLinkRender("networkQosDetail",i,{id:e})}}),{title:t("Base Info"),options:e}}}a.BaseDetail=u;a.default=(0,o.inject)("rootStore")((0,o.observer)(u))},4347:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.QoSPolicy=void 0;var l=r(485),o=n(r(1667)),s=r(81),d=n(r(2e3));class u extends o.default{get checkEndpoint(){return!0}get endpoint(){return(0,s.qosEndpoint)()}get tabs(){var e=[{title:t("Current Project QoS Policies"),key:"projectQoSPolicy",component:d.default},{title:t("Shared QoS Policies"),key:"sharedQoSPolicy",component:d.default}];return this.hasAdminRole&&e.push({title:t("All QoS Policies"),key:"allQoSPolicy",component:d.default}),e}}a.QoSPolicy=u;a.default=(0,l.inject)("rootStore")((0,l.observer)(u))},4348:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(88)),m=f(r(61)),h=f(r(42)),g=r(485),v=r(1625),_=f(r(486)),b=r(719),y=r(1647),A=r(202),I=r(41);function S(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=S(Object(i),!0)).call(a,(function(t){(0,h.default)(e,t,i[t])})):d?u(e,d(i)):s(r=S(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class C extends v.ModalAction{constructor(){super(...arguments),(0,h.default)(this,"onSubmit",(e=>{var{name:t,description:a,shared:r,is_default:i,project_id:n}=e;return this.store.create({name:t,description:a,shared:r,is_default:i,project_id:n?n.selectedRowKeys[0]:this.props.rootStore.user.project.id})}))}get name(){return t("Create QoS Policy")}static get modalSize(){var{pathname:e}=window.location;return(0,A.isAdminPage)(e)?"large":"small"}getModalSize(){return this.isAdminPage?"large":"small"}init(){this.store=new b.QoSPolicyStore,this.projectStore=_.default,this.isAdminPage&&this.fetchProjectList()}fetchProjectList(){var e=this;return(0,m.default)((function*(){yield e.projectStore.fetchProjectsWithDomain(),e.updateDefaultValue()}))()}get projects(){return(0,I.toJS)(this.projectStore.list.data)||[]}get defaultValue(){return this.isAdminPage?{project_id:{selectedRowKeys:[this.props.rootStore.user.project.id]}}:{}}get formItems(){return[{name:"name",label:t("Policy Name"),type:"input-name",required:!0,withoutChinese:!0},x({name:"project_id",label:t("Project"),type:"select-table",required:this.isAdminPage,isLoading:_.default.list.isLoading,data:this.projects,hidden:!this.isAdminPage},y.projectTableOptions),{name:"description",label:t("Description"),type:"textarea"},{name:"shared",label:t("Shared"),type:"switch",hidden:!this.isAdminPage},{name:"is_default",label:t("Default Policy"),type:"switch",hidden:!this.isAdminPage}]}}a.Create=C,(0,h.default)(C,"id","create_qos_policy"),(0,h.default)(C,"title",t("Create QoS Policy")),(0,h.default)(C,"policy","create_policy"),(0,h.default)(C,"aliasPolicy","neutron:create_policy"),(0,h.default)(C,"allowed",(()=>p.default.resolve(!0)));a.default=(0,g.inject)("rootStore")((0,g.observer)(C))},4349:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p=f(r(88)),m=f(r(42)),h=r(485),g=r(1625),v=r(719);function _(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class b extends g.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"policy",(()=>({rules:[["network","edit_qos_policy"]]}))),(0,m.default)(this,"onSubmit",(e=>this.store.update(this.props.item,e)))}get name(){return t("Edit QoS Policy")}init(){this.store=new v.QoSPolicyStore}get defaultValue(){var{item:e}=this.props;return function(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=_(Object(i),!0)).call(a,(function(t){(0,m.default)(e,t,i[t])})):d?u(e,d(i)):s(r=_(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}({},e)}get formItems(){return[{name:"name",label:t("Policy Name"),type:"input-name",withoutChinese:!0,required:!0},{name:"description",label:t("Description"),type:"textarea"},{name:"shared",label:t("Shared"),type:"switch",hidden:!this.isAdminPage},{name:"is_default",label:t("Default Policy"),type:"switch",hidden:!this.isAdminPage}]}}a.Edit=b,(0,m.default)(b,"id","edit_qos_policy"),(0,m.default)(b,"title",t("Edit QoS Policy")),(0,m.default)(b,"policy","update_policy"),(0,m.default)(b,"aliasPolicy","neutron:update_policy"),(0,m.default)(b,"allowed",(()=>p.default.resolve(!0)));a.default=(0,h.inject)("rootStore")((0,h.observer)(b))},4350:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=n(r(719));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","delete_policy"),(0,l.default)(this,"aliasPolicy","neutron:delete_policy"),(0,l.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e))),(0,l.default)(this,"onSubmit",(e=>s.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete QoS Policy")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete qos policy")}isOwnerOrAdmin(){return!0}}a.default=d},4351:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.CreateBandwidthLimitRule=void 0;var p=f(r(289)),m=f(r(88)),h=f(r(72)),g=f(r(42)),v=f(r(0)),_=r(485),b=r(1625),y=f(r(719)),A=["max_kbps","max_burst_kbps"];function I(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=I(Object(i),!0)).call(a,(function(t){(0,g.default)(e,t,i[t])})):d?u(e,d(i)):s(r=I(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class x extends b.ModalAction{constructor(){super(...arguments),(0,g.default)(this,"onSubmit",(e=>{var{max_kbps:t,max_burst_kbps:a}=e,r=S(S({},(0,h.default)(e,A)),{},{max_kbps:1024*t,max_burst_kbps:1024*a});return y.default.createBandwidthLimitRule(this.props.item,r)}))}get name(){return t("create bandwidth limit rule")}get defaultValue(){return{max_kbps:1,max_burst_kbps:1,direction:"egress"}}get formItems(){return[{label:t("Type"),type:"label",component:v.default.createElement("div",{style:{lineHeight:"32px",marginBottom:24}},t("QoS Bandwidth Limit"))},{name:"max_kbps",label:t("Bandwidth limit"),type:"slider-input",max:1e4,min:1,inputMin:1,inputMax:1e4,description:"1Mbps-10000Mbps"},{name:"max_burst_kbps",label:t("Burst limit"),type:"slider-input",max:1e4,min:1,inputMin:1,inputMax:1e4,description:"1Mbps-10000Mbps"},{name:"direction",label:t("Direction"),type:"select",options:[{label:t("egress"),value:"egress"},{label:t("ingress"),value:"ingress"}]}]}}a.CreateBandwidthLimitRule=x,(0,g.default)(x,"id","create_bandwidth_limit_rule"),(0,g.default)(x,"title",t("Create Bandwidth Limit Rule")),(0,g.default)(x,"policy","create_policy_bandwidth_limit_rule"),(0,g.default)(x,"allowed",(e=>{var{rules:t=[]}=e,a=(0,p.default)(t).call(t,(e=>"ingress"===e.direction)),r=(0,p.default)(t).call(t,(e=>"egress"===e.direction));return m.default.resolve(!(a&&r))}));a.default=(0,_.inject)("rootStore")((0,_.observer)(x))},4352:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.CreateDSCPMarkingRules=void 0;var l=n(r(289)),o=n(r(88)),s=n(r(42)),d=n(r(0)),u=r(485),c=r(1625),f=n(r(719)),p=n(r(2002));class m extends c.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>f.default.createDSCPMarkingRule(this.props.item,e)))}get name(){return t("create DSCP marking rule")}get defaultValue(){return{dscp_mark:0}}get formItems(){return[{label:t("Type"),type:"label",component:d.default.createElement("div",{style:{lineHeight:"32px",marginBottom:24}},t("DSCP Marking"))},{name:"dscp_mark",label:t("Value"),type:"select",options:p.default}]}}a.CreateDSCPMarkingRules=m,(0,s.default)(m,"id","create_DSCP_marking_rule"),(0,s.default)(m,"title",t("Create DSCP Marking Rule")),(0,s.default)(m,"policy","create_policy_dscp_marking_rule"),(0,s.default)(m,"allowed",(e=>{var{rules:t=[]}=e,a=(0,l.default)(t).call(t,(e=>"dscp_marking"===e.type));return o.default.resolve(!a)}));a.default=(0,u.inject)("rootStore")((0,u.observer)(m))},4353:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(289)),o=n(r(116)),s=n(r(42)),d=r(1625),u=n(r(719));class c extends d.ConfirmAction{constructor(){super(...arguments),(0,s.default)(this,"policy","delete_policy_dscp_marking_rule"),(0,s.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e)&&this.hasDSCPMarkingRule(e))),(0,s.default)(this,"hasDSCPMarkingRule",(e=>{var{rules:t=[]}=e;return(0,l.default)(t).call(t,(e=>"dscp_marking"===e.type))})),(0,s.default)(this,"onSubmit",(e=>{var t,{id:a}=(0,o.default)(t=e.rules).call(t,(e=>"dscp_marking"===e.type));return u.default.deleteDSCPMarkingRules(e,a)}))}get id(){return"delete"}get title(){return t("Delete DSCP Marking Rules")}get isDanger(){return!0}get buttonText(){return t("Delete DSCP Marking Rules")}get actionName(){return t("delete dscp marking rules")}isOwnerOrAdmin(){return!0}}a.default=c},4354:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(289)),o=n(r(116)),s=n(r(42)),d=r(1625),u=n(r(719));class c extends d.ConfirmAction{constructor(){super(...arguments),(0,s.default)(this,"policy","delete_policy_bandwidth_limit_rule"),(0,s.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e)&&this.hasEgressRule(e))),(0,s.default)(this,"hasEgressRule",(e=>{var{rules:t=[]}=e;return(0,l.default)(t).call(t,(e=>"egress"===e.direction))})),(0,s.default)(this,"onSubmit",(e=>{var t,{id:a}=(0,o.default)(t=e.rules).call(t,(e=>"bandwidth_limit"===e.type&&"egress"===e.direction));return u.default.deleteBandwidthLimitRules(e,a)}))}get id(){return"delete-egress"}get title(){return t("Delete Bandwidth Egress Rules")}get isDanger(){return!0}get buttonText(){return t("Delete Bandwidth Egress Rules")}get actionName(){return t("delete bandwidth egress rules")}isOwnerOrAdmin(){return!0}}a.default=c},4355:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(289)),o=n(r(116)),s=n(r(42)),d=r(1625),u=n(r(719));class c extends d.ConfirmAction{constructor(){super(...arguments),(0,s.default)(this,"policy","delete_policy_bandwidth_limit_rule"),(0,s.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e)&&this.hasIngressRule(e))),(0,s.default)(this,"hasIngressRule",(e=>{var{rules:t=[]}=e;return(0,l.default)(t).call(t,(e=>"ingress"===e.direction))})),(0,s.default)(this,"onSubmit",(e=>{var t,{id:a}=(0,o.default)(t=e.rules).call(t,(e=>"bandwidth_limit"===e.type&&"ingress"===e.direction));return u.default.deleteBandwidthLimitRules(e,a)}))}get id(){return"delete-ingress"}get title(){return t("Delete Bandwidth Ingress Rules")}get isDanger(){return!0}get buttonText(){return t("Delete Bandwidth Ingress Rules")}get actionName(){return t("delete bandwidth ingress rules")}isOwnerOrAdmin(){return!0}}a.default=c},4356:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.EditBandwidthEgressRule=void 0;var l=n(r(116)),o=n(r(289)),s=n(r(88)),d=n(r(42)),u=n(r(0)),c=r(485),f=r(1625),p=n(r(719));class m extends f.ModalAction{constructor(){super(...arguments),(0,d.default)(this,"onSubmit",(e=>{var{max_kbps:t,max_burst_kbps:a}=e,r={max_kbps:1024*t,max_burst_kbps:1024*a};return p.default.updateBandwidthLimitRule(this.props.item,this.egressRule.id,r)}))}get name(){return t("Edit Bandwidth Egress Limit Rule")}get defaultValue(){var{max_kbps:e,max_burst_kbps:t}=this.egressRule;return{max_kbps:e/1024,max_burst_kbps:t/1024}}init(){var{rules:e=[]}=this.item||{};this.egressRule=(0,l.default)(e).call(e,(e=>"bandwidth_limit"===e.type&&"egress"===e.direction))||{}}get formItems(){return[{label:t("Type"),type:"label",component:u.default.createElement("div",{style:{lineHeight:"32px",marginBottom:24}},t("QoS Bandwidth Egress Limit"))},{name:"max_kbps",label:t("Bandwidth limit"),type:"slider-input",max:1e4,min:1,inputMin:1,inputMax:1e4,description:"1Mbps-10000Mbps"},{name:"max_burst_kbps",label:t("Burst limit"),type:"slider-input",max:1e4,min:1,inputMin:1,inputMax:1e4,description:"1Mbps-10000Mbps"}]}}a.EditBandwidthEgressRule=m,(0,d.default)(m,"id","edit_bandwidth_egress_limit_rule"),(0,d.default)(m,"title",t("Edit Bandwidth Egress Limit Rule")),(0,d.default)(m,"policy","update_policy_bandwidth_limit_rule"),(0,d.default)(m,"allowed",(e=>{var{rules:t=[]}=e,a=(0,o.default)(t).call(t,(e=>"egress"===e.direction));return s.default.resolve(a)}));a.default=(0,c.inject)("rootStore")((0,c.observer)(m))},4357:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.EditBandwidthIngressRule=void 0;var l=n(r(116)),o=n(r(289)),s=n(r(88)),d=n(r(42)),u=n(r(0)),c=r(485),f=r(1625),p=n(r(719));class m extends f.ModalAction{constructor(){super(...arguments),(0,d.default)(this,"onSubmit",(e=>p.default.updateBandwidthLimitRule(this.props.item,this.ingressRule.id,{max_kbps:1024*e.max_kbps,max_burst_kbps:1024*e.max_burst_kbps})))}get name(){return t("Edit Bandwidth Ingress Limit Rule")}get defaultValue(){var{max_kbps:e,max_burst_kbps:t}=this.ingressRule;return{max_kbps:e/1024,max_burst_kbps:t/1024}}init(){var{rules:e=[]}=this.item||{};this.ingressRule=(0,l.default)(e).call(e,(e=>"bandwidth_limit"===e.type&&"ingress"===e.direction))||{}}get formItems(){return[{label:t("Type"),type:"label",component:u.default.createElement("div",{style:{lineHeight:"32px",marginBottom:24}},t("QoS Bandwidth Ingress Limit"))},{name:"max_kbps",label:t("Bandwidth limit"),type:"slider-input",max:1e4,min:1,inputMin:1,inputMax:1e4,description:"1Mbps-10000Mbps"},{name:"max_burst_kbps",label:t("Burst limit"),type:"slider-input",max:1e4,min:1,inputMin:1,inputMax:1e4,description:"1Mbps-10000Mbps"}]}}a.EditBandwidthIngressRule=m,(0,d.default)(m,"id","edit_bandwidth_ingress_limit_rule"),(0,d.default)(m,"title",t("Edit Bandwidth Ingress Limit Rule")),(0,d.default)(m,"policy","update_policy_bandwidth_limit_rule"),(0,d.default)(m,"allowed",(e=>{var{rules:t=[]}=e,a=(0,o.default)(t).call(t,(e=>"ingress"===e.direction));return s.default.resolve(a)}));a.default=(0,c.inject)("rootStore")((0,c.observer)(m))},4358:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.EditDSCPMarkingRule=void 0;var l=n(r(116)),o=n(r(289)),s=n(r(88)),d=n(r(42)),u=n(r(0)),c=r(485),f=r(1625),p=n(r(719)),m=n(r(2002));class h extends f.ModalAction{constructor(){super(...arguments),(0,d.default)(this,"onSubmit",(e=>p.default.updateDSCPMarkingRule(this.props.item,this.dscpMarkingRule.id,e)))}get name(){return t("Edit DSCP Marking Rule")}get defaultValue(){return{dscp_mark:this.dscpMarkingRule.dscp_mark||0}}init(){var{rules:e=[]}=this.item;this.dscpMarkingRule=(0,l.default)(e).call(e,(e=>"dscp_marking"===e.type))||{}}get formItems(){return[{label:t("Type"),type:"label",component:u.default.createElement("div",{style:{lineHeight:"32px",marginBottom:24}},t("DSCP Marking"))},{name:"dscp_mark",label:t("Value"),type:"select",options:m.default}]}}a.EditDSCPMarkingRule=h,(0,d.default)(h,"id","edit_DSCP_marking_rule"),(0,d.default)(h,"title",t("Edit DSCP Marking Rule")),(0,d.default)(h,"policy","update_policy_dscp_marking_rule"),(0,d.default)(h,"allowed",(e=>{var{rules:t=[]}=e,a=(0,o.default)(t).call(t,(e=>"dscp_marking"===e.type));return s.default.resolve(a)}));a.default=(0,c.inject)("rootStore")((0,c.observer)(h))},4359:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.QoSPolicyDetail=void 0;var l=n(r(715)),o=r(485),s=n(r(1627)),d=r(719),u=n(r(1841)),c=n(r(4360)),f=n(r(2001));class p extends s.default{get name(){return t("qoS policy")}get policy(){return"get_policy"}get aliasPolicy(){return"neutron:get_policy"}get listUrl(){return this.getRoutePath("networkQos")}get actionConfigs(){return this.isAdminPage?f.default.actionConfigs:f.default.consoleActions}get detailInfos(){var e=[{title:t("Policy Name"),dataIndex:"name"},{title:t("Rule Numbers"),dataIndex:"rules",render:e=>e.length},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{title:t("Shared"),dataIndex:"shared",valueRender:"yesNo"},{title:t("Default Policy"),dataIndex:"is_default",valueRender:"yesNo"},{title:t("Description"),dataIndex:"description"}];return this.isAdminPage&&(0,l.default)(e).call(e,3,0,{title:t("Owned Project"),dataIndex:"project_name"}),e}get tabs(){return[{title:t("Detail"),key:"detail",component:c.default},{title:t("Floating IPs"),key:"fip",component:u.default}]}init(){this.store=new d.QoSPolicyStore}}a.QoSPolicyDetail=p;a.default=(0,o.inject)("rootStore")((0,o.observer)(p))},4360:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(116)),o=r(485),s=n(r(1633));class d extends s.default{get leftCards(){return[...this.BandwidthCard,this.DSCPMarkingCard]}getOptions(e){var{max_kbps:a="-",max_burst_kbps:r="-"}=e||{};return[{label:t("Max BandWidth"),content:"".concat("-"===a?a:a/1024," Mbps")},{label:t("Max Burst"),content:"".concat("-"===r?r:r/1024," Mbps")}]}get BandwidthCard(){var{rules:e=[]}=this.detailData,a=(0,l.default)(e).call(e,(e=>"bandwidth_limit"===e.type&&"egress"===e.direction)),r=(0,l.default)(e).call(e,(e=>"bandwidth_limit"===e.type&&"ingress"===e.direction));return[{title:t("BandWidth Limit Egress"),options:this.getOptions(a)},{title:t("BandWidth Limit Ingress"),options:this.getOptions(r)}]}get DSCPMarkingCard(){var{rules:e=[]}=this.detailData,a=(0,l.default)(e).call(e,(e=>"dscp_marking"===e.type))||{},r=[{label:t("Value"),content:0===a.dscp_mark?"0":a.dscp_mark||"-"}];return{title:t("DSCP Marking"),options:r}}}a.BaseDetail=d;a.default=(0,o.inject)("rootStore")((0,o.observer)(d))},4361:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.LoadBalancerInstance=void 0,r(1631);var l=n(r(1632));r(1628);var o=n(r(1629)),s=n(r(61)),d=n(r(42)),u=n(r(0)),c=r(485),f=n(r(1626)),p=(r(200),r(724)),m=r(1637),h=r(81),g=r(2003);class v extends f.default{constructor(){var e;super(...arguments),e=this,(0,d.default)(this,"fetchDataByPage",function(){var t=(0,s.default)((function*(t){yield e.store.fetchListByPageWithFip(t),e.list.silent=!1}));return function(e){return t.apply(this,arguments)}}()),(0,d.default)(this,"fetchDownloadData",function(){var t=(0,s.default)((function*(t){return e.isFilterByBackend?yield e.downloadStore.fetchListByPageWithFip(e.updateFetchParamsByPage(t)):yield e.downloadStore.fetchList(e.updateFetchParams(t))}));return function(e){return t.apply(this,arguments)}}()),(0,d.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("lbDetail")},{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage,sortKey:"project_id"},{title:t("Network ID"),dataIndex:"vip_network_id"},{title:t("IP"),dataIndex:"vip_address"},{title:t("Floating IP"),dataIndex:"fip",render:e=>e||"-"},{title:t("Port ID"),dataIndex:"vip_port_id"},{title:t("Operating Status"),dataIndex:"operating_status",valueMap:m.operatingStatusCodes,titleTip:u.default.createElement(l.default,null,u.default.createElement(o.default,null,t("DRAINING: The member is not accepting new connections")),u.default.createElement(o.default,null,t("DEGRADED: One or more of the entity’s components are in ERROR")))},{title:t("Provisioning Status"),dataIndex:"provisioning_status",valueMap:m.provisioningStatusCodes},{title:t("Listener Number"),dataIndex:"listeners",render:e=>e.length},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime",isHideable:!0}]))}init(){this.store=new p.LbaasStore,this.downloadStore=new p.LbaasStore}get fetchDataByCurrentProject(){return!0}get policy(){return"os_load-balancer_api:loadbalancer:get_all"}get checkEndpoint(){return!0}get endpoint(){return(0,h.lbEndpoint)()}get name(){return t("Load Balancers")}get isFilterByBackend(){return!0}get actionConfigs(){return this.isAdminPage?g.adminActions:g.actionConfigs}get adminPageHasProjectFilter(){return!0}get searchFilters(){return[{label:t("Name"),name:"name"}]}}a.LoadBalancerInstance=v;a.default=(0,c.inject)("rootStore")((0,c.observer)(v))},4362:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var l=n(r(88)),o=n(r(42)),s=r(485),d=r(1625),u=n(r(724));class c extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"policy",(()=>"edit_load_balancer")),(0,o.default)(this,"onSubmit",(e=>u.default.update({id:this.item.id},e)))}get name(){return t("Edit Load Balancer")}get defaultValue(){var{item:e}=this;return{name:e.name,description:e.description}}get formItems(){return[{name:"name",label:t("Load Balancer Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea"}]}}a.Edit=c,(0,o.default)(c,"id","edit_load_balancer"),(0,o.default)(c,"title",t("Edit")),(0,o.default)(c,"policy","os_load-balancer_api:loadbalancer:put"),(0,o.default)(c,"allowed",((e,t)=>{var{isAdminPage:a=!1}=t;return l.default.resolve(!a&&"ACTIVE"===e.provisioning_status)}));a.default=(0,s.inject)("rootStore")((0,s.observer)(c))},4363:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=r(1635),d=n(r(724)),u=n(r(156));class c extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","os_load-balancer_api:loadbalancer:delete"),(0,l.default)(this,"confirmContext",(e=>{var a=this.getName(e);return t("Are you sure to {action} (instance: {name})?",{action:this.actionNameDisplay||this.title,name:a})+t("This will delete all child objects of the load balancer.")})),(0,l.default)(this,"allowedCheckFunc",(e=>!e||(this.isCurrentProject(e)&&"ACTIVE"===e.provisioning_status||"ERROR"===e.provisioning_status))),(0,l.default)(this,"onSubmit",(e=>d.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Load Balancer")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete load balancer")}isCurrentProject(e){var t=u.default;return!(!(0,s.checkSystemAdmin)()&&e.project_id!==t.user.project.id)}}a.default=c},4364:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.AssociateFip=void 0;var l=n(r(88)),o=n(r(61)),s=n(r(42)),d=r(485),u=n(r(415)),c=r(1625),f=r(1650),p=r(1657),m=r(1651);class h extends c.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"handleFixedIPChange",(e=>p.handleFixedIPChange.call(this,e))),(0,s.default)(this,"onSubmit",(e=>{var{fixed_ip:t,fip:a}=e,r=t.selectedRows[0],i=a.selectedRowKeys[0];return u.default.associateFip({id:i,port_id:this.item.vip_port_id,fixed_ip_address:r.ip_address})}))}init(){this.getInterfaces(),m.getCanReachSubnetIdsWithRouterIdInComponent.call(this),this.state={interfaces:[],fixed_ip:null,portFixedIPs:[],canAssociateFloatingIPs:[],canReachSubnetIdsWithRouterId:[],portLoading:!0}}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("Associate Floating IP")}getInterfaces(){var e=this;return(0,o.default)((function*(){var t=[{port_id:e.item.vip_port_id,network_id:e.item.vip_network_id,fixed_ips:[{ip_address:e.item.vip_address,subnet_id:e.item.vip_subnet_id}]}],a=yield(0,p.getInterfaceWithReason)(t);e.setState({interfaces:a,portLoading:!1})}))()}get ports(){var{interfaces:e,canReachSubnetIdsWithRouterId:t}=this.state;return f.getPortsAndReasons.call(this,e,t)}get defaultValue(){var{name:e}=this.item;return{lb:e}}getFIPFormItemExtra(){return(0,p.getFIPFormItemExtra)()}disableFIPAssociate(e){return(0,p.disableFIPAssociate)(e)}get formItems(){var e=(0,p.getFixedIPFormItemForAssociate)(t("Fixed IP"),this),a=(0,p.getFIPFormItemForAssociate)(this);return[{name:"lb",label:t("Load Balancer"),type:"label",iconType:"instance"},e,a]}}a.AssociateFip=h,(0,s.default)(h,"id","AssociateFip"),(0,s.default)(h,"title",t("Associate Floating IP")),(0,s.default)(h,"policy","update_floatingip"),(0,s.default)(h,"allowed",((e,t)=>{var{isAdminPage:a=!1}=t;return l.default.resolve(!a&&"ACTIVE"===e.provisioning_status&&function(e){return null===e.fip||void 0===e.fip}(e))}));a.default=(0,d.inject)("rootStore")((0,d.observer)(h))},4365:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.BaseStep=void 0;var l=n(r(88)),o=n(r(61)),s=n(r(42)),d=n(r(1634)),u=r(485),c=r(290),f=r(491),p=r(724);class m extends d.default{constructor(){var e;super(...arguments),e=this,(0,s.default)(this,"allowed",(()=>l.default.resolve())),(0,s.default)(this,"handleOwnedNetworkChange",(e=>{var{network_id:t}=this.state,a=e.selectedRowKeys[0];this.setState({network_id:a},(()=>{var{network_id:e}=this.state;t&&t!==e&&this.formRef.current.setFieldsValue({vip_address:void 0})})),this.getSubnets(a)})),(0,s.default)(this,"fetchSubnetDetails",function(){var t=(0,o.default)((function*(t){var a=yield e.subnetStore.fetchList({network_id:t});e.setState({subnetDetails:a||[]})}));return function(e){return t.apply(this,arguments)}}())}init(){this.store=new p.LbaasStore,this.networkStore=new c.NetworkStore,this.subnetStore=new f.SubnetStore}get title(){return"BaseStep"}get name(){return"BaseStep"}get isStep(){return!0}get defaultValue(){return{project_id:this.props.rootStore.user.project.id,admin_state_enabled:!0}}getSubnets(e){var t=this;return(0,o.default)((function*(){yield t.networkStore.fetchDetail({id:e}),yield t.fetchSubnetDetails(e)}))()}get formItems(){var{network_id:e,subnetDetails:a=[]}=this.state;return[{name:"name",label:t("Load Balancer Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea"},{name:"vip_network_id",label:t("Owned Network"),type:"network-select-table",onChange:this.handleOwnedNetworkChange,required:!0},{name:"vip_address",label:t("Owned Subnet"),type:"ip-distributor",subnets:a,formRef:this.formRef,maxNumber:1,hidden:!e,required:!0},{name:"admin_state_enabled",label:t("Admin State Up"),type:"switch",tip:t("Defines the admin state of the port.")}]}}a.BaseStep=m;a.default=(0,u.inject)("rootStore")((0,u.observer)(m))},4366:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.ListenerStep=void 0;var l=n(r(88)),o=n(r(39)),s=n(r(42)),d=r(485),u=n(r(1634)),c=r(1637),f=r(1715),p=r(1716);class m extends u.default{constructor(){super(...arguments),(0,s.default)(this,"allowed",(()=>l.default.resolve()))}init(){this.containersStore=new f.ContainersStore,this.secretsStore=new p.SecretsStore,this.fetchContainers(),this.fetchSecrets()}get title(){return"Listener Detail"}get name(){return"Listener Detail"}get isStep(){return!0}fetchContainers(){this.containersStore.fetchList()}fetchSecrets(){this.secretsStore.fetchList({mode:"CA"})}get SERVERSecrets(){return this.containersStore.list.data||[]}get CASecrets(){return this.secretsStore.list.data||[]}get SNISecrets(){var e;return(0,o.default)(e=this.containersStore.list.data||[]).call(e,(e=>!!e.domain))}get defaultValue(){return{listener_ssl_parsing_method:"one-way",listener_sni_enabled:!1,listener_connection_limit:-1,listener_admin_state_up:!0}}get nameForStateUpdate(){return["listener_protocol","listener_ssl_parsing_method","listener_sni_enabled"]}get formItems(){var e,{listener_protocol:a,listener_ssl_parsing_method:r,listener_sni_enabled:i}=this.state,n=(0,c.getListenerInsertHeadersFormItem)();return[{name:"listener_name",label:t("Listener Name"),type:"input-name",required:!0},{name:"listener_description",label:t("Listener Description"),type:"textarea"},{name:"listener_protocol",label:t("Listener Protocol"),type:"select",options:c.listenerProtocols,onChange:()=>{this.updateContext({pool_protocol:"",health_type:""})},required:!0},{name:"listener_ssl_parsing_method",label:t("SSL Parsing Method"),type:"select",options:c.sslParseMethod,required:!0,display:"TERMINATED_HTTPS"===a},{name:"listener_default_tls_container_ref",label:t("Server Certificate"),type:"select-table",required:!0,data:this.SERVERSecrets,isLoading:!1,isMulti:!1,filterParams:[{label:t("Name"),name:"name"}],columns:(0,c.getCertificateColumns)(this),display:"TERMINATED_HTTPS"===a},{name:"listener_client_ca_tls_container_ref",label:t("CA Certificate"),type:"select-table",required:!0,data:this.CASecrets,isLoading:!1,isMulti:!1,filterParams:[{label:t("Name"),name:"name"}],columns:(0,o.default)(e=(0,c.getCertificateColumns)(this)).call(e,(e=>"domain"!==e.dataIndex)),display:"TERMINATED_HTTPS"===a&&"two-way"===r},{name:"listener_sni_enabled",label:t("SNI Enabled"),type:"switch",display:"TERMINATED_HTTPS"===a},{name:"listener_sni_container_refs",label:t("SNI Certificate"),type:"select-table",required:!0,data:this.SNISecrets,isLoading:!1,isMulti:!0,filterParams:[{label:t("Name"),name:"name"}],columns:(0,c.getCertificateColumns)(this),display:"TERMINATED_HTTPS"===a&&i},{name:"listener_protocol_port",label:t("Listener Protocol Port"),type:"input-number",required:!0},{name:"listener_connection_limit",label:t("Listener Connection Limit"),type:"input-number",min:-1,extra:t("-1 means no connection limit"),required:!0},{name:"listener_admin_state_up",label:t("Admin State Up"),type:"switch",tip:t("Defines the admin state of the listener.")},n]}}a.ListenerStep=m;a.default=(0,d.inject)("rootStore")((0,d.observer)(m))},4367:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.PoolStep=void 0;var l=n(r(88)),o=n(r(39)),s=n(r(203)),d=n(r(42)),u=r(485),c=n(r(1634)),f=r(1777),p=r(1637);class m extends c.default{constructor(){super(...arguments),(0,d.default)(this,"allowed",(()=>l.default.resolve())),(0,d.default)(this,"handleAlgorithmChange",(e=>{this.setState({pool_lb_algorithm:e})}))}get title(){return"Pool Detail"}get name(){return"Pool Detail"}get isStep(){return!0}get filterOptions(){var{context:{listener_protocol:e=""}={}}=this.props;return(0,o.default)(p.poolProtocols).call(p.poolProtocols,(t=>(0,s.default)(e).call(e,t.label)))}init(){this.state={pool_lb_algorithm:void 0}}get defaultValue(){return{pool_admin_state_up:!0}}get formItems(){var{pool_lb_algorithm:e}=this.state;return[{name:"pool_name",label:t("Pool Name"),type:"input-name",required:!0},{name:"pool_description",label:t("Pool Description"),type:"textarea"},{name:"pool_lb_algorithm",label:t("Pool Algorithm"),type:"select",options:f.Algorithm,onChange:this.handleAlgorithmChange,extra:e&&f.algorithmTip[e],required:!0},{name:"pool_protocol",label:t("Pool Protocol"),type:"select",options:this.filterOptions,onChange:()=>{this.updateContext({health_type:""})},required:!0},{name:"pool_admin_state_up",label:t("Admin State Up"),type:"switch",tip:t("Defines the admin state of the pool.")}]}}a.PoolStep=m;a.default=(0,u.inject)("rootStore")((0,u.observer)(m))},4368:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=t.MemberStep=void 0;var n=i(a(88)),l=i(a(39)),o=i(a(42)),s=i(a(140)),d=a(485),u=i(a(1634)),c=a(714);class f extends u.default{constructor(){super(...arguments),(0,o.default)(this,"allowed",(()=>n.default.resolve()))}init(){this.store=new c.PortStore,this.state={ports:[]},this.store.fetchList().then((e=>{this.setState({ports:(0,l.default)(e).call(e,(e=>"network:dhcp"!==e.device_owner&&"network:router_gateway"!==e.device_owner))})}))}get title(){return"Member Detail"}get name(){return"Member Detail"}get isStep(){return!0}get wrapperCol(){return{xs:{span:16},sm:{span:12}}}get formItems(){return[{name:"extMembers",type:"member-allocator",lbSubnetId:(0,s.default)(this.props.context,"vip_address[0].subnet",""),isLoading:this.store.list.isLoading,ports:this.state.ports}]}}t.MemberStep=f;t.default=(0,d.inject)("rootStore")((0,d.observer)(f))},4369:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.HealthMonitorStep=void 0;var l=n(r(88)),o=n(r(39)),s=n(r(203)),d=n(r(42)),u=r(485),c=n(r(1634)),f=r(1637);class p extends c.default{constructor(){super(...arguments),(0,d.default)(this,"allowed",(()=>l.default.resolve()))}get title(){return"Health Monitor Detail"}get name(){return"Health Monitor Detail"}get isStep(){return!0}get filteredProtocolOptions(){var{context:{listener_protocol:e=""}={}}=this.props;return(0,o.default)(f.healthProtocols).call(f.healthProtocols,(t=>(0,s.default)(e).call(e,t.label)))}get defaultValue(){return{enableHealthMonitor:!0,health_delay:5,health_timeout:3,health_max_retries:3,health_type:"",monitor_admin_state_up:!0}}get formItems(){var{health_delay:e,enableHealthMonitor:a}=this.state;return[{name:"enableHealthMonitor",label:t("Enable Health Monitor"),type:"radio",options:[{label:t("Yes"),value:!0},{label:t("No"),value:!1}]},{name:"health_name",label:t("Health Monitor Name"),type:"input-name",required:!0,hidden:!a},{name:"health_delay",label:t("Health Monitor Delay"),type:"input-number",onChange:e=>{this.setState({health_delay:e})},min:0,extra:t("Maximum interval time for each health check response"),required:!0,hidden:!a},{name:"health_max_retries",label:t("Health Monitor Max Retries"),type:"input-number",min:1,max:10,extra:t("That is, after how many consecutive failures of the health check, the health check status of the back-end cloud server is changed from normal to abnormal"),required:!0,hidden:!a},{name:"health_timeout",label:t("Health Monitor Timeout"),type:"input-number",min:e||0,extra:t("The timeout period of waiting for the return of the health check request, the check timeout will be judged as a check failure"),required:!0,hidden:!a},{name:"health_type",label:t("Health Monitor Type"),type:"select",options:this.filteredProtocolOptions,required:!0,hidden:!a},{name:"monitor_admin_state_up",label:t("Admin State Up"),type:"switch",tip:t("Defines the admin state of the health monitor."),hidden:!a}]}}a.HealthMonitorStep=p;a.default=(0,u.inject)("rootStore")((0,u.observer)(p))},4370:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=n(r(415));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","update_floatingip"),(0,l.default)(this,"allowedCheckFunc",(e=>"ACTIVE"===e.provisioning_status&&!!e.fip_id)),(0,l.default)(this,"onSubmit",(()=>s.default.disassociateFip({id:this.item.fip_id})))}get id(){return"disassociate-fip-from-lb"}get title(){return t("Disassociate Floating IP")}get buttonText(){return t("Disassociate Floating IP")}get actionName(){return t("disassociate floating ip")}}a.default=d},4371:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.LoadBalancerDetail=void 0;var p=f(r(42)),m=r(485),h=f(r(1627)),g=r(724),v=r(1637),_=f(r(4372)),b=r(2003);function y(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=y(Object(i),!0)).call(a,(function(t){(0,p.default)(e,t,i[t])})):d?u(e,d(i)):s(r=y(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class I extends h.default{constructor(){super(...arguments),(0,p.default)(this,"fetchData",(e=>{if(this.store.fetchDetailWithFip){var t=A(A(A({},this.params),e||{}),{},{silent:!0,all_projects:this.isAdminPage});this.store.fetchDetailWithFip(t).catch(this.catch)}}))}get name(){return t("load balancer")}get policy(){return"os_load-balancer_api:loadbalancer:get_one"}get listUrl(){return this.getRoutePath("lb")}get actionConfigs(){return this.isAdminPage?b.adminActions:b.actionConfigs}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Status"),dataIndex:"provisioning_status",valueMap:v.provisioningStatusCodes},{title:t("Network"),dataIndex:"vip_network_id"},{title:t("Subnet"),dataIndex:"vip_subnet_id"},{title:t("IP"),dataIndex:"vip_address"},{title:t("Floating IP"),dataIndex:"fip"},{title:t("Provider"),dataIndex:"provider"},{title:t("Description"),dataIndex:"description"}]}get tabs(){return[{title:t("Listeners"),key:"listener",component:_.default}]}init(){this.store=new g.LbaasStore}}a.LoadBalancerDetail=I;a.default=(0,m.inject)("rootStore")((0,m.observer)(I))},4372:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Listeners=void 0;var p=f(r(72)),m=f(r(42)),h=r(485),g=f(r(1626)),v=r(1637),_=r(1689),b=r(412),y=r(2005),A=["id"];function I(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class S extends g.default{constructor(){super(...arguments),(0,m.default)(this,"updateFetchParamsByPage",(e=>{var{id:t}=e;return function(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=I(Object(i),!0)).call(a,(function(t){(0,m.default)(e,t,i[t])})):d?u(e,d(i)):s(r=I(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}({loadbalancer_id:t},(0,p.default)(e,A))})),(0,m.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("lbListenerDetail"),routeParamsFunc:e=>({loadBalancerId:this.id,id:e.id})},{title:t("Status"),dataIndex:"provisioning_status",valueMap:v.provisioningStatusCodes,isHideable:!0},{title:t("Protocol"),dataIndex:"protocol",isHideable:!0,render:e=>("TERMINATED_HTTPS"===e?"HTTPS":e)||"-"},{title:t("Port"),dataIndex:"protocol_port",isHideable:!0},{title:t("Max connect"),dataIndex:"connection_limit"},{title:t("Admin State Up"),dataIndex:"admin_state_up",render:e=>e?t("On"):t("Off")}]))}init(){this.store=new _.ListenerStore,this.downloadStore=new _.ListenerStore}get policy(){return"os_load-balancer_api:listener:get_all"}get name(){return t("listeners")}get id(){return this.params.id}get isFilterByBackend(){return!0}get forceRefreshTopDetailWhenListRefresh(){return!0}get actionConfigs(){var{provisioning_status:e}=this.props.detail;return"ACTIVE"!==e?b.emptyActionConfig:this.isAdminPage?y.adminActions:y.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"}]}}a.Listeners=S;a.default=(0,h.inject)("rootStore")((0,h.observer)(S))},4373:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.CreatePool=void 0;var l=n(r(39)),o=n(r(203)),s=n(r(88)),d=n(r(61)),u=n(r(42)),c=r(485),f=r(1625),p=n(r(1778)),m=n(r(724)),h=r(1777),g=r(1637);class v extends f.ModalAction{constructor(){super(...arguments),(0,u.default)(this,"handleAlgorithmChange",(e=>{this.setState({algorithm:e})})),(0,u.default)(this,"onSubmit",(e=>(e.listener_id=this.item.id,p.default.create(e))))}get name(){return t("create default pool")}get labelCol(){return{xs:{span:8},sm:{span:8}}}get filterOptions(){var{protocol:e=""}=this.item;return(0,l.default)(g.poolProtocols).call(g.poolProtocols,(t=>(0,o.default)(e).call(e,t.label)))}init(){this.state={algorithm:void 0}}get defaultValue(){return{admin_state_up:!0}}get formItems(){var{algorithm:e}=this.state;return[{name:"name",label:t("Pool Name"),type:"input-name",required:!0},{name:"description",label:t("Pool Description"),type:"textarea"},{name:"lb_algorithm",label:t("Pool Algorithm"),type:"select",options:h.Algorithm,onChange:this.handleAlgorithmChange,extra:e&&h.algorithmTip[e],required:!0},{name:"protocol",label:t("Pool Protocol"),type:"select",options:this.filterOptions,required:!0},{name:"admin_state_up",label:t("Admin State Up"),type:"switch",tip:t("Defines the admin state of the pool.")}]}}a.CreatePool=v,(0,u.default)(v,"id","pool-create"),(0,u.default)(v,"title",t("Create Default Pool")),(0,u.default)(v,"buttonText",t("Create Default Pool")),(0,u.default)(v,"policy","os_load-balancer_api:pool:post"),(0,u.default)(v,"allowed",function(){var e=(0,d.default)((function*(e,t){var{detail:a}=t||{},r=e.loadBalancer||a;return r||(r=yield m.default.pureFetchDetail(e.loadbalancers[0])),s.default.resolve(!e.default_pool_id&&"ACTIVE"===e.provisioning_status&&"ACTIVE"===r.provisioning_status)}));return function(t,a){return e.apply(this,arguments)}}());a.default=(0,c.inject)("rootStore")((0,c.observer)(v))},4374:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(88)),o=n(r(61)),s=n(r(42)),d=r(1625),u=n(r(1689)),c=n(r(724));class f extends d.ConfirmAction{constructor(){super(...arguments),(0,s.default)(this,"policy","os_load-balancer_api:listener:delete"),(0,s.default)(this,"allowed",function(){var e=(0,o.default)((function*(e,t){var{detail:a}=t||{},r=e.loadBalancer||a;return r||(r=yield c.default.pureFetchDetail(e.loadbalancers[0])),l.default.resolve(!e.default_pool_id&&"ACTIVE"===e.provisioning_status&&"ACTIVE"===r.provisioning_status)}));return function(t,a){return e.apply(this,arguments)}}()),(0,s.default)(this,"onSubmit",(e=>u.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Listener")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete listener")}}a.default=f},4375:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p=f(r(71)),m=f(r(39)),h=f(r(203)),g=f(r(88)),v=f(r(61)),_=f(r(72)),b=f(r(42)),y=r(485),A=f(r(1689)),I=f(r(724)),S=r(1637),x=r(2006),C=["protocol","protocol_port","sni_enabled","ssl_parsing_method","default_tls_container_ref","client_ca_tls_container_ref","sni_container_refs","insert_headers"];function w(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class P extends x.Create{constructor(){super(...arguments),(0,b.default)(this,"onSubmit",(e=>{var t,{id:a}=this.item,{protocol:r,protocol_port:i,sni_enabled:n,ssl_parsing_method:l,default_tls_container_ref:f,client_ca_tls_container_ref:m,sni_container_refs:h,insert_headers:g}=e,v=function(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=w(Object(i),!0)).call(a,(function(t){(0,b.default)(e,t,i[t])})):d?u(e,d(i)):s(r=w(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}({},(0,_.default)(e,C)),y=(0,S.getInsertHeadersValueFromForm)(g);(v.insert_headers=y||{},"TERMINATED_HTTPS"===r)&&(f&&(v.default_tls_container_ref=f.selectedRows[0].container_ref),"two-way"===l&&m?(v.client_ca_tls_container_ref=m.selectedRows[0].secret_ref,v.client_authentication="MANDATORY"):(v.client_ca_tls_container_ref=null,v.client_authentication="NONE"),v.sni_container_refs=n&&h?(0,p.default)(t=h.selectedRows).call(t,(e=>e.container_ref)):[]);return A.default.edit({id:a},v)}))}get name(){return t("Edit Listener")}get isEdit(){return!0}get defaultValue(){var{item:e}=this.props,{name:t,description:a,protocol:r,protocol_port:i,connection_limit:n,admin_state_up:l}=e||{},o={name:t,description:a,protocol:r,protocol_port:i,connection_limit:n,insert_headers:(0,S.getInsertHeadersFormValueFromListener)(e),admin_state_up:l};if("TERMINATED_HTTPS"===e.protocol){if(e.default_tls_container_ref){var s,[,d]=e.default_tls_container_ref.split("/containers/");o.default_tls_container_ref={selectedRowKeys:[d],selectedRows:(0,m.default)(s=this.ServerCertificate).call(s,(e=>e.id===d))}}if(e.client_ca_tls_container_ref){var u,[,c]=e.client_ca_tls_container_ref.split("/secrets/");o.ssl_parsing_method="two-way",o.client_ca_tls_container_ref={selectedRowKeys:[c],selectedRows:(0,m.default)(u=this.CaCertificate).call(u,(e=>e.id===c))}}else o.ssl_parsing_method="one-way";if(e.sni_container_refs&&e.sni_container_refs.length){var f,g;o.sni_enabled=!0;var v=(0,p.default)(f=e.sni_container_refs).call(f,(e=>{var[,t]=e.split("/containers/");return t}));o.sni_container_refs={selectedRowKeys:v,selectedRows:(0,m.default)(g=this.SNICertificate).call(g,(e=>(0,h.default)(v).call(v,e.id)))}}else o.sni_enabled=!1}return o}get formItems(){var e=super.formItems;return(0,p.default)(e).call(e,(e=>("sni_enabled"===e.name&&(e.disabled=this.item.sni_container_refs&&this.item.sni_container_refs.length,e.tip=t("If the listener has an SNI certificate installed, it cannot be removed. Please delete the listener or replace the SNI certificate")),e)))}}a.Edit=P,(0,b.default)(P,"id","edit-listener"),(0,b.default)(P,"title",t("Edit Listener")),(0,b.default)(P,"buttonText",t("Edit")),(0,b.default)(P,"policy","os_load-balancer_api:listener:put"),(0,b.default)(P,"allowed",function(){var e=(0,v.default)((function*(e,t){var{detail:a}=t||{},r=e.loadBalancer||a;return r||(r=yield I.default.pureFetchDetail(e.loadbalancers[0])),g.default.resolve("ACTIVE"===e.provisioning_status&&"ACTIVE"===r.provisioning_status)}));return function(t,a){return e.apply(this,arguments)}}());a.default=(0,y.inject)("rootStore")((0,y.observer)(P))},4376:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.EditPoolInfo=void 0;var l=n(r(39)),o=n(r(203)),s=n(r(88)),d=n(r(61)),u=n(r(72)),c=n(r(42)),f=r(485),p=r(1625),m=n(r(1778)),h=r(1777),g=r(1637),v=n(r(724)),_=["protocol"];class b extends p.ModalAction{constructor(){super(...arguments),(0,c.default)(this,"onSubmit",(e=>{var{default_pool_id:t}=this.item,{protocol:a}=e,r=(0,u.default)(e,_);return this.store.edit({id:t},r)}))}init(){this.state.pool={},this.store=m.default,this.getPoolDetail()}get name(){return t("edit default pool")}get labelCol(){return{xs:{span:8},sm:{span:8}}}get filteredProtocolOptions(){var{pool:{protocol:e=""}={}}=this.state;return(0,l.default)(g.poolProtocols).call(g.poolProtocols,(t=>(0,o.default)(e).call(e,t.label)))}get defaultValue(){var{pool:e}=this.state,{name:t,description:a,protocol:r,lb_algorithm:i,admin_state_up:n}=e;return{name:t,description:a,protocol:r,lb_algorithm:i,admin_state_up:n}}getPoolDetail(){var e=this;return(0,d.default)((function*(){var{default_pool_id:t}=e.item,a=yield e.store.fetchDetail({id:t});e.setState({pool:a},(()=>{e.updateDefaultValue()}))}))()}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0},{name:"description",label:t("Description"),type:"textarea",maxLength:255},{name:"protocol",label:t("Protocol"),type:"select",options:this.filteredProtocolOptions,required:!0},{name:"lb_algorithm",label:t("LB Algorithm"),type:"select",options:h.Algorithm,required:!0},{name:"admin_state_up",label:t("Admin State Up"),type:"switch",tip:t("Defines the admin state of the pool.")}]}}a.EditPoolInfo=b,(0,c.default)(b,"id","pool-edit"),(0,c.default)(b,"title",t("Edit Default Pool")),(0,c.default)(b,"buttonText",t("Edit Default Pool")),(0,c.default)(b,"policy","os_load-balancer_api:pool:put"),(0,c.default)(b,"allowed",function(){var e=(0,d.default)((function*(e,t){var{detail:a}=t||{},r=e.loadBalancer||a;return r||(r=yield v.default.pureFetchDetail(e.loadbalancers[0])),s.default.resolve(!!e.default_pool_id&&"ACTIVE"===e.provisioning_status&&"ACTIVE"===r.provisioning_status)}));return function(t,a){return e.apply(this,arguments)}}());a.default=(0,f.inject)("rootStore")((0,f.observer)(b))},4377:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(201),p=r(22);c(a,"__esModule",{value:!0}),a.default=a.EditHealthMonitor=void 0;var m=p(r(88)),h=p(r(39)),g=p(r(203)),v=p(r(61)),_=p(r(72)),b=p(r(42)),y=r(485),A=r(1625),I=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},i=c&&o;for(var n in e)if("default"!==n&&{}.hasOwnProperty.call(e,n)){var l=i?o(e,n):null;l&&(l.get||l.set)?c(r,n,l):r[n]=e[n]}return r.default=e,a&&a.set(e,r),r}(r(4378)),S=r(1637),x=r(1778),C=p(r(724)),w=r(1689),P=["enableHealthMonitor","type"];function E(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(E=function(e){return e?a:t})(e)}function D(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=D(Object(i),!0)).call(a,(function(t){(0,b.default)(e,t,i[t])})):d?u(e,d(i)):s(r=D(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class N extends A.ModalAction{constructor(){super(...arguments),(0,b.default)(this,"onSubmit",(e=>{var{default_pool_id:t}=this.item,{healthMonitor:a}=this.state,{id:r}=a||{},{enableHealthMonitor:i,type:n}=e,l=(0,_.default)(e,P);if(r)return i?I.default.edit({id:r},l):I.default.delete({id:r});if(!i)return m.default.resolve();var o=k(k({type:n},l),{},{pool_id:t});return I.default.create(o)}))}init(){this.store=new I.HealthMonitorStore,this.listenerStore=new w.ListenerStore,this.poolStore=new x.PoolStore,this.state={enableHealthMonitor:!1,dataLoading:!0,healthMonitor:null}}componentDidMount(){this.getHealthMonitor()}get name(){return t("edit health monitor")}get labelCol(){return{xs:{span:8},sm:{span:8}}}get filteredProtocolOptions(){var{protocol:e=""}=this.item;return(0,h.default)(S.healthProtocols).call(S.healthProtocols,(t=>(0,g.default)(e).call(e,t.label)))}get defaultValue(){var{healthMonitor:e}=this.state;if(!e)return{delay:5,timeout:3,max_retries:3,enableHealthMonitor:!1,admin_state_up:!0};var{admin_state_up:t,operating_status:a,type:r,delay:i,timeout:n,max_retries:l}=e;return{enableHealthMonitor:!0,admin_state_up:t,operating_status:a,type:r,delay:i,timeout:n,max_retries:l}}getHealthMonitor(){var e=this;return(0,v.default)((function*(){var t=yield e.listenerStore.fetchDetail(e.item),{healthMonitor:a}=t;e.setState({healthMonitor:a,enableHealthMonitor:!!a,dataLoading:!1},(()=>{e.updateDefaultValue()}))}))()}get formItems(){var{enableHealthMonitor:e,dataLoading:a,healthMonitor:r}=this.state;return a?[{name:"loading",type:"loading"}]:[{name:"enableHealthMonitor",label:t("Enable Health Monitor"),type:"radio",required:!0,options:[{label:t("Yes"),value:!0},{label:t("No"),value:!1}]},{name:"type",label:t("HealthMonitor Type"),type:"select",options:this.filteredProtocolOptions,hidden:!e,required:!0,disabled:!!r},{name:"delay",label:t("Delay Interval(s)"),type:"input-int",min:0,extra:t("Maximum interval time for each health check response"),hidden:!e,required:!0},{name:"timeout",label:t("Timeout(s)"),type:"input-int",min:0,extra:t("The timeout period of waiting for the return of the health check request, the check timeout will be judged as a check failure"),hidden:!e,required:!0},{name:"max_retries",label:t("Max Retries"),type:"input-int",min:0,extra:t("That is, after how many consecutive failures of the health check, the health check status of the back-end cloud server is changed from normal to abnormal"),hidden:!e,required:!0},{name:"admin_state_up",label:t("Admin State Up"),type:"switch",tip:t("Defines the admin state of the health monitor."),hidden:!e}]}}a.EditHealthMonitor=N,(0,b.default)(N,"id","health-monitor-edit"),(0,b.default)(N,"title",t("Edit Health Monitor")),(0,b.default)(N,"buttonText",t("Edit Health Monitor")),(0,b.default)(N,"policy","os_load-balancer_api:healthmonitor:put"),(0,b.default)(N,"allowed",function(){var e=(0,v.default)((function*(e,t){var{detail:a}=t||{},r=e.loadBalancer||a;return r||(r=yield C.default.pureFetchDetail(e.loadbalancers[0])),m.default.resolve(!!e.default_pool_id&&"ACTIVE"===e.provisioning_status&&"ACTIVE"===r.provisioning_status)}));return function(t,a){return e.apply(this,arguments)}}());a.default=(0,y.inject)("rootStore")((0,y.observer)(N))},4378:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=t.HealthMonitorStore=void 0;var n=i(a(60)),l=i(a(66));class o extends l.default{get client(){return n.default.octavia.healthMonitors}get listFilterByProject(){return!0}}t.HealthMonitorStore=o;var s=new o;t.default=s},4379:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(88)),o=n(r(61)),s=n(r(42)),d=r(1625),u=n(r(1778)),c=n(r(724));class f extends d.ConfirmAction{constructor(){super(...arguments),(0,s.default)(this,"policy","os_load-balancer_api:pool:delete"),(0,s.default)(this,"allowedCheckFunc",function(){var e=(0,o.default)((function*(e,t){var{detail:a}=t||{},r=e.loadBalancer||a;return r||(r=yield c.default.pureFetchDetail(e.loadbalancers[0])),l.default.resolve(!!e.default_pool_id&&"ACTIVE"===e.provisioning_status&&"ACTIVE"===r.provisioning_status)}));return function(t,a){return e.apply(this,arguments)}}()),(0,s.default)(this,"onSubmit",(()=>u.default.delete({id:this.item.default_pool_id})))}get id(){return"delete"}get title(){return t("Delete Default Pool")}get isDanger(){return!0}get buttonText(){return t("Delete Default Pool")}get actionName(){return t("delete default pool")}isOwnerOrAdmin(){return!0}}a.default=f},4380:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.ListenerDetail=void 0;var l=r(485),o=r(1689),s=r(1637),d=n(r(1627)),u=n(r(4381)),c=n(r(4382)),f=r(2005);class p extends d.default{get name(){return t("listener")}get policy(){return"os_load-balancer_api:listener:get_one"}get listUrl(){var{loadBalancerId:e}=this.params;return this.getRoutePath("lbDetail",{id:e})}get actionConfigs(){return this.isAdminPage?f.adminActions:f.actionConfigs}get detailInfos(){return[{title:t("Listener Name"),dataIndex:"name"},{title:t("Protocol Type"),dataIndex:"protocol",render:e=>("TERMINATED_HTTPS"===e?"HTTPS":e)||"-"},{title:t("Port"),dataIndex:"protocol_port"},{title:t("Status"),dataIndex:"provisioning_status",valueMap:s.provisioningStatusCodes},{title:t("Max connect"),dataIndex:"connection_limit"},{title:t("Admin State Up"),dataIndex:"admin_state_up",render:e=>e?t("On"):t("Off")},{title:t("Description"),dataIndex:"description"}]}get forceLoadingTabs(){return["detail"]}get tabs(){return[{title:t("Detail"),key:"detail",component:u.default},{title:t("Members"),key:"members",component:c.default}]}init(){this.store=new o.ListenerStore}}a.ListenerDetail=p;a.default=(0,l.inject)("rootStore")((0,l.observer)(p))},4381:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(71)),o=n(r(93)),s=n(r(261)),d=r(485),u=n(r(1633)),c=r(1637),f=r(1777);class p extends u.default{get leftCards(){var e=[this.poolCard],{insert_headers:t={},default_pool_id:a}=this.detailData;return a&&e.push(this.healthMonitor),(0,s.default)(t)||e.push(this.customHeaders),e}get rightCards(){var{protocol:e}=this.detailData||{};return"TERMINATED_HTTPS"!==e||this.isAdminPage?[]:[this.certificateInfo]}get poolCard(){var{default_pool:e={},default_pool_id:a}=this.detailData||{},{name:r,protocol:i,lb_algorithm:n,description:l,admin_state_up:o}=e,s=a?[{label:t("Name"),content:r||"-"},{label:t("Protocol"),content:i||"-"},{label:t("LB Algorithm"),content:f.algorithmDict[n]||n||"-"},{label:t("Admin State Up"),content:o?t("On"):t("Off")},{label:t("Description"),content:l||"-"}]:[{label:"",content:t("No default pool set")}];return{title:t("Pool Info"),options:s}}get customHeaders(){var{insert_headers:e={}}=this.detailData||{};return(0,c.getInsertHeaderCard)(e||{})}get healthMonitor(){var e=this.detailData.healthMonitor||{},{type:a,delay:r,timeout:i,max_retries:n,admin_state_up:l}=e,o=[{label:t("Enable Health Monitor"),content:(0,s.default)(e)?t("No"):t("Yes")}];return(0,s.default)(e)||o.push({label:t("Health Monitor Type"),content:a},{label:t("Delay Interval(s)"),content:r},{label:t("Timeout(s)"),content:i},{label:t("Max Retries"),content:n},{label:t("Admin State Up"),content:l?t("On"):t("Off")}),{title:t("Health Monitor"),options:o}}get certificateInfo(){var e=[{label:t("Server Certificate"),dataIndex:"serverCertificateId",render:e=>e?this.getLinkRender("certificateContainerDetail",e,{id:e},null):"-"},{label:t("CA Certificate"),dataIndex:"caCertificateId",render:e=>e?this.getLinkRender("certificateSecretDetail",e,{id:e},null):"-"},{label:t("SNI Certificate"),dataIndex:"sniCertificateId",render:e=>e.length?(0,l.default)(e).call(e,((t,a)=>{var r;return this.getLinkRender("certificateContainerDetail",(0,o.default)(r="".concat(t)).call(r,a===e.length-1?"":" , "),{id:t})}),null):"-"}];return{title:t("certificate"),options:e,labelCol:4}}}a.BaseDetail=p;a.default=(0,d.inject)("rootStore")((0,d.observer)(p))},4382:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.Members=void 0;var l=n(r(61)),o=n(r(42)),s=r(485),d=n(r(1626)),u=r(1637),c=n(r(1779)),f=r(492),p=r(4383);class m extends d.default{constructor(){var e;super(...arguments),e=this,(0,o.default)(this,"fetchData",(0,l.default)((function*(){var{default_pool_id:t}=e.props.detail;t?e.fetchListWithTry((0,l.default)((function*(){yield e.store.fetchList({pool_id:t}),e.list.silent=!1}))):(e.list.data=[],e.list.isLoading=!1)}))),(0,o.default)(this,"getColumns",(()=>[f.idNameColumn,{title:t("Status"),dataIndex:"provisioning_status",valueMap:u.provisioningStatusCodes,isHideable:!0},{title:t("Ip Address"),dataIndex:"address",isHideable:!0},{title:t("Port"),dataIndex:"protocol_port",isHideable:!0},{title:t("Weight"),dataIndex:"weight"}]))}init(){this.store=c.default}get policy(){return"os_load-balancer_api:member:get_all"}get name(){return t("Members")}get id(){return this.params.id}get forceRefreshTopDetailWhenListRefresh(){return!0}get actionConfigs(){return this.isAdminPage?p.adminActions:p.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"}]}}a.Members=m;a.default=(0,s.inject)("rootStore")((0,s.observer)(m))},4383:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.adminActions=t.actionConfigs=void 0;var n=i(a(4384)),l=i(a(4385)),o=i(a(4387));t.actionConfigs={rowActions:{firstAction:o.default,moreActions:[{action:n.default}]},batchActions:[],primaryActions:[l.default]},t.adminActions={rowActions:{moreActions:[{action:n.default}]},batchActions:[],primaryActions:[]}},4384:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=n(r(1779));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","os_load-balancer_api:member:delete"),(0,l.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e)&&"ACTIVE"===e.provisioning_status)),(0,l.default)(this,"onSubmit",(e=>{var{default_pool_id:t}=this.containerProps.detail;return s.default.delete({id:e.id,default_pool_id:t})}))}get id(){return"delete"}get title(){return t("Delete Member")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete member")}isOwnerOrAdmin(){return!0}}a.default=d},4385:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.CreateAction=void 0;var l=n(r(71)),o=n(r(33)),s=n(r(39)),d=n(r(88)),u=n(r(61)),c=n(r(42)),f=n(r(140)),p=n(r(4386)),m=n(r(0)),h=r(485),g=r(1625),v=r(1779),_=r(714),b=r(41),y=n(r(724)),A=n(r(1833));class I extends g.ModalAction{constructor(){super(...arguments),(0,c.default)(this,"onSubmit",(e=>{var t,{default_pool_id:a}=this.item,{extMembers:r=[]}=e,i=(0,l.default)(t=(0,b.toJS)(this.memberStore.list.data)).call(t,(e=>{var{weight:t,protocol_port:a,address:r,name:i,subnet_id:n}=e;return{weight:t,protocol_port:a,address:r,name:i,subnet_id:n}}));return(0,o.default)(r).call(r,(e=>{var{ip:t,protocol_port:a,weight:r,name:n=null,subnet_id:l}=e.ip_address,o={weight:r,protocol_port:a,address:t,name:n,subnet_id:l};i.push(o)})),this.memberStore.batchUpdate({default_pool_id:a,data:(0,p.default)(i,A.default)})}))}get name(){return t("Add Member")}init(){this.store=new _.PortStore,this.memberStore=new v.PoolMemberStore,this.lbDetail={},this.state={ports:[]}}componentDidMount(){this.getMember(),y.default.fetchDetail({id:this.props.containerProps.match.params.loadBalancerId}).then((e=>(this.lbDetail=e,this.store.fetchList()))).then((e=>{this.setState({ports:(0,s.default)(e).call(e,(e=>"network:dhcp"!==e.device_owner&&"network:router_gateway"!==e.device_owner))})}))}static get modalSize(){return"large"}getMember(){var e=this;return(0,u.default)((function*(){var{default_pool_id:t}=e.item;yield e.memberStore.fetchList({pool_id:t})}))()}getModalSize(){return"large"}get item(){var{item:e}=this.props;return e||this.containerProps.detail}get defaultValue(){return{}}get tips(){return m.default.createElement("div",{style:{display:"inline-table"}},m.default.createElement("p",{style:{color:globalCSS.primaryColor}},t("The amphora instance is required for load balancing service setup and is not recommended")))}get formItems(){return[{name:"extMembers",type:"member-allocator",lbSubnetId:(0,f.default)(this.lbDetail,"vip_subnet_id",""),isLoading:this.store.list.isLoading,ports:this.state.ports,members:this.memberStore.list.data}]}}a.CreateAction=I,(0,c.default)(I,"id","manage-member"),(0,c.default)(I,"title",t("Add Member")),(0,c.default)(I,"policy","os_load-balancer_api:member:post"),(0,c.default)(I,"allowed",(e=>d.default.resolve("ACTIVE"===e.provisioning_status&&!!e.default_pool_id)));a.default=(0,h.inject)("rootStore")((0,h.observer)(I))},4387:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var l=n(r(116)),o=n(r(88)),s=n(r(71)),d=n(r(42)),u=r(485),c=r(1625),f=n(r(1779)),p=r(41);class m extends c.ModalAction{constructor(){super(...arguments),(0,d.default)(this,"protocolValidator",((e,a)=>{var r,{address:i,protocol_port:n}=this.item;return(0,l.default)(r=f.default.list.data||[]).call(r,(e=>e.address===i&&a===e.protocol_port&&a!==n))?o.default.reject(new Error(t("Invalid IP Address and Port"))):o.default.resolve()})),(0,d.default)(this,"onSubmit",(e=>{var{default_pool_id:t}=this.containerProps.detail,{id:a}=this.item,r=(0,p.toJS)(this.store.list.data),i=(0,s.default)(r).call(r,(t=>{if(t.id===a){var{weight:r,protocol_port:i}=e;t.weight=r,t.protocol_port=i}var{weight:n,protocol_port:l,address:o,name:s,subnet_id:d}=t;return{weight:n,protocol_port:l,address:o,name:s,subnet_id:d}}));return this.store.batchUpdate({default_pool_id:t,data:i})}))}init(){this.state={},this.store=f.default}get name(){return t("edit member")}get defaultValue(){var{weight:e,protocol_port:t}=this.item;return e&&t&&this.formRef.current&&this.formRef.current.setFieldsValue({weight:e,protocol_port:t}),{weight:e,protocol_port:t}}get formItems(){return[{name:"weight",label:t("Weight"),type:"input-number",required:!0},{name:"protocol_port",label:t("Port"),type:"input-number",required:!0,validator:this.protocolValidator}]}}a.Edit=m,(0,d.default)(m,"id","member-edit"),(0,d.default)(m,"title",t("Edit Member")),(0,d.default)(m,"buttonText",t("Edit Member")),(0,d.default)(m,"policy","os_load-balancer_api:member:put"),(0,d.default)(m,"allowed",(e=>o.default.resolve("ACTIVE"===e.provisioning_status)));a.default=(0,u.inject)("rootStore")((0,u.observer)(m))},4388:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.VPN=void 0;var l=r(485),o=n(r(1667)),s=r(81),d=n(r(4389)),u=n(r(4394)),c=n(r(4399)),f=n(r(4404)),p=n(r(4409));class m extends o.default{get name(){return t("VPN")}get checkEndpoint(){return!0}get endpoint(){return(0,s.vpnEndpoint)()}get tabs(){return[{title:t("VPN Gateways"),key:"vpn_gateway",component:d.default},{title:t("VPN EndPoint Groups"),key:"vpn_endpoint_groups",component:u.default},{title:t("IKE Policies"),key:"ike_policy",component:c.default},{title:t("IPsec Policies"),key:"ipsec_policy",component:f.default},{title:t("IPsec Site Connections"),key:"ipsec_site_connections",component:p.default}]}}a.VPN=m;a.default=(0,l.inject)("rootStore")((0,l.observer)(m))},4389:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.VPNGateway=void 0;var l=n(r(42)),o=r(485),s=n(r(1626)),d=r(1738),u=r(1701),c=r(492),f=r(4390);class p extends s.default{constructor(){super(...arguments),(0,l.default)(this,"getColumns",(()=>[c.idNameColumn,{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage},{title:t("Description"),dataIndex:"description",render:e=>e||"-",isHideable:!0},{title:t("External IP"),dataIndex:"null",render:(e,t)=>t.external_v4_ip||t.external_v6_ip},{title:t("Router ID"),dataIndex:"router_id",isHideable:!0},{title:t("Status"),dataIndex:"status",valueMap:u.vpnStatus}]))}init(){this.store=new d.VpnServicesStore,this.downloadStore=new d.VpnServicesStore}get isFilterByBackend(){return!0}get fetchDataByCurrentProject(){return!0}get policy(){return"get_vpnservice"}get name(){return t("vpn services")}get hasTab(){return!0}get adminPageHasProjectFilter(){return!0}get actionConfigs(){return this.isAdminPage?f.adminConfigs:f.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Status"),name:"status",options:u.vpnStatusOptions},{label:t("Router ID"),name:"router_id"},{label:t("External IP(V4)"),name:"external_v4_ip"},{label:t("External IP(V6)"),name:"external_v6_ip"}]}}a.VPNGateway=p;a.default=(0,o.inject)("rootStore")((0,o.observer)(p))},4390:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.adminConfigs=t.actionConfigs=void 0;var n=i(a(4391)),l=i(a(4392)),o=i(a(4393));t.actionConfigs={rowActions:{firstAction:l.default,moreActions:[{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]},t.adminConfigs={rowActions:{moreActions:[{action:o.default}]},batchActions:[o.default]}},4391:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(88)),m=f(r(42)),h=r(485),g=r(1625),v=r(720),_=f(r(1738)),b=r(1651);function y(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=y(Object(i),!0)).call(a,(function(t){(0,m.default)(e,t,i[t])})):d?u(e,d(i)):s(r=y(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class I extends g.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",(e=>{var{name:t,description:a,router_id:r}=e;return _.default.create({name:t,description:a,router_id:r.selectedRowKeys[0]})}))}get name(){return t("create vpn")}static get modalSize(){return"large"}getModalSize(){return"large"}init(){this.routerStore=new v.RouterStore}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},A(A({name:"router_id",label:t("Router"),type:"select-table",backendPageStore:this.routerStore,extraParams:{project_id:this.currentProjectId}},(0,b.getRouterSelectTablePropsBackend)(this)),{},{disabledFunc:e=>!e.external_gateway_info,required:!0})]}}a.Create=I,(0,m.default)(I,"id","create-vpn"),(0,m.default)(I,"title",t("Create VPN")),(0,m.default)(I,"buttonText",t("Create")),(0,m.default)(I,"policy","create_vpnservice"),(0,m.default)(I,"allowed",(()=>p.default.resolve(!0)));a.default=(0,h.inject)("rootStore")((0,h.observer)(I))},4392:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var l=n(r(88)),o=n(r(42)),s=r(485),d=r(1625),u=n(r(1738));class c extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{name:t,description:a}=e;return u.default.update({id:this.item.id},{name:t,description:a})}))}get defaultValue(){return{name:this.item.name,description:this.item.description}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1}]}}a.Edit=c,(0,o.default)(c,"id","edit-vpn"),(0,o.default)(c,"title",t("Edit VPN")),(0,o.default)(c,"buttonText",t("Edit")),(0,o.default)(c,"policy","update_vpnservice"),(0,o.default)(c,"allowed",(e=>"ACTIVE"!==e.status?l.default.resolve(!1):l.default.resolve(!0)));a.default=(0,s.inject)("rootStore")((0,s.observer)(c))},4393:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(93)),o=n(r(71)),s=n(r(88)),d=n(r(61)),u=n(r(42)),c=r(1625),f=r(1635),p=n(r(1738)),m=n(r(156)),h=n(r(1659));class g extends c.ConfirmAction{constructor(){var e;super(...arguments),e=this,(0,u.default)(this,"policy","delete_vpnservice"),(0,u.default)(this,"allowedCheckFunc",(e=>!e||this.isCurrentProject(e))),(0,u.default)(this,"onSubmit",function(){var a=(0,d.default)((function*(a){var r,i=yield h.default.fetchList({vpnservice_id:a.id});return i.length>0?(e.showConfirmErrorBeforeSubmit=!0,e.confirmErrorMessageBeforeSubmit=(0,l.default)(r="".concat(t("Unable to {action}, because : {reason}, instance: {name}.",{action:e.actionName||e.title,name:a.name,reason:t("the vpn gateway is in use")}),"\n\n        ")).call(r,t("Used by tunnel(s): {names}. ID(s): {ids}",{names:(0,o.default)(i).call(i,(e=>e.name)).join(", "),ids:(0,o.default)(i).call(i,(e=>e.id)).join(", ")})),s.default.reject({errorMsg:e.confirmErrorMessageBeforeSubmit})):p.default.delete(a)}));return function(e){return a.apply(this,arguments)}}())}get id(){return"delete-vpnservice"}get title(){return t("Delete VPN")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete vpn")}isCurrentProject(e){var t=m.default;return!(!f.checkSystemAdmin&&e.project_id!==t.user.project.id)}}a.default=g},4394:function(e,a,r){"use strict";var i=r(201),n=r(20),l=r(29),o=r(22);n(a,"__esModule",{value:!0}),a.default=a.EndpointGroup=void 0;var s=o(r(93)),d=o(r(71)),u=o(r(88));r(416);var c=o(r(417));r(1631);var f=o(r(1632));r(1628);var p=o(r(1629)),m=o(r(61));r(733);var h=o(r(734)),g=o(r(753)),v=o(r(42)),_=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=C(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},i=n&&l;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=i?l(e,o):null;s&&(s.get||s.set)?n(r,o,s):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}(r(0)),b=r(485),y=o(r(1626)),A=r(1739),I=(r(200),r(706),r(491)),S=r(492),x=r(4395);function C(e){if("function"!=typeof i)return null;var t=new i,a=new i;return(C=function(e){return e?a:t})(e)}class w extends y.default{constructor(){super(...arguments),(0,v.default)(this,"getColumns",(()=>[S.idNameColumn,{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage},{title:t("Description"),dataIndex:"description",render:e=>e||"-",isHideable:!0},{title:t("Type"),dataIndex:"type",isHideable:!0,render:e=>{switch(e){case"subnet":return t("Local");case"cidr":return t("Peer");default:return""}}},{title:t("Endpoint Counts"),dataIndex:"endpoints",render:(e,a)=>{var r=_.default.createElement(P,{record:a});return _.default.createElement(_.default.Fragment,null,e.length," ",_.default.createElement(h.default,{content:r,title:"cidr"===a.type?t("Peer Network"):t("Local Network"),destroyTooltipOnHide:!0},_.default.createElement(g.default,null)))},stringify:e=>{var t;return(0,s.default)(t="".concat(e.length,"(")).call(t,e.join(","),")")}}]))}init(){this.store=new A.VpnEndPointGroupStore,this.downloadStore=new A.VpnEndPointGroupStore}get isFilterByBackend(){return!0}get fetchDataByCurrentProject(){return!0}get policy(){return"get_endpoint_group"}get aliasPolicy(){return"neutron:get_endpoint_group"}get name(){return t("vpn endpoint groups")}get adminPageHasProjectFilter(){return!0}get hasTab(){return!0}get actionConfigs(){return this.isAdminPage?x.adminConfigs:x.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"}]}}function P(e){var{record:t}=e,{type:a,endpoints:r}=t,[i,n]=(0,_.useState)([]);return(0,_.useEffect)((()=>{"subnet"===a&&0===i.length&&(0,m.default)((function*(){var e=(0,d.default)(r).call(r,(e=>(new I.SubnetStore).fetchDetail({id:e}))),t=yield u.default.all(e);n(t)}))()})),"cidr"===a?_.default.createElement(f.default,null,(0,d.default)(r).call(r,(e=>{var a;return _.default.createElement(p.default,{span:24,key:(0,s.default)(a="".concat(e,"_")).call(a,t.id)},e)}))):0===i.length?_.default.createElement(c.default,null):_.default.createElement(f.default,{style:{maxWidth:550}},(0,d.default)(i).call(i,(e=>{var a;return _.default.createElement(p.default,{span:24,key:(0,s.default)(a="".concat(e,"_")).call(a,t.id)},_.default.createElement(f.default,{gutter:24},_.default.createElement(p.default,{span:6},e.name),_.default.createElement(p.default,{span:6},e.cidr),_.default.createElement(p.default,{span:12},e.id)))})))}a.EndpointGroup=w;a.default=(0,b.inject)("rootStore")((0,b.observer)(w))},4395:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.adminConfigs=t.actionConfigs=void 0;var n=i(a(4396)),l=i(a(4397)),o=i(a(4398));t.actionConfigs={rowActions:{firstAction:l.default,moreActions:[{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]},t.adminConfigs={rowActions:{moreActions:[{action:o.default}]},batchActions:[o.default]}},4396:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(39)),m=f(r(1768)),h=f(r(289)),g=f(r(88)),v=f(r(61)),_=f(r(72)),b=f(r(42)),y=r(485),A=r(1625),I=r(707),S=r(720),x=r(491),C=f(r(1739)),w=r(1651),P=r(1657),E=["name","description"];function D(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=D(Object(i),!0)).call(a,(function(t){(0,b.default)(e,t,i[t])})):d?u(e,d(i)):s(r=D(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}var{isCidr:N,isIPv6CidrOnly:R}=I.ipValidate;class M extends A.ModalAction{constructor(){var e;super(...arguments),e=this,(0,b.default)(this,"onSubmit",(e=>{var{type:t}=this.state,{name:a,description:r}=e,i=(0,_.default)(e,E),n={name:a,description:r,type:t};if("subnet"===t){var{subnet_id:l}=i;n.endpoints=l.selectedRowKeys}else if("cidr"===t){var{endpoints:o}=i;n.endpoints=o.split("\n")}return C.default.create(n)})),(0,b.default)(this,"handleRouterChange",function(){var t=(0,v.default)((function*(t){var a;e.setState({subnetLoading:!0});var r=yield(0,P.getPortsWithFixedIPs)(),i=(0,P.getSubnetToRouter)(r,t.selectedRows,!1);e.setState({subnets:(0,p.default)(a=e.allSubnets).call(a,(e=>(0,m.default)(i).call(i,(t=>t.subnet_id===e.id))>-1)),subnetLoading:!1}),e.formRef.current.resetFields(["subnet_id"])}));return function(e){return t.apply(this,arguments)}}())}get name(){return t("create vpn endpoint group")}static get modalSize(){return"large"}getModalSize(){return"large"}init(){this.routerStore=new S.RouterStore,this.subnetStore=new x.SubnetStore,this.state={subnets:[],type:"subnet",subnetLoading:!0},this.getAllSubnets()}getAllSubnets(){var e=this;return(0,v.default)((function*(){e.allSubnets=yield e.subnetStore.pureFetchList(),e.setState({subnetLoading:!1})}))()}get defaultValue(){return{type:"subnet"}}get formItems(){var{subnets:e,type:a,subnetLoading:r}=this.state,i="subnet"===a;return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"type",label:t("Type"),type:"select",required:!0,options:[{label:t("Peer"),value:"cidr"},{label:t("Local"),value:"subnet"}],onChange:e=>{this.setState({type:e})}},k(k({name:"router_id",label:t("Router"),type:"select-table",backendPageStore:this.routerStore,extraParams:{project_id:this.currentProjectId}},(0,w.getRouterSelectTablePropsBackend)(this)),{},{required:!0,onChange:this.handleRouterChange,hidden:!i}),{name:"subnet_id",label:t("Subnet"),type:"select-table",data:e,isLoading:r,isMulti:!0,columns:[{title:t("Name"),dataIndex:"name",isLink:!0},{title:t("CIDR"),dataIndex:"cidr"}],required:!0,hidden:!i},{name:"endpoints",label:t("Peer Network Segment"),type:"textarea",validator:(e,a)=>{var r;return(0,h.default)(r=a.split("\n")).call(r,(e=>!N(e)&&!R(e)))?g.default.reject(new Error(t("Invalid: CIDR Format Error(e.g. 10.10.10.0/24)"))):g.default.resolve(!0)},extra:t("Please fill in the peer network segment and subnet mask of CIDR format, the written subnets should be under the same router, one per line."),hidden:i,required:!0}]}}a.Create=M,(0,b.default)(M,"id","create-vpn-endpoint-group"),(0,b.default)(M,"title",t("Create VPN Endpoint Group")),(0,b.default)(M,"buttonText",t("Create")),(0,b.default)(M,"policy","create_endpoint_group"),(0,b.default)(M,"aliasPolicy","neutron:create_endpoint_group"),(0,b.default)(M,"allowed",(()=>g.default.resolve(!0)));a.default=(0,y.inject)("rootStore")((0,y.observer)(M))},4397:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var l=n(r(88)),o=n(r(42)),s=r(485),d=r(1625),u=n(r(1739));class c extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{name:t,description:a}=e;return u.default.update({id:this.item.id},{name:t,description:a})}))}get defaultValue(){return{name:this.item.name,description:this.item.description}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1}]}}a.Edit=c,(0,o.default)(c,"id","edit-vpn-endpoint-groups"),(0,o.default)(c,"title",t("Edit VPN EndPoint Groups")),(0,o.default)(c,"buttonText",t("Edit")),(0,o.default)(c,"policy","update_endpoint_group"),(0,o.default)(c,"aliasPolicy","neutron:update_endpoint_group"),(0,o.default)(c,"allowed",(()=>l.default.resolve(!0)));a.default=(0,s.inject)("rootStore")((0,s.observer)(c))},4398:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(93)),o=n(r(71)),s=n(r(88)),d=n(r(61)),u=n(r(42)),c=r(1625),f=r(1635),p=n(r(1739)),m=n(r(1659)),h=n(r(156));class g extends c.ConfirmAction{constructor(){var e;super(...arguments),e=this,(0,u.default)(this,"policy","delete_endpoint_group"),(0,u.default)(this,"aliasPolicy","neutron:delete_endpoint_group"),(0,u.default)(this,"allowedCheckFunc",(e=>!e||this.isCurrentProject(e))),(0,u.default)(this,"onSubmit",function(){var a=(0,d.default)((function*(a){var r;switch(a.type){case"cidr":r={peer_ep_group_id:a.id};break;case"subnet":r={local_ep_group_id:a.id}}var i,n=yield m.default.fetchList(r);return n.length>0?(e.showConfirmErrorBeforeSubmit=!0,e.confirmErrorMessageBeforeSubmit=(0,l.default)(i="".concat(t("Unable to {action}, because : {reason}, instance: {name}.",{action:e.actionName||e.title,name:a.name,reason:t("the policy is in use")}),"\n\n        ")).call(i,t("Used by tunnel(s): {names}. ID(s): {ids}",{names:(0,o.default)(n).call(n,(e=>e.name)).join(", "),ids:(0,o.default)(n).call(n,(e=>e.id)).join(", ")})),s.default.reject({errorMsg:e.confirmErrorMessageBeforeSubmit})):p.default.delete(a)}));return function(e){return a.apply(this,arguments)}}())}get id(){return"delete-vpn-endpoint-group"}get title(){return t("Delete VPN EndPoint Groups")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete vpn endpoint groups")}isCurrentProject(e){var t=h.default;return!(!(0,f.checkSystemAdmin)()&&e.project_id!==t.user.project.id)}}a.default=g},4399:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.IKEPolicy=void 0;var l=n(r(71)),o=n(r(43)),s=n(r(93)),d=n(r(42)),u=n(r(0)),c=r(485),f=n(r(1626)),p=r(1717),m=r(1701),h=r(492),g=r(4400);class v extends f.default{constructor(){super(...arguments),(0,d.default)(this,"getColumns",(()=>[h.idNameColumn,{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage},{title:t("Description"),dataIndex:"description",render:e=>e||"-",isHideable:!0},{title:t("Auth Algorithm"),dataIndex:"auth_algorithm",isHideable:!0},{title:t("Encryption Algorithm"),dataIndex:"encryption_algorithm",isHideable:!0},{title:t("IKE Version"),dataIndex:"ike_version",isHideable:!0},{title:t("Lifetime"),dataIndex:"lifetime",isHideable:!0,render:e=>{var t;return u.default.createElement("ul",{style:{listStyle:"none",paddingLeft:0}},(0,l.default)(t=(0,o.default)(e)).call(t,((t,a)=>{var r,i;return u.default.createElement("li",{key:(0,s.default)(r="".concat(a,"_")).call(r,e[t],"_lifeTime")},(0,s.default)(i="".concat(t,": ")).call(i,e[t]))})))},stringify:e=>{var t;return(0,l.default)(t=(0,o.default)(e)).call(t,(t=>{var a;return(0,s.default)(a="".concat(t,": ")).call(a,e[t])})).join(" | ")}},{title:t("PFS"),dataIndex:"pfs",isHideable:!0}]))}init(){this.store=new p.VpnIKEPolicyStore,this.downloadStore=new p.VpnIKEPolicyStore}get isFilterByBackend(){return!0}get fetchDataByCurrentProject(){return!0}get policy(){return"get_ikepolicy"}get name(){return t("vpn IKE policy")}get adminPageHasProjectFilter(){return!0}get hasTab(){return!0}get actionConfigs(){return this.isAdminPage?g.adminConfigs:g.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Auth Algorithm"),name:"auth_algorithm",options:m.authAlgorithmOptions},{label:t("Encryption Algorithm"),name:"encryption_algorithm",options:m.encryptionAlgorithmOptions},{label:t("IKE Version"),name:"ike_version",options:m.ikePolicyIKEVersionOptions},{label:t("PFS"),name:"pfs",options:m.pfsOptions}]}}a.IKEPolicy=v;a.default=(0,c.inject)("rootStore")((0,c.observer)(v))},4400:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.adminConfigs=t.actionConfigs=void 0;var n=i(a(4401)),l=i(a(4402)),o=i(a(4403));t.actionConfigs={rowActions:{firstAction:l.default,moreActions:[{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]},t.adminConfigs={rowActions:{moreActions:[{action:o.default}]},batchActions:[o.default]}},4401:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(88)),m=f(r(72)),h=f(r(42)),g=r(485),v=r(1625),_=f(r(1717)),b=r(1701),y=["lifetimeValue"];function A(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class I extends v.ModalAction{constructor(){super(...arguments),(0,h.default)(this,"onSubmit",(e=>{var{lifetimeValue:t}=e,a=function(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=A(Object(i),!0)).call(a,(function(t){(0,h.default)(e,t,i[t])})):d?u(e,d(i)):s(r=A(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}({lifetime:{units:"seconds",value:t}},(0,m.default)(e,y));return _.default.create(a)}))}get name(){return t("create vpn ike policy")}get defaultValue(){return{auth_algorithm:"sha1",encryption_algorithm:"aes-128",pfs:"group5",lifetimeValue:3600,ike_version:"v1"}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"auth_algorithm",label:t("Auth Algorithm"),type:"select",options:b.authAlgorithmOptions,required:!0},{name:"encryption_algorithm",label:t("Encryption Algorithm"),type:"select",options:b.encryptionAlgorithmOptions,required:!0},{name:"pfs",label:t("PFS"),type:"select",options:b.pfsOptions,required:!0},{name:"lifetimeValue",label:t("Lifetime Value"),type:"input-number",min:0,required:!0},{name:"ike_version",label:t("IKE Version"),type:"select",options:b.ikePolicyIKEVersionOptions,required:!0}]}}a.Create=I,(0,h.default)(I,"id","create-vpn-ike-policy"),(0,h.default)(I,"title",t("Create VPN IKE Policy")),(0,h.default)(I,"buttonText",t("Create")),(0,h.default)(I,"policy","create_ikepolicy"),(0,h.default)(I,"allowed",(()=>p.default.resolve(!0)));a.default=(0,g.inject)("rootStore")((0,g.observer)(I))},4402:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p=f(r(88)),m=f(r(93)),h=f(r(71)),g=f(r(72)),v=f(r(42)),_=f(r(0)),b=r(485),y=r(1625),A=f(r(1717)),I=f(r(1659)),S=["lifetimeValue","canSubmit"],x=["lifetime"];function C(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=C(Object(i),!0)).call(a,(function(t){(0,v.default)(e,t,i[t])})):d?u(e,d(i)):s(r=C(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class P extends y.ModalAction{constructor(){super(...arguments),(0,v.default)(this,"onSubmit",(e=>{var{lifetimeValue:t,canSubmit:a}=e,r=w({lifetime:{units:"seconds",value:t}},(0,g.default)(e,S));return A.default.update({id:this.item.id},r)}))}init(){this.state={canSubmit:!0,connections:[]},I.default.fetchList({ikepolicy_id:this.item.id}).then((e=>{e.length>0&&this.setState({canSubmit:!1,connections:e})}))}get defaultValue(){var e=this.item,{lifetime:t}=e;return w(w({},(0,g.default)(e,x)),{},{lifetimeValue:t.value})}get formItems(){var e,a,r,i,{canSubmit:n}=this.state;return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"canSubmit",label:t("Status"),component:_.default.createElement(_.default.Fragment,null,t("In Use")),validator:()=>{var e,{connections:a}=this.state;return n?p.default.resolve(!0):p.default.reject(new Error((0,m.default)(e="".concat(t("Unable to {action}, because : {reason}, instance: {name}.",{action:this.name,name:this.item.name,reason:t("the policy is in use")}),"\n\n        ")).call(e,t("Used by tunnel(s): {names}. ID(s): {ids}",{names:(0,h.default)(a).call(a,(e=>e.name)).join(", "),ids:(0,h.default)(a).call(a,(e=>e.id)).join(", ")}))))},hidden:n},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"auth_algorithm",label:t("Auth Algorithm"),type:"select",options:(0,h.default)(e=["sha1","sha256","sha384","sha512"]).call(e,(e=>({label:e.toUpperCase(),value:e}))),required:!0},{name:"encryption_algorithm",label:t("Encryption Algorithm"),type:"select",options:(0,h.default)(a=["3des","aes-128","aes-192","aes-256"]).call(a,(e=>({label:e.toUpperCase(),value:e}))),required:!0},{name:"pfs",label:t("PFS"),type:"select",options:(0,h.default)(r=["group2","group5","group14"]).call(r,(e=>({label:e,value:e}))),required:!0},{name:"lifetimeValue",label:t("Lifetime Value"),type:"input-number",min:0,required:!0},{name:"ike_version",label:t("IKE Version"),type:"select",options:(0,h.default)(i=["v1","v2"]).call(i,(e=>({label:e,value:e}))),required:!0}]}}a.Edit=P,(0,v.default)(P,"id","edit-vpn-ike-policy"),(0,v.default)(P,"title",t("Edit VPN IKE Policy")),(0,v.default)(P,"buttonText",t("Edit")),(0,v.default)(P,"policy","update_ikepolicy"),(0,v.default)(P,"allowed",(()=>p.default.resolve(!0)));a.default=(0,b.inject)("rootStore")((0,b.observer)(P))},4403:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(93)),o=n(r(71)),s=n(r(88)),d=n(r(61)),u=n(r(42)),c=r(1625),f=r(1635),p=n(r(1717)),m=n(r(1659)),h=n(r(156));class g extends c.ConfirmAction{constructor(){var e;super(...arguments),e=this,(0,u.default)(this,"policy","delete_ikepolicy"),(0,u.default)(this,"allowedCheckFunc",(e=>!e||this.isCurrentProject(e))),(0,u.default)(this,"onSubmit",function(){var a=(0,d.default)((function*(a){var r,i=yield m.default.fetchList({ikepolicy_id:a.id});return i.length>0?(e.showConfirmErrorBeforeSubmit=!0,e.confirmErrorMessageBeforeSubmit=(0,l.default)(r="".concat(t("Unable to {action}, because : {reason}, instance: {name}.",{action:e.actionName||e.title,name:a.name,reason:t("the policy is in use")}),"\n\n        ")).call(r,t("Used by tunnel(s): {names}. ID(s): {ids}",{names:(0,o.default)(i).call(i,(e=>e.name)).join(", "),ids:(0,o.default)(i).call(i,(e=>e.id)).join(", ")})),s.default.reject({errorMsg:e.confirmErrorMessageBeforeSubmit})):p.default.delete(a)}));return function(e){return a.apply(this,arguments)}}())}get id(){return"delete-vpn-ike-policy"}get title(){return t("Delete VPN IKE Policy")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete vpn IKE policy")}isCurrentProject(e){var t=h.default;return!(!(0,f.checkSystemAdmin)()&&e.project_id!==t.user.project.id)}}a.default=g},4404:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.IPsecPolicy=void 0;var l=n(r(71)),o=n(r(43)),s=n(r(93)),d=n(r(42)),u=n(r(0)),c=r(485),f=n(r(1626)),p=r(1718),m=r(1701),h=r(492),g=r(4405);class v extends f.default{constructor(){super(...arguments),(0,d.default)(this,"getColumns",(()=>[h.idNameColumn,{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage},{title:t("Description"),dataIndex:"description",render:e=>e||"-",isHideable:!0},{title:t("Auth Algorithm"),dataIndex:"auth_algorithm",isHideable:!0},{title:t("Encapsulation Mode"),dataIndex:"encapsulation_mode",isHideable:!0},{title:t("Encryption Algorithm"),dataIndex:"encryption_algorithm",isHideable:!0},{title:t("Transform Protocol"),dataIndex:"transform_protocol",idHideable:!0},{title:t("Lifetime"),dataIndex:"lifetime",isHideable:!0,render:e=>{var t;return u.default.createElement("ul",{style:{listStyle:"none",paddingLeft:0}},(0,l.default)(t=(0,o.default)(e)).call(t,((t,a)=>{var r,i;return u.default.createElement("li",{key:(0,s.default)(r="".concat(a,"_")).call(r,e[t],"_lifeTime")},(0,s.default)(i="".concat(t,": ")).call(i,e[t]))})))},stringify:e=>{var t;return(0,l.default)(t=(0,o.default)(e)).call(t,(t=>{var a;return(0,s.default)(a="".concat(t,": ")).call(a,e[t])})).join(" | ")}},{title:t("PFS"),dataIndex:"pfs",isHideable:!0}]))}init(){this.store=new p.VpnIPsecPolicyStore,this.downloadStore=new p.VpnIPsecPolicyStore}get isFilterByBackend(){return!0}get fetchDataByCurrentProject(){return!0}get policy(){return"get_ipsecpolicy"}get name(){return t("vpn IPsec policy")}get adminPageHasProjectFilter(){return!0}get hasTab(){return!0}get actionConfigs(){return this.isAdminPage?g.adminConfigs:g.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Auth Algorithm"),name:"auth_algorithm",options:m.authAlgorithmOptions},{label:t("Encapsulation Mode"),name:"encapsulation_mode",options:m.ipsecPolicyEncapsulationModeOptions},{label:t("Encryption Algorithm"),name:"encryption_algorithm",options:m.encryptionAlgorithmOptions},{label:t("Transform Protocol"),name:"transform_protocol",options:m.ipsecPolicyTransformProtocolOptions},{label:t("PFS"),name:"pfs",options:m.pfsOptions}]}}a.IPsecPolicy=v;a.default=(0,c.inject)("rootStore")((0,c.observer)(v))},4405:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.adminConfigs=t.actionConfigs=void 0;var n=i(a(4406)),l=i(a(4407)),o=i(a(4408));t.actionConfigs={rowActions:{firstAction:l.default,moreActions:[{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]},t.adminConfigs={rowActions:{moreActions:[{action:o.default}]},batchActions:[o.default]}},4406:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(88)),m=f(r(72)),h=f(r(42)),g=r(485),v=r(1625),_=f(r(1718)),b=r(1701),y=["lifetimeValue"];function A(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class I extends v.ModalAction{constructor(){super(...arguments),(0,h.default)(this,"onSubmit",(e=>{var{lifetimeValue:t}=e,a=function(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=A(Object(i),!0)).call(a,(function(t){(0,h.default)(e,t,i[t])})):d?u(e,d(i)):s(r=A(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}({lifetime:{units:"seconds",value:t}},(0,m.default)(e,y));return _.default.create(a)}))}get name(){return t("create vpn ipsec policy")}get defaultValue(){return{auth_algorithm:"sha1",encryption_algorithm:"aes-128",pfs:"group5",encapsulation_mode:"tunnel",lifetimeValue:3600,transform_protocol:"esp"}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"auth_algorithm",label:t("Auth Algorithm"),type:"select",options:b.authAlgorithmOptions,required:!0},{name:"encapsulation_mode",label:t("Encapsulation Mode"),type:"select",options:b.ipsecPolicyEncapsulationModeOptions,required:!0},{name:"encryption_algorithm",label:t("Encryption Algorithm"),type:"select",options:b.encryptionAlgorithmOptions,required:!0},{name:"pfs",label:t("PFS"),type:"select",options:b.pfsOptions,required:!0},{name:"lifetimeValue",label:t("Lifetime Value"),type:"input-number",min:0,required:!0},{name:"transform_protocol",label:t("Transform Protocol"),type:"select",options:b.ipsecPolicyTransformProtocolOptions,required:!0}]}}a.Create=I,(0,h.default)(I,"id","create-vpn-ipsec-policy"),(0,h.default)(I,"title",t("Create VPN IPsec Policy")),(0,h.default)(I,"buttonText",t("Create")),(0,h.default)(I,"policy","create_ipsecpolicy"),(0,h.default)(I,"allowed",(()=>p.default.resolve(!0)));a.default=(0,g.inject)("rootStore")((0,g.observer)(I))},4407:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p=f(r(88)),m=f(r(93)),h=f(r(71)),g=f(r(72)),v=f(r(42)),_=f(r(0)),b=r(485),y=r(1625),A=f(r(1718)),I=f(r(1659)),S=["lifetimeValue"],x=["lifetime","canSubmit"];function C(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=C(Object(i),!0)).call(a,(function(t){(0,v.default)(e,t,i[t])})):d?u(e,d(i)):s(r=C(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class P extends y.ModalAction{constructor(){super(...arguments),(0,v.default)(this,"onSubmit",(e=>{var{lifetimeValue:t}=e,a=w({lifetime:{units:"seconds",value:t}},(0,g.default)(e,S));return A.default.update({id:this.item.id},a)}))}init(){this.state={canSubmit:!0,connections:[]},I.default.fetchList({ipsecpolicy_id:this.item.id}).then((e=>{e.length>0&&this.setState({canSubmit:!1,connections:e})}))}get defaultValue(){var e=this.item,{lifetime:t,canSubmit:a}=e;return w(w({},(0,g.default)(e,x)),{},{lifetimeValue:t.value})}get formItems(){var e,a,r,i,n,{canSubmit:l}=this.state;return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"canSubmit",label:t("Status"),component:_.default.createElement(_.default.Fragment,null,t("In Use")),validator:()=>{var e,{connections:a}=this.state;return l?p.default.resolve(!0):p.default.reject(new Error((0,m.default)(e="".concat(t("Unable to {action}, because : {reason}, instance: {name}.",{action:this.name,name:this.item.name,reason:t("the policy is in use")}),"\n\n        ")).call(e,t("Used by tunnel(s): {names}. ID(s): {ids}",{names:(0,h.default)(a).call(a,(e=>e.name)).join(", "),ids:(0,h.default)(a).call(a,(e=>e.id)).join(", ")}))))},hidden:l},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"auth_algorithm",label:t("Auth Algorithm"),type:"select",options:(0,h.default)(e=["sha1","sha256","sha384","sha512"]).call(e,(e=>({label:e.toUpperCase(),value:e}))),required:!0},{name:"encapsulation_mode",label:t("Encapsulation Mode"),type:"select",options:(0,h.default)(a=["tunnel","transport"]).call(a,(e=>({label:e,value:e}))),required:!0},{name:"encryption_algorithm",label:t("Encryption Algorithm"),type:"select",options:(0,h.default)(r=["3des","aes-128","aes-192","aes-256"]).call(r,(e=>({label:e.toUpperCase(),value:e}))),required:!0},{name:"pfs",label:t("PFS"),type:"select",options:(0,h.default)(i=["group2","group5","group14"]).call(i,(e=>({label:e,value:e}))),required:!0},{name:"lifetimeValue",label:t("Lifetime Value"),type:"input-number",min:0,required:!0},{name:"transform_protocol",label:t("Transform Protocol"),type:"select",options:(0,h.default)(n=["esp","ah","ah-esp"]).call(n,(e=>({label:e,value:e}))),required:!0}]}}a.Edit=P,(0,v.default)(P,"id","edit-vpn-ipsec-policy"),(0,v.default)(P,"title",t("Edit VPN IPsec Policy")),(0,v.default)(P,"buttonText",t("Edit")),(0,v.default)(P,"policy","update_ipsecpolicy"),(0,v.default)(P,"allowed",(()=>p.default.resolve(!0)));a.default=(0,b.inject)("rootStore")((0,b.observer)(P))},4408:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(93)),o=n(r(71)),s=n(r(88)),d=n(r(61)),u=n(r(42)),c=r(1625),f=r(1635),p=n(r(1718)),m=n(r(1659)),h=n(r(156));class g extends c.ConfirmAction{constructor(){var e;super(...arguments),e=this,(0,u.default)(this,"policy","delete_ipsecpolicy"),(0,u.default)(this,"allowedCheckFunc",(e=>!e||this.isCurrentProject(e))),(0,u.default)(this,"onSubmit",function(){var a=(0,d.default)((function*(a){var r,i=yield m.default.fetchList({ipsecpolicy_id:a.id});return i.length>0?(e.showConfirmErrorBeforeSubmit=!0,e.confirmErrorMessageBeforeSubmit=(0,l.default)(r="".concat(t("Unable to {action}, because : {reason}, instance: {name}.",{action:e.actionName||e.title,name:a.name,reason:t("the policy is in use")}),"\n\n        ")).call(r,t("Used by tunnel(s): {names}. ID(s): {ids}",{names:(0,o.default)(i).call(i,(e=>e.name)).join(", "),ids:(0,o.default)(i).call(i,(e=>e.id)).join(", ")})),s.default.reject({errorMsg:e.confirmErrorMessageBeforeSubmit})):p.default.delete(a)}));return function(e){return a.apply(this,arguments)}}())}get id(){return"delete-vpn-ipsec-policy"}get title(){return t("Delete VPN IPsec Policy")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete vpn IPsec policy")}isCurrentProject(e){var t=h.default;return!(!(0,f.checkSystemAdmin)()&&e.project_id!==t.user.project.id)}}a.default=g},4409:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.IPsecSiteConnection=void 0;var l=n(r(42)),o=r(485),s=n(r(1626)),d=r(1659),u=r(1701),c=r(2007);class f extends s.default{constructor(){super(...arguments),(0,l.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("ipsecDetail")},{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage},{title:t("Description"),dataIndex:"description",render:e=>e||"-",isHideable:!0},{title:t("Local Endpoint Group ID"),dataIndex:"local_ep_group_id",isHideable:!0},{title:t("Peer Endpoint Group ID"),dataIndex:"peer_ep_group_id",isHideable:!0},{title:t("Peer Address"),dataIndex:"peer_address",isHideable:!0},{title:t("Status"),dataIndex:"status",valueMap:u.vpnStatus}]))}init(){this.store=new d.VpnIPsecConnectionStore,this.downloadStore=new d.VpnIPsecConnectionStore}get isFilterByBackend(){return!0}get fetchDataByCurrentProject(){return!0}get policy(){return"get_ipsec_site_connection"}get name(){return t("ipsec site connection")}get adminPageHasProjectFilter(){return!0}get hasTab(){return!0}get actionConfigs(){return this.isAdminPage?c.adminConfigs:c.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Local Endpoint Group ID"),name:"local_ep_group_id"},{label:t("Peer Endpoint Group ID"),name:"peer_ep_group_id"},{label:t("Peer Address"),name:"peer_address"},{label:t("Status"),name:"status",options:u.vpnStatusOptions}]}}a.IPsecSiteConnection=f;a.default=(0,o.inject)("rootStore")((0,o.observer)(f))},4410:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(88)),m=f(r(71)),h=f(r(39)),g=f(r(93)),v=f(r(116));r(1631);var _=f(r(1632));r(1628);var b=f(r(1629));r(500);var y=f(r(504)),A=f(r(61)),I=f(r(72)),S=f(r(42)),x=f(r(751)),C=f(r(0)),w=r(485),P=r(1625),E=r(707),D=f(r(1738)),k=f(r(1717)),N=f(r(1718)),R=f(r(1739)),M=(r(200),f(r(1659))),T=f(r(4411)),B=["interval","timeout","action","password","confirmPassword","more"];function j(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=j(Object(i),!0)).call(a,(function(t){(0,S.default)(e,t,i[t])})):d?u(e,d(i)):s(r=j(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}var{isIPv4:Q,isIpv6:L}=E.ipValidate;class O extends P.ModalAction{constructor(){super(...arguments),(0,S.default)(this,"onSubmit",(e=>{var t=(0,x.default)({},this.defaultValue,e),{interval:a,timeout:r,action:i,password:n,confirmPassword:l,more:o}=t,s=(0,I.default)(t,B),d=F(F({},s),{},{psk:n,peer_id:s.peer_address,dpd:{interval:a,timeout:r,action:i}});return M.default.create(d)}))}get name(){return t("create ipsec site connection")}init(){this.vpnServiceStore=D.default,this.ikePolicyStore=k.default,this.ipsecPolicyStore=N.default,this.endpointGroupStore=R.default,this.fetchData()}fetchData(){var e=this;return(0,A.default)((function*(){yield p.default.all([e.vpnServiceStore.fetchList(),e.ikePolicyStore.fetchList(),e.ipsecPolicyStore.fetchList(),e.endpointGroupStore.fetchList()])}))()}get defaultValue(){return{mtu:1500,initiator:"bi-directional",action:"hold",interval:30,timeout:120}}get formItems(){var e,a,r,i,n,l,o,s,d,u,c,{local_ep_group_id:f,peer_ep_group_id:A,more:I}=this.state;return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"vpnservice_id",label:t("VPN Service"),type:"select",options:(0,m.default)(e=this.vpnServiceStore.list.data).call(e,(e=>({label:e.name,value:e.id}))),required:!0},{name:"ikepolicy_id",label:t("IKE Policy"),type:"select",options:(0,m.default)(a=this.ikePolicyStore.list.data).call(a,(e=>({label:e.name,value:e.id}))),required:!0},{name:"ipsecpolicy_id",label:t("IPsec Policy"),type:"select",options:(0,m.default)(r=this.ipsecPolicyStore.list.data).call(r,(e=>({label:e.name,value:e.id}))),required:!0},{name:"local_ep_group_id",label:t("Local Endpoint Group"),type:"select",options:(0,m.default)(i=(0,h.default)(n=this.endpointGroupStore.list.data).call(n,(e=>"subnet"===e.type))).call(i,(e=>({label:e.name,value:e.id}))),onChange:e=>{this.setState({local_ep_group_id:e})},required:!0},{name:"local_subnet",type:"label",label:t("Local Subnet"),component:C.default.createElement(T.default,{data:this.endpointGroupStore.list.data,local_ep_group_id:f})},{name:"peer_address",type:"input",label:t("Peer Gateway Public Address"),extra:t("Peer gateway public address for the IPsec site connection"),validator:(e,a)=>{var r;return Q(a)||L(a)?p.default.resolve():p.default.reject(new Error((0,g.default)(r="".concat(t("Invalid")," ")).call(r,t("Peer Gateway Public Address"))))},required:!0},{name:"peer_ep_group_id",label:t("Peer Endpoint Group"),type:"select",options:(0,m.default)(l=(0,h.default)(o=this.endpointGroupStore.list.data).call(o,(e=>"cidr"===e.type))).call(l,(e=>({label:e.name,value:e.id}))),onChange:e=>{this.setState({peer_ep_group_id:e})},required:!0},{name:"peer_cidrs",type:"label",label:t("Peer Cidrs"),component:C.default.createElement(_.default,null,A?(0,m.default)(s=(0,v.default)(d=this.endpointGroupStore.list.data).call(d,(e=>e.id===A)).endpoints).call(s,(e=>C.default.createElement(b.default,{span:24},e))):C.default.createElement(b.default,{span:24},C.default.createElement(y.default,null)))},{name:"password",type:"input-password",label:t("Pre-Shared Key(PSK) String"),otherRule:(0,E.getPasswordOtherRule)("password","instance"),required:!0},{name:"confirmPassword",type:"input-password",label:t("Confirm Shared Key"),otherRule:(0,E.getPasswordOtherRule)("confirmPassword","instance",void 0,t("Pre-Shared Key must be the same with Confirm Shared Key.")),required:!0},{name:"mtu",type:"input-number",label:t("MTU"),min:68,tip:t("The maximum transmission unit (MTU) value to address fragmentation. Minimum value is 68 for IPv4, and 1280 for IPv6."),required:!0,hidden:!I},{name:"initiator",label:t("Initiator Mode"),type:"select",options:(0,m.default)(u=["bi-directional","response-only"]).call(u,(e=>({label:e,value:e}))),tip:t("Indicates whether this VPN can only respond to connections or both respond to and initiate connections."),required:!0,hidden:!I},{name:"action",label:t("DPD Action"),type:"select",options:(0,m.default)(c=["clear","hold","restart","disabled","restart-by-peer"]).call(c,(e=>({label:e,value:e}))),tip:t("DPD actions controls the use of Dead Peer Detection Protocol."),required:!0,hidden:!I},{name:"interval",type:"input-number",label:t("DPD Interval (sec)"),min:0,tip:t("Sec for DPD delay, > 0"),required:!0,hidden:!I},{name:"timeout",type:"input-number",label:t("DPD timeout (sec)"),min:0,tip:t("Sec for DPD timeout, > 0 & > DPD Interval"),required:!0,hidden:!I},{name:"more",label:t("Advanced Options"),type:"more"}]}}a.Create=O,(0,S.default)(O,"id","create-ipsec-site-connection"),(0,S.default)(O,"title",t("Create IPsec Site Connection")),(0,S.default)(O,"buttonText",t("Create")),(0,S.default)(O,"policy","create_ipsec_site_connection"),(0,S.default)(O,"allowed",(()=>p.default.resolve(!0)));a.default=(0,w.inject)("rootStore")((0,w.observer)(O))},4411:function(e,t,a){"use strict";var r=a(201),i=a(20),n=a(29),l=a(22);i(t,"__esModule",{value:!0}),t.default=void 0;var o=l(a(116)),s=l(a(71)),d=l(a(88));a(416);var u=l(a(417));a(1628);var c=l(a(1629));a(500);var f=l(a(504)),p=l(a(61)),m=l(a(140)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},l=i&&n;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=l?n(e,o):null;s&&(s.get||s.set)?i(r,o,s):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}(a(0)),g=l(a(15)),v=(a(200),a(491));function _(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(_=function(e){return e?a:t})(e)}class b extends h.Component{constructor(e){super(e),this.state={subnets:[],isLoading:!0}}componentDidUpdate(e){var{local_ep_group_id:t}=this.props,{local_ep_group_id:a}=e;t!==a&&this.getSubnets()}get currentEndpoints(){var{data:e,local_ep_group_id:t}=this.props;return(0,m.default)((0,o.default)(e).call(e,(e=>e.id===t)),"endpoints",[])}getSubnets(){var e=this;return(0,p.default)((function*(){var t;e.setState({isLoading:!0});var a=(0,s.default)(t=e.currentEndpoints).call(t,(e=>(new v.SubnetStore).fetchDetail({id:e}))),r=yield d.default.all(a);e.setState({subnets:r,isLoading:!1})}))()}render(){var e,{local_ep_group_id:t}=this.props,{subnets:a,isLoading:r}=this.state;return t?r?h.default.createElement(c.default,null,h.default.createElement(u.default,null)):h.default.createElement(h.default.Fragment,null,(0,s.default)(e=this.currentEndpoints).call(e,((e,t)=>h.default.createElement(c.default,{span:24,key:"cep_".concat(t)},(0,m.default)(a[t],"cidr"))))):h.default.createElement(c.default,null,h.default.createElement(f.default,null))}}b.propTypes={data:g.default.array,local_ep_group_id:g.default.string},b.defaultProps={data:[],local_ep_group_id:void 0};t.default=b},4412:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var l=n(r(88)),o=n(r(124)),s=n(r(42)),d=r(485),u=r(1625),c=n(r(1659)),f=["ACTIVE","DOWN"];class p extends u.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{name:t,description:a}=e;return c.default.update({id:this.item.id},{name:t,description:a})}))}get defaultValue(){return{name:this.item.name,description:this.item.description}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1}]}}a.Edit=p,(0,s.default)(p,"id","edit-ipsec-site-connection"),(0,s.default)(p,"title",t("Edit IPsec Site Connection")),(0,s.default)(p,"buttonText",t("Edit")),(0,s.default)(p,"policy","update_ipsec_site_connection"),(0,s.default)(p,"allowed",(e=>l.default.resolve((0,o.default)(f).call(f,e.status)>-1)));a.default=(0,d.inject)("rootStore")((0,d.observer)(p))},4413:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=r(1635),d=n(r(1659)),u=n(r(156));class c extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","delete_ipsec_site_connection"),(0,l.default)(this,"allowedCheckFunc",(e=>!e||this.isCurrentProject(e))),(0,l.default)(this,"onSubmit",(e=>d.default.delete(e)))}get id(){return"delete-ipsec-site-connection"}get title(){return t("Delete IPsec Site Connection")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete ipsec site connection")}isCurrentProject(e){var t=u.default;return!(!(0,s.checkSystemAdmin)()&&e.project_id!==t.user.project.id)}}a.default=c},4414:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.IPsecSiteConnection=void 0;var l=r(485),o=n(r(1627)),s=r(1659),d=r(1701),u=n(r(4415)),c=r(2007);class f extends o.default{init(){this.store=new s.VpnIPsecConnectionStore}get name(){return t("IPsec Site Connection")}get policy(){return"get_ipsec_site_connection"}get listUrl(){return this.getRoutePath("vpn",null,{tab:"ipsec_site_connections"})}get actionConfigs(){return this.isAdminPage?c.adminConfigs:c.actionConfigs}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Project ID"),dataIndex:"project_id",hidden:!this.isAdminPage},{title:t("VPN Service ID"),dataIndex:"vpnservice_id"},{title:t("Status"),dataIndex:"status",valueMap:d.vpnStatus},{title:t("Local Endpoint Group ID"),dataIndex:"local_ep_group_id"},{title:t("Peer Endpoint Group ID"),dataIndex:"peer_ep_group_id"},{title:t("Peer Address"),dataIndex:"peer_address"},{title:t("Peer ID"),dataIndex:"peer_id"},{title:t("Admin State"),dataIndex:"admin_state_up",valueRender:"yesNo"},{title:t("Description"),dataIndex:"description"}]}get tabs(){return[{title:t("Detail"),key:"detail",component:u.default}]}}a.IPsecSiteConnection=f;a.default=(0,l.inject)("rootStore")((0,l.observer)(f))},4415:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var p=f(r(71)),m=f(r(43)),h=f(r(93)),g=f(r(61)),v=f(r(42)),_=r(485),b=f(r(1633)),y=r(1659),A=f(r(0)),I=r(41);function S(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class x extends b.default{constructor(){var e;super(...arguments),e=this,(0,v.default)(this,"fetchData",function(){var t=(0,g.default)((function*(t){e.store.fetchDetailWithPolicyDetail(function(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=S(Object(i),!0)).call(a,(function(t){(0,v.default)(e,t,i[t])})):d?u(e,d(i)):s(r=S(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}({id:e.id,ikePolicyID:e.props.detail.ikepolicy_id,ipsecPolicyID:e.props.detail.ipsecpolicy_id},t)).catch(e.catch)}));return function(e){return t.apply(this,arguments)}}())}init(){this.store=new y.VpnIPsecConnectionStore}get detailData(){return(0,I.toJS)(this.store.detail)}get leftCards(){return[this.ikeInfoCard,this.ipsecInfoCard]}get rightCards(){return[this.advancedInfo]}get ikeInfoCard(){var e=[{label:t("Name"),dataIndex:"name"},{label:t("Description"),dataIndex:"description",render:e=>e||"-"},{label:t("Auth Algorithm"),dataIndex:"auth_algorithm"},{label:t("Encryption Algorithm"),dataIndex:"encryption_algorithm"},{label:t("IKE Version"),dataIndex:"ike_version"},{label:t("Lifetime"),dataIndex:"lifetime",render:e=>{var t;return e&&A.default.createElement("ul",{style:{listStyle:"none",paddingLeft:0}},(0,p.default)(t=(0,m.default)(e)).call(t,((t,a)=>{var r,i;return A.default.createElement("li",{key:(0,h.default)(r="".concat(a,"_")).call(r,e[t],"_lifeTime")},(0,h.default)(i="".concat(t,": ")).call(i,e[t]))})))}},{label:t("PFS"),dataIndex:"pfs"}];return{title:t("IKE Policy"),options:e,sourceData:this.detailData.ikeDetail}}get ipsecInfoCard(){var e=[{label:t("Name"),dataIndex:"name"},{label:t("Description"),dataIndex:"description"},{label:t("Auth Algorithm"),dataIndex:"auth_algorithm"},{label:t("Encapsulation Mode"),dataIndex:"encapsulation_mode"},{label:t("Encryption Algorithm"),dataIndex:"encryption_algorithm"},{label:t("Transform Protocol"),dataIndex:"transform_protocol"},{label:t("Lifetime"),dataIndex:"lifetime",render:e=>{var t;return e&&A.default.createElement("ul",{style:{listStyle:"none",paddingLeft:0}},(0,p.default)(t=(0,m.default)(e)).call(t,((t,a)=>{var r,i;return A.default.createElement("li",{key:(0,h.default)(r="".concat(a,"_")).call(r,e[t],"_lifeTime")},(0,h.default)(i="".concat(t,": ")).call(i,e[t]))})))}},{label:t("PFS"),dataIndex:"pfs"}];return{title:t("IPsec Policy"),options:e,sourceData:this.detailData.ipsecDetail}}get advancedInfo(){var e=[{label:t("MTU"),dataIndex:"mtu"},{label:t("Initiator Mode"),dataIndex:"initiator"},{label:t("DPD Action"),dataIndex:"dpd",render:e=>e&&e.action},{label:t("DPD Interval (sec)"),dataIndex:"dpd",render:e=>e&&e.interval},{label:t("DPD timeout (sec)"),dataIndex:"dpd",render:e=>e&&e.timeout}];return{title:t("Advanced Params"),options:e}}}a.BaseDetail=x;a.default=(0,_.inject)("rootStore")((0,_.observer)(x))},4416:function(e,a,r){"use strict";var i=r(201),n=r(20),l=r(29),o=r(22);n(a,"__esModule",{value:!0}),a.default=a.SecurityGroups=void 0;var s=o(r(203)),d=o(r(42)),u=r(485),c=o(r(1626)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},i=n&&l;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=i?l(e,o):null;s&&(s.get||s.set)?n(r,o,s):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}(r(493)),p=r(412),m=o(r(2008));function h(e){if("function"!=typeof i)return null;var t=new i,a=new i;return(h=function(e){return e?a:t})(e)}class g extends c.default{constructor(){super(...arguments),(0,d.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("securityGroupDetail")},{title:t("Project ID/Name"),dataIndex:"project_name",isHideable:!0,hidden:!this.isAdminPage},{title:t("Description"),dataIndex:"description",isHideable:!0},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]))}init(){this.store=f.default,this.downloadStore=new f.SecurityGroupStore}get policy(){return"get_security_group"}get name(){return t("security groups")}get isRecycleBinDetail(){var e;return this.inDetailPage&&(0,s.default)(e=this.path).call(e,"recycle-bin")}get actionConfigs(){return this.isRecycleBinDetail?p.emptyActionConfig:this.isAdminPage?m.default.actionConfigsAdmin:m.default.actionConfigs}get isFilterByBackend(){return!0}get fetchDataByCurrentProject(){return!0}get adminPageHasProjectFilter(){return!0}get searchFilters(){return[{label:t("Name"),name:"name"}]}}a.SecurityGroups=g;a.default=(0,u.inject)("rootStore")((0,u.observer)(g))},4417:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.CreateAction=void 0;var p=f(r(88)),m=f(r(61)),h=f(r(42)),g=r(485),v=r(1625),_=f(r(493)),b=f(r(486));function y(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=y(Object(i),!0)).call(a,(function(t){(0,h.default)(e,t,i[t])})):d?u(e,d(i)):s(r=y(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}var I=(e,t)=>{var{left:a=0}=e||{},{left:r=0}=t||{};return 0!==a&&(r>=2||-1===r)?1:0};class S extends v.ModalAction{constructor(){super(...arguments),(0,h.default)(this,"onSubmit",(e=>_.default.create(e)))}get name(){return t("Create security group")}init(){this.state.groupQuota={},this.state.ruleQuota={},this.state.quotaLoading=!0,this.projectStore=b.default,this.getQuota()}static get disableSubmit(){var{neutronQuota:{security_group:e={},security_group_rule:t={}}={}}=b.default;return 0===I(e,t)}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,m.default)((function*(){var t=yield e.projectStore.fetchProjectNeutronQuota(),{security_group:a={},security_group_rule:r={}}=t||{};e.setState({groupQuota:a,ruleQuota:r,quotaLoading:!1})}))()}get tips(){return t("This operation creates a security group with default security group rules for the IPv4 and IPv6 ether types.")}get quotaInfo(){var{groupQuota:e={},ruleQuota:a={},quotaLoading:r}=this.state;if(r)return[];var i=I(e,a);return[A(A({},e),{},{add:i,name:"security_group",title:t("Security Group")}),A(A({},a),{},{add:2*i,name:"security_group_rule",title:t("Security Group Rule"),type:"line"})]}get defaultValue(){return{}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",placeholder:t("Please input name"),required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea"}]}}a.CreateAction=S,(0,h.default)(S,"id","create"),(0,h.default)(S,"title",t("Create Security Group")),(0,h.default)(S,"policy","create_security_group"),(0,h.default)(S,"allowed",(()=>p.default.resolve(!0)));a.default=(0,g.inject)("rootStore")((0,g.observer)(S))},4418:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.EditAction=void 0;var l=n(r(88)),o=n(r(42)),s=r(485),d=r(1625),u=n(r(493));class c extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{id:t}=this.item;return u.default.edit({id:t},e)}))}get defaultValue(){var{name:e,description:t}=this.item;return{name:e,description:t}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",placeholder:t("Please input name"),required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea"}]}}a.EditAction=c,(0,o.default)(c,"id","edit"),(0,o.default)(c,"title",t("Edit")),(0,o.default)(c,"policy","update_security_group"),(0,o.default)(c,"allowed",(e=>l.default.resolve("default"!==e.name)));a.default=(0,s.inject)("rootStore")((0,s.observer)(c))},4419:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=n(r(493));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","delete_security_group"),(0,l.default)(this,"hasNoProject",(e=>!e.project_name||"-"===e.project_name)),(0,l.default)(this,"allowedCheckFunc",(e=>this.isAdminPage&&this.hasNoProject(e)||"default"!==e.name)),(0,l.default)(this,"onSubmit",(e=>{var{id:t}=e;return s.default.delete({id:t})}))}get id(){return"delete"}get title(){return t("Delete Security Group")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("Delete Security Group")}}a.default=d},4420:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.SecurityGroupDetail=void 0;var l=n(r(293)),o=r(485),s=r(493),d=n(r(1627)),u=n(r(4421)),c=n(r(2008));class f extends d.default{get name(){return t("security group")}get policy(){return"get_security_group"}get listUrl(){return this.getRoutePath("securityGroup")}get actionConfigs(){return this.isAdminPage?c.default.actionConfigsAdmin:c.default.actionConfigs}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Project ID"),dataIndex:"tenant_id",hidden:!this.isAdminPage},{title:t("Description"),dataIndex:"description"}]}get tabs(){return[{title:t("Rules"),key:"rules",component:u.default}]}init(){this.store=new s.SecurityGroupStore}componentDidUpdate(e){(0,l.default)(this.props.match.params,e.match.params)||this.fetchDataWithPolicy()}}a.SecurityGroupDetail=f;a.default=(0,o.inject)("rootStore")((0,o.observer)(f))},4421:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Rule=void 0;var p=f(r(72)),m=f(r(61)),h=f(r(42)),g=r(485),v=f(r(1626)),_=f(r(764)),b=r(422),y=r(709),A=f(r(4422)),I=["silent"];function S(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=S(Object(i),!0)).call(a,(function(t){(0,h.default)(e,t,i[t])})):d?u(e,d(i)):s(r=S(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class C extends v.default{constructor(){super(...arguments),(0,h.default)(this,"getColumns",(()=>(0,b.getSelfColumns)(this)))}init(){this.store=_.default}get policy(){return"get_security_group_rule"}get name(){return t("security group rules")}getDetailUrl(e){var t=this.isAdminPage?"securityGroupDetailAdmin":"securityGroupDetail";return(0,y.getPath)({key:t,params:{id:e}})}get actionConfigs(){return this.isAdminPage?A.default.actionConfigsAdmin:A.default.actionConfigs}get searchFilters(){return b.filterParams}getData(){var e=arguments,t=this;return(0,m.default)((function*(){var a=e.length>0&&void 0!==e[0]?e[0]:{},{silent:r}=a,i=(0,p.default)(a,I),{detail:n={}}=t.props,{id:l}=n;r&&(t.list.silent=!0),l&&(yield t.store.fetchList(x(x({},i),{},{security_group_id:l}))),t.list.silent=!1}))()}}a.Rule=C;a.default=(0,g.inject)("rootStore")((0,g.observer)(C))},4422:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2009)),l=i(a(4423)),o={rowActions:{firstAction:l.default},batchActions:[l.default],primaryActions:[n.default]},s={rowActions:{firstAction:l.default,moreActions:[]},batchActions:[l.default],primaryActions:[]};t.default={actionConfigs:o,actionConfigsAdmin:s}},4423:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(294)),o=n(r(93)),s=n(r(42)),d=r(1625),u=n(r(764));class c extends d.ConfirmAction{constructor(){super(...arguments),(0,s.default)(this,"policy","delete_security_group_rule"),(0,s.default)(this,"getItemName",(e=>{var a,r,i;if(e.name)return e.name;var n,s,d,u,{ethertype:c,port_range_min:f,port_range_max:p,protocol:m,remote_group_id:h,remote_ip_prefix:g}=e,v="",_=(0,l.default)(f,10),b=(0,l.default)(p,10),y=m.toLowerCase();_&&(v=_===b?(0,o.default)(s="".concat(_," / ")).call(s,y):(0,o.default)(d=(0,o.default)(u="".concat(_," - ")).call(u,b," / ")).call(d,y));var A="egress"===e.direction?"to":"from";return n=h||(g||t("ANY")),(0,o.default)(a=(0,o.default)(r=(0,o.default)(i="ALLOW ".concat(c," ")).call(i,v," ")).call(r,A," ")).call(a,n)})),(0,s.default)(this,"onSubmit",(e=>u.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Rule")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("Delete Rule")}}a.default=c},4424:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.Certificate=void 0;var l=r(485),o=n(r(1667)),s=n(r(4425));class d extends o.default{get tabs(){return[{title:t("Server Certificates"),key:"SERVER",component:s.default},{title:t("CA Certificates"),key:"CA",component:s.default}]}}a.Certificate=d;a.default=(0,l.inject)("rootStore")((0,l.observer)(d))},4425:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(201),p=r(22);c(a,"__esModule",{value:!0}),a.default=a.Certificate=void 0;var m=p(r(71)),h=p(r(292)),g=p(r(42)),v=p(r(0)),_=r(485),b=p(r(1626)),y=P(r(1715)),A=r(1635),I=P(r(1716)),S=r(1637),x=r(418),C=p(r(1847));function w(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(w=function(e){return e?a:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=w(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},i=c&&o;for(var n in e)if("default"!==n&&{}.hasOwnProperty.call(e,n)){var l=i?o(e,n):null;l&&(l.get||l.set)?c(r,n,l):r[n]=e[n]}return r.default=e,a&&a.set(e,r),r}function E(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=E(Object(i),!0)).call(a,(function(t){(0,g.default)(e,t,i[t])})):d?u(e,d(i)):s(r=E(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class k extends b.default{constructor(){super(...arguments),(0,g.default)(this,"updateFetchParams",(e=>D(D({},e),{},{mode:this.currentMode}))),(0,g.default)(this,"getColumns",(()=>{var e=[{title:this.showDetail?t("ID/Name"):t("Name"),dataIndex:"name",routeName:this.showDetail?this.getRouteName(this.routeLinkPath):null},{title:t("Certificate Type"),dataIndex:"mode",valueMap:S.certificateMode,isHideable:!0},{title:t("Expires At"),dataIndex:"expiration",valueRender:"toLocalTime",isHideable:!0},{title:t("Domain Name"),dataIndex:"domain",render:e=>e||"-",hidden:"CA"===this.currentMode,isHideable:!0},{title:t("Listener"),dataIndex:"listener",render:e=>e?(0,m.default)(e).call(e,(e=>v.default.createElement("div",{key:e.id},this.getLinkRender("lbListenerDetail",e.name,{loadBalancerId:e.lb,id:e.id},null)))):"-",isHideable:!0,stringify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,m.default)(e).call(e,(e=>e.name)).join(",")||"-"}},{title:t("Status"),dataIndex:"status",valueMap:S.certificateStatus},{title:t("Created At"),dataIndex:"created",valueRender:"toLocalTime",isHideable:!0}];return e}))}init(){"SERVER"===this.currentMode?(this.store=y.default,this.downloadStore=new y.ContainersStore):(this.store=I.default,this.downloadStore=new I.SecretsStore)}get policy(){return["containers:get","secrets:get"]}get aliasPolicy(){return["barbican:containers:get","barbican:secrets:get"]}get showDetail(){return(0,A.checkPolicyRule)("barbican:secret:decrypt")}get name(){return t("certificate")}get hasTab(){return!0}get actionConfigs(){return"SERVER"===this.currentMode?C.default.actionConfigsContainer:C.default.actionConfigsSecret}get currentMode(){var e,t=(0,x.parse)((0,h.default)(e=this.props.location.search).call(e,1)),{tab:a="SERVER"}=t;return a}get routeLinkPath(){return"SERVER"===this.currentMode?"certificateContainerDetail":"certificateSecretDetail"}get searchFilters(){return[{label:t("Name"),name:"name"}]}}a.Certificate=k;a.default=(0,_.inject)("rootStore")((0,_.observer)(k))},4426:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.CreateAction=void 0;var l=n(r(203)),o=n(r(88)),s=n(r(1672)),d=n(r(292)),u=n(r(39)),c=n(r(42)),f=r(485),p=r(1625),m=r(202),h=r(707),g=r(1637),v=r(4427),_=n(r(1715)),b=n(r(132)),y=r(418);class A extends p.ModalAction{constructor(){super(...arguments),(0,c.default)(this,"validateDomain",((e,a)=>{var r;if((0,l.default)(r=[void 0,null,""]).call(r,a))return o.default.resolve();var i=a.split(","),n=(0,s.default)(i).call(i,(e=>e.length<=100&&(0,h.isDomain)(e)));return i.length>30||!n?o.default.reject(t("Please enter a correct domain, format is refer to the left tip!")):o.default.resolve()})),(0,c.default)(this,"validateCertificateContent",((e,a)=>{if(!a)return o.default.reject();var r=a.split(/\n/g),i=r[0],n=r[r.length-1]||r[r.length-2];return"-----BEGIN CERTIFICATE-----"===i&&"-----END CERTIFICATE-----"===n?o.default.resolve():o.default.reject(t("Please enter a correct certificate content, format is refer to the left tip!"))})),(0,c.default)(this,"validateCertificateKeyPair",((e,a)=>{if(!a)return o.default.reject();var r=a.split(/\n/g),i=r[0],n=r[r.length-1]||r[r.length-2];return"-----BEGIN RSA PRIVATE KEY-----"===i&&"-----END RSA PRIVATE KEY-----"===n?o.default.resolve():o.default.reject(t("Please enter a correct private key, format is refer to the left tip!"))})),(0,c.default)(this,"onSubmit",(e=>this.store.create(e)))}init(){this.store=_.default}get name(){return t("Create Certificate")}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){return{mode:this.typeTab}}get typeTab(){var{location:{search:e=""}={}}=this.containerProps;return(0,y.parse)((0,d.default)(e).call(e,1)).tab||"SERVER"}get certificateModeOptions(){var e;return(0,u.default)(e=(0,m.getOptions)(g.certificateMode)).call(e,(e=>e.value===this.typeTab))}get certificateContentTip(){return v.certificateContentTip}get certificateKeyPairTip(){return v.certificateKeyPairTip}get formItems(){var{mode:e}=this.state;return[{name:"name",label:t("Certificate Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"mode",label:t("Certificate Type"),type:"radio",options:this.certificateModeOptions},{name:"certificate",label:t("Certificate Content"),type:"textarea-from-file",placeholder:t("PEM encoding"),accept:".crt,.pem",tip:this.certificateContentTip,required:!0,rows:6},{name:"private_key",label:t("Private Key"),type:"textarea-from-file",placeholder:t("PEM encoding"),accept:".key,.pem",tip:this.certificateKeyPairTip,required:!0,display:"SERVER"===e,rows:6},{name:"domain",label:t("Domain Name"),type:"textarea",placeholder:t("Please input"),maxLength:1024,hidden:"CA"===e,validator:this.validateDomain,tip:t("The domain name can only be composed of letters, numbers, dashes, in A dash cannot be at the beginning or end, and a single string cannot exceed more than 63 characters, separated by dots; At most can support 30 domain names, separated by commas;The length of a single domain name does not exceed 100 characters, and the total length degree does not exceed 1024 characters."),extra:t("If it is an SNI type certificate, a domain name needs to be specified")},{name:"expiration",label:t("Expires At"),type:"date-picker",showToday:!1,disabledDate:e=>e&&e<=(0,b.default)().endOf("d")}]}}a.CreateAction=A,(0,c.default)(A,"id","create-certificate"),(0,c.default)(A,"title",t("Create Certificate")),(0,c.default)(A,"policy",["secrets:post","containers:post"]),(0,c.default)(A,"allowed",(()=>o.default.resolve(!0)));a.default=(0,f.inject)("rootStore")((0,f.observer)(A))},4427:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.certificateKeyPairTip=a.certificateContentTip=void 0;var l=n(r(0));a.certificateContentTip=l.default.createElement("div",null,l.default.createElement("p",null,t('The certificate contains information such as the public key and signature of the certificate. The extension of the certificate is "pem" or "crt", you can directly enter certificate content or upload certificate file.')),l.default.createElement("p",null,t("It is recommended to refer to the following description format, otherwise it may not be effective")),l.default.createElement("p",null,t('The format of the certificate content is: by "----BEGIN CERTIFICATE-----" as the beginning,"-----END CERTIFICATE----" as the end, 64 characters per line, the last line does not exceed 64 characters, and there cannot be blank lines.'))),a.certificateKeyPairTip=l.default.createElement("div",null,l.default.createElement("p",null,t('The private key of the certificate, the extension of the private key is "key", you can directly enter the content of the private key file or upload a private key that conforms to the format document.')),l.default.createElement("p",null,t("It is recommended to refer to the following description format, otherwise it may not be effective")),l.default.createElement("p",null,t('The private key content format is: with "-----BEGIN RSA PRIVATE KEY-----" as the beginning,"-----END RSA PRIVATE KEY-----" as the end, 64 characters per line, the last line does not exceed 64 characters, and there cannot be blank lines.')))},4428:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=n(r(1715));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy",["secret:delete","container:delete"]),(0,l.default)(this,"aliasPolicy",["barbican:secret:delete","barbican:container:delete"]),(0,l.default)(this,"allowedCheckFunc",(e=>!e.listener)),(0,l.default)(this,"onSubmit",(e=>s.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Certificate")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete certificate")}}a.default=d},4429:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=n(r(1716));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","secret:delete"),(0,l.default)(this,"allowedCheckFunc",(e=>!e.listener)),(0,l.default)(this,"onSubmit",(e=>s.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Certificate")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete certificate")}}a.default=d},4430:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.Detail=void 0;var l=r(485),o=n(r(1627)),s=r(1715),d=r(1637),u=n(r(4431)),c=n(r(1847));class f extends o.default{init(){this.store=new s.ContainersStore}get policy(){return"container:get"}get aliasPolicy(){return"barbican:container:get"}get name(){return"Certificate Detail"}get listUrl(){return this.getRoutePath("certificate",null,{tab:"SERVER"})}get actionConfigs(){return c.default.actionConfigsContainer}get detailInfos(){return(0,d.getCertificateColumns)(this)}get tabs(){return[{title:t("Detail Info"),key:"detail_info",component:u.default}]}}a.Detail=f;a.default=(0,l.inject)("rootStore")((0,l.observer)(f))},4431:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(116)),o=n(r(0)),s=r(485),d=n(r(1633));class u extends d.default{get leftCardsStyle(){return{flex:1}}get leftCards(){return[this.contentCard]}get rightCards(){return[this.keyPairCard]}get contentCard(){var{secret_refs:e=[]}=this.props.detail,{secret_info:a={}}=(0,l.default)(e).call(e,(e=>"certificate"===e.name))||{},r=[{content:o.default.createElement("pre",null,a.payload),copyable:{text:a.payload}}];return{title:t("Certificate Content"),labelCol:0,contentCol:24,options:r}}get keyPairCard(){var{secret_refs:e=[]}=this.props.detail,{secret_info:a={}}=(0,l.default)(e).call(e,(e=>"private_key"===e.name))||{},r=[{content:o.default.createElement("pre",null,a.payload),copyable:{text:a.payload}}];return{title:t("Private Key"),labelCol:0,contentCol:24,options:r}}}a.BaseDetail=u;a.default=(0,s.inject)("rootStore")((0,s.observer)(u))},4432:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.Detail=void 0;var l=n(r(39)),o=r(485),s=n(r(1627)),d=r(1716),u=r(1637),c=n(r(4433)),f=n(r(1847));class p extends s.default{init(){this.store=new d.SecretsStore}get policy(){return"secret:get"}get name(){return"Certificate Detail"}get listUrl(){return this.getRoutePath("certificate",null,{tab:"CA"})}get actionConfigs(){return f.default.actionConfigsSecret}get detailInfos(){var e;return(0,l.default)(e=(0,u.getCertificateColumns)(this)).call(e,(e=>"domain"!==e.dataIndex))}get tabs(){return[{title:t("Detail Info"),key:"detail_info",component:c.default}]}}a.Detail=p;a.default=(0,o.inject)("rootStore")((0,o.observer)(p))},4433:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(0)),o=r(485),s=n(r(1633));class d extends s.default{get leftCardsStyle(){return{flex:1}}get leftCards(){return[this.contentCard]}get contentCard(){var{payload:e}=this.props.detail,a=[{content:l.default.createElement("pre",null,e),copyable:{text:e}}];return{title:t("Certificate Content"),labelCol:0,contentCol:24,options:a}}}a.BaseDetail=d;a.default=(0,o.inject)("rootStore")((0,o.observer)(d))},4434:function(e,a,r){"use strict";var i=r(201),n=r(20),l=r(29),o=r(22);n(a,"__esModule",{value:!0}),a.default=a.Reverse=void 0;var s=o(r(42)),d=r(485),u=o(r(1626)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},i=n&&l;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=i?l(e,o):null;s&&(s.get||s.set)?n(r,o,s):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}(r(1780)),f=o(r(2010));function p(e){if("function"!=typeof i)return null;var t=new i,a=new i;return(p=function(e){return e?a:t})(e)}class m extends u.default{constructor(){super(...arguments),(0,s.default)(this,"getColumns",(()=>[{title:t("Address"),dataIndex:"address",isLink:!0,routeName:"dnsReverseDetail",routeParamsFunc:e=>({id:e.id})},{title:t("PTR Domain Name"),dataIndex:"ptrdname",isHideable:!0},{title:t("Status"),dataIndex:"status",isHideable:!0}]))}init(){this.store=c.default,this.downloadStore=new c.ReverseStore}get policy(){return"get_images"}get name(){return t("Reverse Dns")}get actionConfigs(){return f.default}}a.Reverse=m;a.default=(0,d.inject)("rootStore")((0,d.observer)(m))},4435:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.Set=void 0;var l=n(r(88)),o=n(r(42)),s=r(1625),d=r(485),u=n(r(1780));class c extends s.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{id:t}=this.item;return this.store.set({id:t},e)}))}init(){this.store=u.default}static get modalSize(){return"small"}get name(){return t("Set Domain Name PTR")}static allowed(){return l.default.resolve(!0)}get formItems(){return[{name:"ptrdname",label:t("Domain Name"),type:"input",required:!0,placeholder:t("smtp.example.com"),tip:t("Domain name ending in.")},{name:"description",label:t("Description"),type:"textarea",tip:t("Details about the PTR record.")},{name:"ttl",label:t("TTL"),type:"input-number",min:0,tip:t("Time To Live in seconds."),placeholder:t("3600")}]}}a.Set=c,(0,o.default)(c,"id","set-reverse"),(0,o.default)(c,"title",t("Set")),(0,o.default)(c,"policy","get_images");a.default=(0,d.inject)("rootStore")((0,d.observer)(c))},4436:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=n(r(1780));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"allowedCheckFunc",(e=>null!==e.ptrdname&&"ACTIVE"===e.status)),(0,l.default)(this,"policy","instance:delete"),(0,l.default)(this,"confirmContext",(e=>{var a=this.getName(e);return t("Are you sure to {action}? (Zone: {name})",{action:this.actionNameDisplay||this.title,name:a})})),(0,l.default)(this,"onSubmit",(e=>s.default.unset({id:e.id},{ptrdname:null})))}get id(){return"usnet"}get title(){return t("Unset")}get actionName(){return t("Unset")}get buttonText(){return t("Unset")}}a.default=d},4437:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.ReverseDetail=void 0;var l=r(485),o=n(r(1627)),s=n(r(1780)),d=n(r(4438)),u=n(r(2010));class c extends o.default{init(){this.store=s.default}get name(){return t("Reverse Detail")}get policy(){return"get_image"}get listUrl(){return this.getRoutePath("dns-reverse")}get actionConfigs(){return u.default}get tabs(){return[{title:t("Detail"),key:"detail",component:d.default}]}}a.ReverseDetail=c;a.default=(0,l.inject)("rootStore")((0,l.observer)(c))},4438:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=r(485),o=n(r(1633));class s extends o.default{get leftCards(){return[this.baseInfoCard]}get baseInfoCard(){var e=[{label:t("Address"),dataIndex:"address"},{label:t("PTR Domain Name"),dataIndex:"ptrdname"},{label:t("Description"),dataIndex:"description"},{label:t("ID"),dataIndex:"id"},{label:t("Time To Live"),dataIndex:"ttl"},{label:t("Status"),dataIndex:"status"},{label:t("Action"),dataIndex:"action"}];return{title:t("Base Info"),options:e}}}a.BaseDetail=s;a.default=(0,l.inject)("rootStore")((0,l.observer)(s))},4439:function(e,a,r){"use strict";var i=r(201),n=r(20),l=r(29),o=r(22);n(a,"__esModule",{value:!0}),a.default=a.Zones=void 0;var s=o(r(42)),d=r(485),u=o(r(1626)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},i=n&&l;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=i?l(e,o):null;s&&(s.get||s.set)?n(r,o,s):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}(r(1740)),f=r(1781),p=r(202),m=o(r(4440));function h(e){if("function"!=typeof i)return null;var t=new i,a=new i;return(h=function(e){return e?a:t})(e)}class g extends u.default{constructor(){super(...arguments),(0,s.default)(this,"getColumns",(()=>[{title:t("Zone ID/Name"),dataIndex:"name",isHideable:!0,isLink:!0,routeName:this.getRouteName("dnsZonesDetail"),sortKey:"id"},{title:t("Project ID/Name"),dataIndex:"project_name",isHideable:!0,hidden:!this.isAdminPage,sortKey:"tenant_id"},{title:t("Type"),dataIndex:"type",isHideable:!0,sorter:!1,valueMap:f.ZONE_TYPES},{title:t("Status"),dataIndex:"status",isHideable:!0,valueMap:f.ZONE_STATUS},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]))}init(){this.store=c.default,this.downloadStore=new c.DNSZonesStore}get policy(){return"get_zones"}get name(){return t("dns zones")}get actionConfigs(){return m.default}get isFilterByBackend(){return!0}get isSortByBackend(){return!0}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Type"),name:"type",options:(0,p.getOptions)(f.ZONE_TYPES)},{label:t("Status"),name:"status",options:(0,p.getOptions)(f.ZONE_STATUS)}]}}a.Zones=g;a.default=(0,d.inject)("rootStore")((0,d.observer)(g))},4440:function(e,t,a){"use strict";var r=a(20),i=a(22);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2012)),l=i(a(4441)),o=i(a(4442)),s=i(a(2013)),d={rowActions:{firstAction:l.default,moreActions:[{action:s.default},{action:o.default}]},primaryActions:[n.default],batchActions:[o.default]};t.default=d},4441:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Update=void 0;var p=f(r(72)),m=f(r(71)),h=f(r(88)),g=f(r(42)),v=r(485),_=f(r(1740)),b=r(2012),y=["masters"];function A(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=A(Object(i),!0)).call(a,(function(t){(0,g.default)(e,t,i[t])})):d?u(e,d(i)):s(r=A(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class S extends b.Create{constructor(){super(...arguments),(0,g.default)(this,"onSubmit",(e=>{var{id:t}=this.item,{type:a}=this.item,{masters:r=[],email:i,ttl:n,description:l}=e,o={description:l,masters:(0,m.default)(r).call(r,(e=>e.value))};return"PRIMARY"===a&&(o.email=i,o.ttl=n),this.store.update({id:t},o)}))}init(){this.store=_.default}get name(){return t("Edit")}static allowed(){return h.default.resolve(!0)}get defaultValue(){var e=this.item,{masters:t=[]}=e,a=(0,p.default)(e,y),r=(0,m.default)(t).call(t,((e,t)=>({index:t,value:e})));return I(I({},a),{},{masters:r})}get formItems(){var e=super.formItems;return(0,m.default)(e).call(e,(e=>"name"===e.name||"type"===e.name?I(I({},e),{},{disabled:!0}):e))}}a.Update=S,(0,g.default)(S,"id","update-dns-zone"),(0,g.default)(S,"title",t("Edit")),(0,g.default)(S,"policy","update_zone");a.default=(0,v.inject)("rootStore")((0,v.observer)(S))},4442:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=n(r(1740));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"allowedCheckFunction",(()=>!0)),(0,l.default)(this,"policy","delete_zone"),(0,l.default)(this,"confirmContext",(e=>{var a=this.getName(e);return t("Are you sure to {action}? (Zone: {name})",{action:this.actionNameDisplay||this.title,name:a})})),(0,l.default)(this,"onSubmit",(e=>s.default.delete({id:e.id})))}get id(){return"delete"}get title(){return t("Delete Zone")}get actionName(){return t("Delete Zone")}get buttonText(){return t("Delete")}get isDanger(){return!0}get isAsyncAction(){return!0}}a.default=d},4443:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.ZonesDetail=void 0;var l=r(485),o=r(1740),s=n(r(1627)),d=r(1781),u=n(r(4444)),c=n(r(4445));class f extends s.default{init(){this.store=new o.DNSZonesStore}get name(){return t("DNS Zones Detail")}get listUrl(){return this.getRoutePath("dnsZones")}get policy(){return"get_zone"}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Description"),dataIndex:"description"},{title:t("Type"),dataIndex:"type",valueMap:d.ZONE_TYPES},{title:t("Status"),dataIndex:"status",valueMap:d.ZONE_STATUS},{title:t("Email"),dataIndex:"email"}]}get tabs(){return[{title:t("Overview"),key:"overview",component:u.default},{title:t("Record Sets"),key:"record_sets",component:c.default}]}}a.ZonesDetail=f;a.default=(0,l.inject)("rootStore")((0,l.observer)(f))},4444:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(414)),o=r(485),s=n(r(1633));class d extends s.default{get leftCards(){return[this.baseInfoCard,this.modificationTimesCard]}get rightCards(){return[this.attributesCard,this.associationsCard]}get baseInfoCard(){var e=[{label:t("Action"),dataIndex:"action"},{label:t("Serial"),dataIndex:"serial"},{label:t("TTL"),dataIndex:"ttl"},{label:t("Version"),dataIndex:"version"}];return{title:t("Base Info"),options:e}}get modificationTimesCard(){var e=[{label:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{label:t("Updated At"),dataIndex:"updated_at",valueRender:"toLocalTime"},{label:t("Transferred"),dataIndex:"transferred_at",valueRender:"toLocalTime"}];return{title:t("Modification Times"),options:e}}get attributesCard(){var e=[{label:t("Attributes"),dataIndex:"attributes",render:e=>(0,l.default)(e)}];return{title:t("Attributes"),options:e}}get associationsCard(){var e=[{label:t("Pool ID"),dataIndex:"pool_id"},{label:t("Project ID"),dataIndex:"project_id"},{label:t("Masters"),dataIndex:"masters",render:e=>(0,l.default)(e)}];return{title:t("Associations"),options:e}}}a.BaseDetail=d;a.default=(0,o.inject)("rootStore")((0,o.observer)(d))},4445:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.RecordSets=void 0,r(1693);var l=n(r(1694)),o=n(r(71)),s=n(r(0)),d=n(r(1626)),u=r(485),c=(r(200),r(1741)),f=r(1782),p=r(202),m=n(r(2014));class h extends d.default{init(){this.store=new c.DNSRecordSetsStore,this.downloadStore=new c.DNSRecordSetsStore}get name(){return t("recordsets")}get policy(){return"get_recordsets"}get isFilterByBackend(){return!0}get isSortByBackend(){return!0}get actionConfigs(){return m.default}getColumns(){return[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("dnsRecordSetDetail"),routeParamsFunc:e=>({zoneId:e.zone_id,id:e.id}),isLink:!0,sortKey:"id"},{title:t("Type"),dataIndex:"type",render:e=>(0,f.getRecordSetType)(e)},{title:t("Records"),dataIndex:"records",render:e=>(0,o.default)(e).call(e,(e=>s.default.createElement(l.default,{key:e},e))),stringify:e=>e.join("\n"),sorter:!1},{title:t("Status"),dataIndex:"status",valueMap:f.RECORD_STATUS,sorter:!1},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"}]}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Type"),name:"type",options:(0,f.dnsRRTypeList)()},{label:t("Status"),name:"status",options:(0,p.getOptions)(f.RECORD_STATUS)}]}}a.RecordSets=h;a.default=(0,u.inject)("rootStore")((0,u.observer)(h))},4446:function(e,a,r){"use strict";var i=r(43),n=r(54),l=r(39),o=r(29),s=r(33),d=r(55),u=r(56),c=r(20),f=r(22);c(a,"__esModule",{value:!0}),a.default=a.Update=void 0;var p=f(r(33)),m=f(r(93)),h=f(r(88)),g=f(r(71)),v=f(r(72)),_=f(r(42)),b=r(1625),y=r(485),A=r(1782),I=f(r(1741)),S=["records"];function x(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a,r,i=null!=arguments[t]?arguments[t]:{};t%2?s(a=x(Object(i),!0)).call(a,(function(t){(0,_.default)(e,t,i[t])})):d?u(e,d(i)):s(r=x(Object(i))).call(r,(function(t){c(e,t,o(i,t))}))}return e}class w extends b.ModalAction{constructor(){super(...arguments),(0,_.default)(this,"onSubmit",(e=>{var{zone_id:t}=this.item,a=this.item.id,{records:r}=e,i=(0,v.default)(e,S),n=[];(0,p.default)(r).call(r,(e=>{n.push(e.value)}));var l=C({records:n},i);return this.store.update(t,a,l)}))}init(){var e,a;this.store=I.default,this.state=C(C({},this.state),{},{nameExtra:(0,m.default)(e="".concat(t("Exp: "))).call(e,A.DNS_RECORD_TYPE[this.item.type].nameExtra),recordsExtra:(0,m.default)(a="".concat(t("Exp: "))).call(a,A.DNS_RECORD_TYPE[this.item.type].recordsExtra)})}get name(){return t("Update Record Set")}static allowed(){return h.default.resolve(!0)}get defaultValue(){var{records:e,type:t,name:a,description:r,ttl:i}=this.item;return{type:t,name:a,description:r,ttl:i,records:(0,g.default)(e).call(e,((e,t)=>({index:t,value:e})))}}get formItems(){var e=(0,A.getRecordSetFormItem)(this,this.currentFormValue);return(0,g.default)(e).call(e,(e=>"name"===e.name||"type"===e.name?C(C({},e),{},{disabled:!0}):e))}}a.Update=w,(0,_.default)(w,"id","create-record-set"),(0,_.default)(w,"title",t("Update Record Set")),(0,_.default)(w,"buttonText",t("Update")),(0,_.default)(w,"policy","update_recordset");a.default=(0,y.inject)("rootStore")((0,y.observer)(w))},4447:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(42)),o=r(1625),s=n(r(1741));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"allowedCheckFunction",(()=>!0)),(0,l.default)(this,"policy","delete_recordset"),(0,l.default)(this,"confirmContext",(e=>{var a=this.getName(e),r=this.getItemId(e);return t("Are you sure to {action}? (Record Set: {name} - {id})",{action:this.actionNameDisplay||this.title,name:a,id:r})})),(0,l.default)(this,"onSubmit",(e=>{var{zone_id:t}=e,a=e.id;return s.default.delete({zone_id:t,recordset_id:a})}))}get id(){return"delete"}get title(){return t("Delete Record Set")}get actionName(){return t("Delete Record Set")}get buttonText(){return t("Delete")}get isDanger(){return!0}}a.default=d},4448:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.RecordSetsDetail=void 0;var l=r(485),o=n(r(1627)),s=r(1741),d=r(1782),u=n(r(4449)),c=n(r(2014));class f extends o.default{init(){this.store=new s.DNSRecordSetsStore}get titleValue(){return this.detailData.id}get name(){return t("Recordset Detail")}get listUrl(){return this.getRoutePath("dnsZonesDetail",{id:this.detailData.zone_id},{tab:"record_sets"})}get actionConfigs(){return c.default}get policy(){return"get_recordset"}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Description"),dataIndex:"description"},{title:t("Type"),dataIndex:"type",render:e=>(0,d.getRecordSetType)(e)},{title:t("Status"),dataIndex:"status",valueMap:d.RECORD_STATUS}]}get tabs(){return[{title:t("Overview"),key:"overview",component:u.default}]}}a.RecordSetsDetail=f;a.default=(0,l.inject)("rootStore")((0,l.observer)(f))},4449:function(e,a,r){"use strict";var i=r(20),n=r(22);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(71)),o=n(r(0)),s=r(485),d=n(r(1633));class u extends d.default{get leftCards(){return[this.baseInfoCard,this.modificationTimesCard]}get rightCards(){return[this.associationsCard]}get baseInfoCard(){var e=[{label:t("Action"),dataIndex:"action"},{label:t("Records"),dataIndex:"records",render:e=>(0,l.default)(e).call(e,(e=>o.default.createElement("div",null,e)))},{label:t("TTL"),dataIndex:"ttl"},{label:t("Version"),dataIndex:"version"}];return{title:t("Base Info"),labelCol:6,contentCol:18,options:e}}get modificationTimesCard(){var e=[{label:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{label:t("Updated At"),dataIndex:"updated_at",valueRender:"toLocalTime"}];return{title:t("Modification Times"),labelCol:6,contentCol:18,options:e}}get associationsCard(){var e=[{label:t("Zone ID"),dataIndex:"zone_id",copyable:!0},{label:t("Zone Name"),dataIndex:"zone_name"},{label:t("Project ID"),dataIndex:"project_id",copyable:!0}];return{title:t("Associations"),options:e}}}a.BaseDetail=u;a.default=(0,s.inject)("rootStore")((0,s.observer)(u))}}]);