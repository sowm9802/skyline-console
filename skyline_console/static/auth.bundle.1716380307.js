(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1237:function(e,t,n){"use strict";var r=n(20),a=n(21);r(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(416)),i=a(n(1706)),l=e=>(0,o.default)(i.default,e);t.default=l},1490:function(e,t,n){"use strict";var r=n(162),a=n(20),o=n(26),i=n(21);a(t,"__esModule",{value:!0}),t.default=void 0;var l=i(n(56)),s=i(n(77)),d=i(n(58));n(1260);var u=i(n(1261)),f=i(n(343)),c=i(n(35)),p=i(n(570)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var r={},i=a&&o;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=i?o(e,l):null;s&&(s.get||s.set)?a(r,l,s):r[l]=e[l]}r.default=e,n&&n.set(e,r);return r}(n(0)),g=(n(161),i(n(16))),h=i(n(4));function _(e){if("function"!=typeof r)return null;var t=new r,n=new r;return(_=function(e){return e?n:t})(e)}class x extends m.Component{constructor(){super(...arguments),(0,c.default)(this,"renderFormItem",(e=>{var{render:t}=e;return t?t():null})),(0,c.default)(this,"getFormItemRules",(e=>{var{rules:t,required:n=!1,message:r,otherRule:a}=e;if((0,p.default)(e,"rules"))return t;var o={required:n};return r&&(o.message=r),a?[o,a]:[o]})),(0,c.default)(this,"renderFormItems",(()=>{var{formItems:e}=this.props;return(0,l.default)(e).call(e,((e,t)=>{var n,{name:r,hidden:a,dependencies:o=[],className:i,onChange:l,extra:d,label:c}=e,p={name:r,rules:this.getFormItemRules(e),hidden:a,dependencies:o,className:i,extra:d,label:c};return l&&(p.onChange=l),m.default.createElement(u.default.Item,(0,f.default)({},p,{key:(0,s.default)(n="".concat(r,"-")).call(n,t)}),this.renderFormItem(e))}))}))}render(){var e=this.props,{formItems:t,formref:n,className:r}=e,a=(0,d.default)(e,["formItems","formref","className"]);return m.default.createElement(u.default,(0,f.default)({ref:n,className:(0,h.default)(r,"simple-form")},a),this.renderFormItems())}}t.default=x,(0,c.default)(x,"propTypes",{name:g.default.string,className:g.default.string,initialValues:g.default.object,onFinish:g.default.func,size:g.default.string,formItems:g.default.array,formref:g.default.any}),(0,c.default)(x,"defaultProps",{initialValues:{},size:"large",formItems:[],onFinish:e=>{}})},1706:function(e,t,n){"use strict";var r=n(20),a=n(21);r(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(1707)),i=a(n(1720)),l=a(n(1751)),s="/auth",d=[{path:s,component:o.default,routes:[{path:"".concat(s,"/login"),component:i.default,exact:!0},{path:"".concat(s,"/change-password"),component:l.default,exact:!0}]}];t.default=d},1707:function(e,t,n){"use strict";var r=n(162),a=n(20),o=n(26),i=n(21);a(t,"__esModule",{value:!0}),t.default=t.AuthLayout=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},i=a&&o;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=i?o(e,l):null;s&&(s.get||s.set)?a(r,l,s):r[l]=e[l]}r.default=e,n&&n.set(e,r);return r}(n(0)),s=n(412),d=i(n(416)),u=i(n(1708)),f=i(n(1714)),c=i(n(1715)),p=i(n(1716)),m=i(n(1717)),g=i(n(1718));function h(e){if("function"!=typeof r)return null;var t=new r,n=new r;return(h=function(e){return e?n:t})(e)}class _ extends l.Component{constructor(e){super(e),this.routes=e.route.routes}renderRight(){return l.default.createElement("div",{className:g.default.right},l.default.createElement("img",{src:m.default,alt:"",className:g.default["genestack-logo"]}),l.default.createElement("img",{alt:"",className:g.default["login-full-image"],src:c.default}),l.default.createElement("div",{className:g.default["full-image-front"]}),l.default.createElement("img",{src:p.default,alt:"",className:g.default["login-right-logo"]}))}render(){return l.default.createElement("div",{className:g.default.container},l.default.createElement("div",{className:g.default.left},l.default.createElement("div",{className:g.default.lang},l.default.createElement(u.default,null)),l.default.createElement("div",{className:g.default.main},l.default.createElement("div",{className:g.default.top},l.default.createElement("div",{className:g.default.header},l.default.createElement("img",{alt:"logo",className:g.default.logo,src:f.default}))),(0,d.default)(this.routes))),this.renderRight())}}t.AuthLayout=_;var x=(0,s.inject)("rootStore")((0,s.observer)(_));t.default=x},1708:function(e,t,n){"use strict";var r=n(20),a=n(21);r(t,"__esModule",{value:!0}),t.default=void 0,n(585);var o=a(n(424)),i=a(n(1341));n(1275);var l=a(n(421)),s=a(n(56)),d=(n(161),a(n(237))),u=a(n(0)),f=a(n(4)),c=(n(564),a(n(1712))),{getLocale:p,setLocale:m,SUPPORT_LOCALES:g}=d.default,h=e=>{if(g.length<=1)return null;var{className:t}=e,n=p(),r=(0,s.default)(g).call(g,(e=>e.value)),a=(0,s.default)(g).call(g,(e=>e.name)),d=(0,s.default)(g).call(g,(e=>e.icon)),h=u.default.createElement(l.default,{className:c.default.menu,selectedKeys:[n],onClick:e=>{var{key:t}=e;m(t,!1)}},(0,s.default)(r).call(r,((e,t)=>u.default.createElement(l.default.Item,{key:e},u.default.createElement("span",{role:"img","aria-label":a[t]},d[t])," ",a[t]))));return u.default.createElement(o.default,{overlay:h,placement:"bottomRight"},u.default.createElement("span",{className:(0,f.default)(c.default["drop-down"],t)},u.default.createElement(i.default,null)))};t.default=h},1712:function(e,t,n){var r=n(1713);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:undefined,insertInto:void 0};n(64)(r,a);r.locals&&(e.exports=r.locals)},1713:function(e,t,n){(t=e.exports=n(63)(!1)).push([e.i,".index__menu--25uep .anticon {\n  margin-right: 8px;\n}\n.index__menu--25uep .ant-dropdown-menu-item {\n  min-width: 160px;\n}\n.index__drop-down--37VUG {\n  font-size: 16px;\n  line-height: 20px;\n  vertical-align: top;\n  cursor: pointer;\n}\n.index__drop-down--37VUG > i {\n  font-size: 16px !important;\n  -webkit-transform: none !important;\n          transform: none !important;\n}\n.index__drop-down--37VUG > i svg {\n  position: relative;\n  top: -1px;\n}\n",""]),t.locals={menu:"index__menu--25uep","drop-down":"index__drop-down--37VUG"}},1714:function(e,t,n){"use strict";n.r(t),t.default=n.p+"asset/image/logo.png"},1715:function(e,t,n){"use strict";n.r(t),t.default=n.p+"asset/image/login-full.1716380307.png"},1716:function(e,t,n){"use strict";n.r(t),t.default=n.p+"asset/image/loginRightLogo.png"},1717:function(e,t,n){"use strict";n.r(t),t.default=n.p+"asset/image/genestackLogo.png"},1718:function(e,t,n){var r=n(1719);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:undefined,insertInto:void 0};n(64)(r,a);r.locals&&(e.exports=r.locals)},1719:function(e,t,n){(t=e.exports=n(63)(!1)).push([e.i,".index__container--PLjMT {\n  position: relative;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-flow: row;\n          flex-flow: row;\n  height: 100vh;\n  overflow: hidden;\n  background-color: #fff;\n}\n.index__container--PLjMT .index__left--1nLBx {\n  position: relative;\n  width: 576px;\n  overflow-y: auto;\n  /* TODO wait for RGB\n    // background: rgb(253, 249, 252) no-repeat fixed left bottom;\n    // background-size: 556px; */\n}\n.index__container--PLjMT .index__left--1nLBx .index__lang--1iG5n {\n  position: absolute;\n  top: 20px;\n  right: 24px;\n  width: 20px;\n  height: 20px;\n  text-align: right;\n}\n.index__container--PLjMT .index__left--1nLBx .index__main--1Zm84 {\n  margin-top: 10vh;\n  padding: 0 130px;\n}\n.index__container--PLjMT .index__left--1nLBx .index__main--1Zm84 .index__top--2uGv8 {\n  text-align: center;\n}\n.index__container--PLjMT .index__left--1nLBx .index__main--1Zm84 .index__top--2uGv8 .index__header--15dtF {\n  height: 56px;\n  line-height: 56px;\n  text-align: left;\n}\n.index__container--PLjMT .index__left--1nLBx .index__main--1Zm84 .index__top--2uGv8 .index__header--15dtF a {\n  text-decoration: none;\n}\n.index__container--PLjMT .index__left--1nLBx .index__main--1Zm84 .index__top--2uGv8 .index__header--15dtF .index__logo--2IrMw {\n  height: 56px;\n  margin-right: 16px;\n  vertical-align: top;\n}\n.index__container--PLjMT .index__right--1kgDa {\n  position: relative;\n  -webkit-box-flex: 1;\n      -ms-flex: 1 1;\n          flex: 1 1;\n  text-align: center;\n  background-color: #21242a;\n}\n.index__login-image--1VBMI {\n  margin-top: calc(100vh - 668px);\n}\n.index__genestack-logo--Ik6Og {\n  position: absolute;\n  top: 630px;\n  left: 375px;\n  z-index: 1;\n}\n.index__login-full-image--3lehL {\n  width: 100%;\n  height: 100%;\n}\n.index__full-image-front--1vn-y {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background-color: rgba(14, 34, 181, 0.15);\n}\n.index__login-right-logo--31US1 {\n  position: relative;\n  top: -90px;\n}\n",""]),t.locals={container:"index__container--PLjMT",left:"index__left--1nLBx",lang:"index__lang--1iG5n",main:"index__main--1Zm84",top:"index__top--2uGv8",header:"index__header--15dtF",logo:"index__logo--2IrMw",right:"index__right--1kgDa","login-image":"index__login-image--1VBMI","genestack-logo":"index__genestack-logo--Ik6Og","login-full-image":"index__login-full-image--3lehL","full-image-front":"index__full-image-front--1vn-y","login-right-logo":"index__login-right-logo--31US1"}},1720:function(e,n,r){"use strict";var a=r(33),o=r(43),i=r(30),l=r(26),s=r(28),d=r(45),u=r(46),f=r(20),c=r(162),p=r(21);f(n,"__esModule",{value:!0}),n.default=n.Login=void 0;var m=p(r(430)),g=p(r(164)),h=p(r(56)),_=p(r(90));r(231);var x=p(r(341));r(1245);var v=p(r(1246));r(1243);var w=p(r(1244));r(569);var b=p(r(1252));r(1730);var y=p(r(1733));r(568);var S=p(r(415)),E=p(r(616)),L=p(r(51)),k=p(r(35)),P=p(r(177)),O=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var r={},a=f&&l;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?l(e,o):null;i&&(i.get||i.set)?f(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(r(0)),I=(r(161),r(412)),C=r(204),T=(r(564),p(r(1490))),R=p(r(1748)),N=p(r(237)),F=p(r(1749));function M(e){if("function"!=typeof c)return null;var t=new c,n=new c;return(M=function(e){return e?n:t})(e)}function j(e,t){var n=a(e);if(o){var r=o(e);t&&(r=i(r).call(r,(function(t){return l(e,t).enumerable}))),n.push.apply(n,r)}return n}class D extends O.Component{constructor(e){super(e),(0,k.default)(this,"onLoginTypeChange",((e,t)=>{this.setState({loginTypeOption:t})})),(0,k.default)(this,"getUserId",(e=>{var t;return(0,m.default)(t=e.split(":")[1]).call(t).split(".")[0]})),(0,k.default)(this,"onLoginFailed",((e,t)=>{this.setState({loading:!1});var{data:{detail:n=""}}=e.response,r=n||"";(0,g.default)(r).call(r,"The password is expired and needs to be changed for user")?this.dealWithChangePassword(r,t):this.setState({error:!0,message:r})})),(0,k.default)(this,"onLoginSuccess",(()=>{this.setState({loading:!1,error:!1}),this.rootStore.user&&!(0,P.default)(this.rootStore.user)&&this.rootStore.routing.push(this.nextPage)})),(0,k.default)(this,"onFinish",(e=>{if("sso"!==this.currentLoginType){this.setState({loading:!0,message:"",error:!1});var{domain:t,password:n,region:r,username:a}=e,o={domain:t,password:n,region:r,username:a};this.rootStore.login(o).then((()=>{this.onLoginSuccess()}),(t=>{this.onLoginFailed(t,e)}))}else document.location.href=this.currentSSOLink})),(0,k.default)(this,"dealWithChangePassword",((e,t)=>{var n=this.getUserId(e),r={region:t.region,oldPassword:t.password,userId:n};this.rootStore.setPasswordInfo(r),this.rootStore.routing.push("/auth/change-password")})),(0,k.default)(this,"updateDefaultValue",(()=>{this.formRef.current.resetFields(),this.formRef.current&&this.formRef.current.resetFields&&this.formRef.current.resetFields()})),this.init(),this.state={error:!1,message:"",loading:!1,loginTypeOption:this.passwordOption}}componentDidMount(){this.getDomains(),this.getRegions(),this.getSSO()}getDomains(){var e=this;return(0,L.default)((function*(){yield e.store.fetchDomainList(),e.updateDefaultValue()}))()}getRegions(){var e=this;return(0,L.default)((function*(){yield e.store.fetchRegionList(),e.updateDefaultValue()}))()}getSSO(){var e=this;return(0,L.default)((function*(){try{e.store.fetchSSO()}catch(e){}}))()}get rootStore(){return this.props.rootStore}get info(){var{info:e={}}=this.rootStore;return e||{}}get productName(){var{product_name:e={zh:t("Openstack Flex"),en:"Openstack Flex"}}=this.info,{getLocaleShortName:n}=N.default,r=e[n()]||t("Openstack Flex")||"Openstack Flex";return t("Welcome to {name}",{name:r})}get domains(){var e;return(0,h.default)(e=this.store.domains||[]).call(e,(e=>({label:e,value:e})))}get regions(){var e;return(0,h.default)(e=this.store.regions||[]).call(e,(e=>({label:e,value:e})))}get nextPage(){var{location:e={}}=this.props,{search:t}=e;return t?t.split("=")[1]:"/base/overview"}get enableSSO(){var{sso:{enable_sso:e=!1}={}}=this.store;return e}get ssoProtocols(){return{openid:t("OpenID Connect")}}get SSOOptions(){if(!this.enableSSO)return[];var{sso:{protocols:e=[]}={}}=this.store;return(0,h.default)(e).call(e,(e=>{var{protocol:t,url:n}=e;return function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(n=j(Object(r),!0)).call(n,(function(t){(0,k.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var a;s(a=j(Object(r))).call(a,(function(t){f(e,t,l(r,t))}))}}return e}({label:this.ssoProtocols[t]||t,value:n},e)}))}get passwordOption(){return{label:t("Keystone Credentials"),value:"password"}}get loginTypeOptions(){return this.enableSSO?[this.passwordOption,...this.SSOOptions]:[]}get currentLoginType(){var{loginTypeOption:{value:e}={}}=this.state;return"password"===e?"password":"sso"}get currentSSOLink(){var{loginTypeOption:{value:e}={}}=this.state;return e}get defaultValue(){var e={loginType:"password"};return 1===this.regions.length&&(e.region=this.regions[0].value),1===this.domains.length&&(e.domain=this.domains[0].value),e}get formItems(){var{error:e,loading:n}=this.state,r=this.currentLoginType,a={name:"submit",render:()=>O.default.createElement(v.default,{gutter:8},O.default.createElement(w.default,{span:12},O.default.createElement(x.default,{loading:n,type:"primary",htmlType:"submit",className:"login-form-button"},t("Log in"))))},o=[{name:"error",hidden:!e,render:()=>O.default.createElement("div",{className:F.default["login-error"]},O.default.createElement(E.default,null),this.getErrorMessage())},{name:"region",required:!0,message:t("Please select your Region!"),render:()=>O.default.createElement(S.default,{placeholder:t("Select a region"),options:this.regions})},{name:"domain",required:!0,message:t("Please select your Domain!"),render:()=>O.default.createElement(y.default,{placeholder:t("Select a domain"),options:this.domains,filterOption:(e,t)=>{var n;return t&&-1!==(0,_.default)(n=t.value.toUpperCase()).call(n,e.toUpperCase())}})},{name:"username",required:!0,message:t("Please input your Username!"),render:()=>O.default.createElement(b.default,{placeholder:t("Username")})},{name:"password",required:!0,message:t("Please input your Password!"),render:()=>O.default.createElement(b.default.Password,{placeholder:t("Password")})},{name:"extra",hidden:!0,render:()=>O.default.createElement(v.default,{gutter:8},O.default.createElement(w.default,{span:12},O.default.createElement(C.Link,{to:"password"},t("Forgot your password?"))),O.default.createElement(w.default,{span:12},O.default.createElement(C.Link,{to:"register",className:F.default.register},t("Sign up"))))}],i={name:"loginType",required:!0,message:t("Please select login type!"),extra:t("If you are not sure which authentication method to use, please contact your administrator."),render:()=>O.default.createElement(S.default,{placeholder:t("Select a login type"),options:this.loginTypeOptions,onChange:this.onLoginTypeChange})};return this.enableSSO?"password"===r?[i,...o,a]:[i,a]:[...o,a]}getErrorMessage(){var{message:e}=this.state;return(0,g.default)(e).call(e,"The account is locked for user")?t("Frequent login failure will cause the account to be temporarily locked, please operate after 5 minutes"):(0,g.default)(e).call(e,"The account is disabled for user")?t("The user has been disabled, please contact the administrator"):(0,g.default)(e).call(e,"You are not authorized for any projects or domains")?t("If you are not authorized to access any project, or if the project you are involved in has been deleted or disabled, contact the platform administrator to reassign the project"):t("Username or password is incorrect")}init(){this.store=R.default,this.formRef=O.default.createRef()}renderExtra(){return null}render(){return O.default.createElement(O.default.Fragment,null,O.default.createElement("h1",{className:F.default.welcome},this.productName),O.default.createElement(T.default,{formItems:this.formItems,name:"normal_login",className:F.default["login-form"],initialValues:this.defaultValue,onFinish:this.onFinish,formref:this.formRef,size:"large"}),this.renderExtra())}}n.Login=D;var z=(0,I.inject)("rootStore")((0,I.observer)(D));n.default=z},1748:function(e,t,n){"use strict";var r=n(20),a=n(21);r(t,"__esModule",{value:!0}),t.default=t.SkylineStore=void 0;var o,i,l,s,d=a(n(26)),u=a(n(51)),f=a(n(74)),c=(a(n(35)),a(n(54))),p=(a(n(75)),n(36)),m=a(n(52)),g=a(n(53)),h=(o=class extends g.default{constructor(){super(...arguments),(0,f.default)(this,"domains",i,this),(0,f.default)(this,"regions",l,this),(0,f.default)(this,"sso",s,this)}get client(){return m.default.skyline.contrib}fetchDomainList(){var e=this;return(0,u.default)((function*(){var t=yield e.client.domains();e.domains=t}))()}fetchRegionList(){var e=this;return(0,u.default)((function*(){var t=yield e.client.regions();e.regions=t}))()}fetchSSO(){var e=this;return(0,u.default)((function*(){var t=yield m.default.skyline.sso.list();e.sso=t}))()}},i=(0,c.default)(o.prototype,"domains",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=(0,c.default)(o.prototype,"regions",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=(0,c.default)(o.prototype,"sso",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,c.default)(o.prototype,"fetchDomainList",[p.action],(0,d.default)(o.prototype,"fetchDomainList"),o.prototype),(0,c.default)(o.prototype,"fetchRegionList",[p.action],(0,d.default)(o.prototype,"fetchRegionList"),o.prototype),(0,c.default)(o.prototype,"fetchSSO",[p.action],(0,d.default)(o.prototype,"fetchSSO"),o.prototype),o);t.SkylineStore=h;var _=new h;t.default=_},1749:function(e,t,n){var r=n(1750);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:undefined,insertInto:void 0};n(64)(r,a);r.locals&&(e.exports=r.locals)},1750:function(e,t,n){(t=e.exports=n(63)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  input */\n/*  background */\n/* button */\n/*  shadow */\n/*  font */\n/*  animation */\n/*  size */\n/*  sider */\n.index__layout-header-menu-search-border--1XHpD {\n  border: none;\n}\n.index__vertical-center--1d4Ix {\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n/* login */\n.index__register--2dPww {\n  float: right;\n}\n.index__welcome--Wrl8u {\n  margin-top: 24px;\n  margin-bottom: 24px;\n}\n.index__login-form--2ucoo {\n  width: 310px;\n}\n.index__login-error--2XGt4 {\n  padding: 8px 12px;\n  color: #a43a39;\n  font-size: 14px;\n  line-height: 1.5;\n  background: #f2dede;\n  border: 1px solid #a43a39;\n  border-radius: 4px;\n}\n.index__login-error--2XGt4 .anticon {\n  margin-right: 8px;\n}\n",""]),t.locals={primaryColor:"#a33e3e",normalColor:"rgba(34, 117, 74, 0.85)",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"50px",productsColumnWidth:"192px","layout-header-menu-search-border":"index__layout-header-menu-search-border--1XHpD","vertical-center":"index__vertical-center--1d4Ix",register:"index__register--2dPww",welcome:"index__welcome--Wrl8u","login-form":"index__login-form--2ucoo","login-error":"index__login-error--2XGt4"}},1751:function(e,n,r){"use strict";var a=r(162),o=r(20),i=r(26),l=r(21);o(n,"__esModule",{value:!0}),n.default=n.Password=void 0;var s=l(r(90));r(231);var d=l(r(341));r(569);var u=l(r(1252)),f=l(r(616)),c=l(r(35)),p=l(r(177)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var r={},a=o&&i;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=a?i(e,l):null;s&&(s.get||s.set)?o(r,l,s):r[l]=e[l]}r.default=e,n&&n.set(e,r);return r}(r(0)),g=(r(161),r(204)),h=(r(564),r(565)),_=r(412),x=r(36),v=l(r(1254)),w=l(r(1269)),b=l(r(1490)),y=l(r(1781));function S(e){if("function"!=typeof a)return null;var t=new a,n=new a;return(S=function(e){return e?n:t})(e)}class E extends m.Component{constructor(e){super(e),(0,c.default)(this,"formRef",null),(0,c.default)(this,"onFinish",(e=>{var{rootStore:n}=this.props,{userId:r,oldPassword:a}=this.passwordData,{password:o}=e,i={id:r,password:o,original_password:a};this.setState({loading:!0}),v.default.changePasswordUser(i).then((()=>{this.setState({loading:!1}),w.default.success(t("Password changed successfully, please log in again.")),n.setPasswordInfo(null),n.routing.push("/auth/login")}),(e=>{var{response:{data:{error:{message:t}={}}={}}={}}=e;this.setState({error:!0,message:t,loading:!1})}))})),(0,c.default)(this,"getCount",(e=>{try{return e.split("be unique is ")[1].split(".")[0]}catch(e){return 0}})),(0,c.default)(this,"getErrorWord",(e=>{if(!e)return t("Reset failed, please retry");if((0,s.default)(e).call(e,"The new password cannot be identical to a previous password.")>=0){var n=this.getCount(e);return n?"2"===n?t("The password must not be the same as the previous two"):t("The password must not be the same as the previous {num}",{num:n}):t("The password must not be the same as the previous")}return t("Reset failed, please retry")})),this.init(),this.state={error:!1,message:"",loading:!1}}componentDidMount(){var{rootStore:{routing:e}={}}=this.props;this.passwordData&&!(0,p.default)(this.passwordData)||e.push("/auth/login")}componentWillUnmount(){var{rootStore:e}=this.props;e.setPasswordInfo(null)}get passwordData(){var{rootStore:{oldPassword:e}={}}=this.props;return(0,x.toJS)(e)||{}}get defaultValue(){var{oldPassword:e}=this.passwordData;return{oldPassword:e}}get formItems(){var{error:e,message:n,loading:r}=this.state,a=this.getErrorWord(n);return[{name:"hint",render:()=>m.default.createElement("div",{className:y.default.hint},m.default.createElement(f.default,{style:{color:globalCSS.warnColor}}),t("User need to change password"))},{name:"error",hidden:!e,render:()=>m.default.createElement("div",{className:y.default.error},m.default.createElement(f.default,null),a)},{name:"password",required:!0,message:t("Please input your password!"),otherRule:(0,h.getPasswordOtherRule)("password","user",!0),render:()=>m.default.createElement(u.default.Password,{placeholder:t("Password")})},{name:"confirmPassword",required:!0,message:t("Please confirm your password!"),dependencies:["password"],otherRule:(0,h.getPasswordOtherRule)("confirmPassword","user",!0),render:()=>m.default.createElement(u.default.Password,{placeholder:t("Confirm Password")})},{name:"submit",className:y.default.between,render:()=>m.default.createElement(m.default.Fragment,null,m.default.createElement(d.default,{type:"primary",htmlType:"submit",loading:r},t("Confirm")),m.default.createElement(g.Link,{style:{marginLeft:50},to:"/auth/login"},t("Back to login page")))}]}init(){this.formRef=m.default.createRef()}render(){return m.default.createElement(m.default.Fragment,null,m.default.createElement("h1",{className:y.default.welcome},t("Welcome")),m.default.createElement(b.default,{formref:this.formRef,formItems:this.formItems,name:"reset_password",className:y.default.reset,onFinish:this.onFinish,initialValues:this.defaultValue,size:"large",scrollToFirstError:!0}))}}n.Password=E;var L=(0,_.inject)("rootStore")((0,_.observer)(E));n.default=L},1781:function(e,t,n){var r=n(1782);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:undefined,insertInto:void 0};n(64)(r,a);r.locals&&(e.exports=r.locals)},1782:function(e,t,n){(t=e.exports=n(63)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  input */\n/*  background */\n/* button */\n/*  shadow */\n/*  font */\n/*  animation */\n/*  size */\n/*  sider */\n.index__layout-header-menu-search-border--35WVl {\n  border: none;\n}\n.index__vertical-center--3LT1J {\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n/* login */\n.index__register--3Uzk2 {\n  float: right;\n}\n.index__welcome--3RISd {\n  margin-top: 24px;\n  margin-bottom: 24px;\n}\n.index__hint--1lIUh {\n  padding: 8px 12px;\n  color: rgba(0, 0, 0, 0.65);\n  font-size: 14px;\n  line-height: 1.5;\n  background: #fffbe6;\n  border: 1px solid #ffe58f;\n  border-radius: 4px;\n}\n.index__hint--1lIUh .anticon {\n  margin-right: 8px;\n}\n.index__reset--1EOoE {\n  margin-top: 24px;\n}\n.index__reset--1EOoE .index__title--2znQU {\n  margin-bottom: 24px;\n}\n.index__reset--1EOoE .index__info--3bS5M {\n  margin-bottom: 24px;\n}\n.index__reset--1EOoE .index__between--10sD1 .ant-form-item-control-input-content {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.index__error--SAQ5q {\n  padding-left: 12px;\n  color: #a43a39;\n  font-size: 14px;\n  line-height: 38px;\n  background: #f2dede;\n  border: 1px solid #a43a39;\n  border-radius: 4px;\n}\n.index__error--SAQ5q .anticon {\n  margin-right: 8px;\n}\n",""]),t.locals={primaryColor:"#a33e3e",normalColor:"rgba(34, 117, 74, 0.85)",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"50px",productsColumnWidth:"192px","layout-header-menu-search-border":"index__layout-header-menu-search-border--35WVl","vertical-center":"index__vertical-center--3LT1J",register:"index__register--3Uzk2",welcome:"index__welcome--3RISd",hint:"index__hint--1lIUh",reset:"index__reset--1EOoE",title:"index__title--2znQU",info:"index__info--3bS5M",between:"index__between--10sD1",error:"index__error--SAQ5q"}}}]);